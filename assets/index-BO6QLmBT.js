(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var WD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KE={exports:{}},of={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD=Symbol.for("react.transitional.element"),QD=Symbol.for("react.fragment");function QE(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var a in e)a!=="key"&&(n[a]=e[a])}else n=e;return e=n.ref,{$$typeof:KD,type:t,key:r,ref:e!==void 0?e:null,props:n}}of.Fragment=QD;of.jsx=QE;of.jsxs=QE;KE.exports=of;var l=KE.exports,XE={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=Symbol.for("react.transitional.element"),XD=Symbol.for("react.portal"),JD=Symbol.for("react.fragment"),ZD=Symbol.for("react.strict_mode"),eI=Symbol.for("react.profiler"),tI=Symbol.for("react.consumer"),nI=Symbol.for("react.context"),rI=Symbol.for("react.forward_ref"),aI=Symbol.for("react.suspense"),iI=Symbol.for("react.memo"),JE=Symbol.for("react.lazy"),sI=Symbol.for("react.activity"),U1=Symbol.iterator;function oI(t){return t===null||typeof t!="object"?null:(t=U1&&t[U1]||t["@@iterator"],typeof t=="function"?t:null)}var ZE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eT=Object.assign,tT={};function zo(t,e,n){this.props=t,this.context=e,this.refs=tT,this.updater=n||ZE}zo.prototype.isReactComponent={};zo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nT(){}nT.prototype=zo.prototype;function e0(t,e,n){this.props=t,this.context=e,this.refs=tT,this.updater=n||ZE}var t0=e0.prototype=new nT;t0.constructor=e0;eT(t0,zo.prototype);t0.isPureReactComponent=!0;var B1=Array.isArray;function rg(){}var Ue={H:null,A:null,T:null,S:null},rT=Object.prototype.hasOwnProperty;function n0(t,e,n){var r=n.ref;return{$$typeof:Zy,type:t,key:e,ref:r!==void 0?r:null,props:n}}function lI(t,e){return n0(t.type,e,t.props)}function r0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zy}function cI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var z1=/\/+/g;function $m(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cI(""+t.key):e.toString(36)}function uI(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(rg,rg):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ps(t,e,n,r,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"bigint":case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Zy:case XD:s=!0;break;case JE:return s=t._init,Ps(s(t._payload),e,n,r,a)}}if(s)return a=a(t),s=r===""?"."+$m(t,0):r,B1(a)?(n="",s!=null&&(n=s.replace(z1,"$&/")+"/"),Ps(a,e,n,"",function(d){return d})):a!=null&&(r0(a)&&(a=lI(a,n+(a.key==null||t&&t.key===a.key?"":(""+a.key).replace(z1,"$&/")+"/")+s)),e.push(a)),1;s=0;var o=r===""?".":r+":";if(B1(t))for(var u=0;u<t.length;u++)r=t[u],i=o+$m(r,u),s+=Ps(r,e,n,i,a);else if(u=oI(t),typeof u=="function")for(t=u.call(t),u=0;!(r=t.next()).done;)r=r.value,i=o+$m(r,u++),s+=Ps(r,e,n,i,a);else if(i==="object"){if(typeof t.then=="function")return Ps(uI(t),e,n,r,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return s}function Wu(t,e,n){if(t==null)return t;var r=[],a=0;return Ps(t,r,"","",function(i){return e.call(n,i,a++)}),r}function dI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var F1=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hI={map:Wu,forEach:function(t,e,n){Wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wu(t,function(){e++}),e},toArray:function(t){return Wu(t,function(e){return e})||[]},only:function(t){if(!r0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Activity=sI;oe.Children=hI;oe.Component=zo;oe.Fragment=JD;oe.Profiler=eI;oe.PureComponent=e0;oe.StrictMode=ZD;oe.Suspense=aI;oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ue;oe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ue.H.useMemoCache(t)}};oe.cache=function(t){return function(){return t.apply(null,arguments)}};oe.cacheSignal=function(){return null};oe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=eT({},t.props),a=t.key;if(e!=null)for(i in e.key!==void 0&&(a=""+e.key),e)!rT.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(r[i]=e[i]);var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){for(var s=Array(i),o=0;o<i;o++)s[o]=arguments[o+2];r.children=s}return n0(t.type,a,r)};oe.createContext=function(t){return t={$$typeof:nI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:tI,_context:t},t};oe.createElement=function(t,e,n){var r,a={},i=null;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)rT.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(a[r]=e[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var o=Array(s),u=0;u<s;u++)o[u]=arguments[u+2];a.children=o}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return n0(t,i,a)};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:rI,render:t}};oe.isValidElement=r0;oe.lazy=function(t){return{$$typeof:JE,_payload:{_status:-1,_result:t},_init:dI}};oe.memo=function(t,e){return{$$typeof:iI,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Ue.T,n={};Ue.T=n;try{var r=t(),a=Ue.S;a!==null&&a(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(rg,F1)}catch(i){F1(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ue.T=e}};oe.unstable_useCacheRefresh=function(){return Ue.H.useCacheRefresh()};oe.use=function(t){return Ue.H.use(t)};oe.useActionState=function(t,e,n){return Ue.H.useActionState(t,e,n)};oe.useCallback=function(t,e){return Ue.H.useCallback(t,e)};oe.useContext=function(t){return Ue.H.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t,e){return Ue.H.useDeferredValue(t,e)};oe.useEffect=function(t,e){return Ue.H.useEffect(t,e)};oe.useEffectEvent=function(t){return Ue.H.useEffectEvent(t)};oe.useId=function(){return Ue.H.useId()};oe.useImperativeHandle=function(t,e,n){return Ue.H.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Ue.H.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Ue.H.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Ue.H.useMemo(t,e)};oe.useOptimistic=function(t,e){return Ue.H.useOptimistic(t,e)};oe.useReducer=function(t,e,n){return Ue.H.useReducer(t,e,n)};oe.useRef=function(t){return Ue.H.useRef(t)};oe.useState=function(t){return Ue.H.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Ue.H.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Ue.H.useTransition()};oe.version="19.2.3";XE.exports=oe;var R=XE.exports;const fI=sf(R);var aT={exports:{}},lf={},iT={exports:{}},sT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,U){var H=k.length;k.push(U);e:for(;0<H;){var G=H-1>>>1,K=k[G];if(0<a(K,U))k[G]=U,k[H]=K,H=G;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var U=k[0],H=k.pop();if(H!==U){k[0]=H;e:for(var G=0,K=k.length,ee=K>>>1;G<ee;){var z=2*(G+1)-1,J=k[z],ue=z+1,me=k[ue];if(0>a(J,H))ue<K&&0>a(me,J)?(k[G]=me,k[ue]=H,G=ue):(k[G]=J,k[z]=H,G=z);else if(ue<K&&0>a(me,H))k[G]=me,k[ue]=H,G=ue;else break e}}return U}function a(k,U){var H=k.sortIndex-U.sortIndex;return H!==0?H:k.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],d=[],h=1,f=null,p=3,y=!1,w=!1,N=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function I(k){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=k)r(d),U.sortIndex=U.expirationTime,e(u,U);else break;U=n(d)}}function V(k){if(N=!1,I(k),!w)if(n(u)!==null)w=!0,q||(q=!0,j());else{var U=n(d);U!==null&&Y(V,U.startTime-k)}}var q=!1,S=-1,v=5,b=-1;function C(){return A?!0:!(t.unstable_now()-b<v)}function O(){if(A=!1,q){var k=t.unstable_now();b=k;var U=!0;try{e:{w=!1,N&&(N=!1,x(S),S=-1),y=!0;var H=p;try{t:{for(I(k),f=n(u);f!==null&&!(f.expirationTime>k&&C());){var G=f.callback;if(typeof G=="function"){f.callback=null,p=f.priorityLevel;var K=G(f.expirationTime<=k);if(k=t.unstable_now(),typeof K=="function"){f.callback=K,I(k),U=!0;break t}f===n(u)&&r(u),I(k)}else r(u);f=n(u)}if(f!==null)U=!0;else{var ee=n(d);ee!==null&&Y(V,ee.startTime-k),U=!1}}break e}finally{f=null,p=H,y=!1}U=void 0}}finally{U?j():q=!1}}}var j;if(typeof E=="function")j=function(){E(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ie=D.port2;D.port1.onmessage=O,j=function(){ie.postMessage(null)}}else j=function(){_(O,0)};function Y(k,U){S=_(function(){k(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(k){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var H=p;p=U;try{return k()}finally{p=H}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(k,U){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var H=p;p=k;try{return U()}finally{p=H}},t.unstable_scheduleCallback=function(k,U,H){var G=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?G+H:G):H=G,k){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,k={id:h++,callback:U,priorityLevel:k,startTime:H,expirationTime:K,sortIndex:-1},H>G?(k.sortIndex=H,e(d,k),n(u)===null&&k===n(d)&&(N?(x(S),S=-1):N=!0,Y(V,H-G))):(k.sortIndex=K,e(u,k),w||y||(w=!0,q||(q=!0,j()))),k},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(k){var U=p;return function(){var H=p;p=U;try{return k.apply(this,arguments)}finally{p=H}}}})(sT);iT.exports=sT;var mI=iT.exports,oT={exports:{}},Ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI=R;function lT(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function va(){}var $t={d:{f:va,r:function(){throw Error(lT(522))},D:va,C:va,L:va,m:va,X:va,S:va,M:va},p:0,findDOMNode:null},gI=Symbol.for("react.portal");function yI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gI,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var lc=pI.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function cf(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$t;Ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(lT(299));return yI(t,e,null,n)};Ht.flushSync=function(t){var e=lc.T,n=$t.p;try{if(lc.T=null,$t.p=2,t)return t()}finally{lc.T=e,$t.p=n,$t.d.f()}};Ht.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,$t.d.C(t,e))};Ht.prefetchDNS=function(t){typeof t=="string"&&$t.d.D(t)};Ht.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=cf(n,e.crossOrigin),a=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?$t.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):n==="script"&&$t.d.X(t,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ht.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=cf(e.as,e.crossOrigin);$t.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&$t.d.M(t)};Ht.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=cf(n,e.crossOrigin);$t.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ht.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=cf(e.as,e.crossOrigin);$t.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else $t.d.m(t)};Ht.requestFormReset=function(t){$t.d.r(t)};Ht.unstable_batchedUpdates=function(t,e){return t(e)};Ht.useFormState=function(t,e,n){return lc.H.useFormState(t,e,n)};Ht.useFormStatus=function(){return lc.H.useHostTransitionStatus()};Ht.version="19.2.3";function cT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cT)}catch(t){console.error(t)}}cT(),oT.exports=Ht;var vI=oT.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=mI,uT=R,_I=vI;function F(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function dT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fT(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $1(t){if(eu(t)!==t)throw Error(F(188))}function bI(t){var e=t.alternate;if(!e){if(e=eu(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return $1(a),t;if(i===r)return $1(a),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function mT(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=mT(t),e!==null)return e;t=t.sibling}return null}var Be=Object.assign,xI=Symbol.for("react.element"),Ku=Symbol.for("react.transitional.element"),Kl=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),pT=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),gT=Symbol.for("react.consumer"),Mr=Symbol.for("react.context"),a0=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),sg=Symbol.for("react.suspense_list"),i0=Symbol.for("react.memo"),xa=Symbol.for("react.lazy"),og=Symbol.for("react.activity"),wI=Symbol.for("react.memo_cache_sentinel"),q1=Symbol.iterator;function Ll(t){return t===null||typeof t!="object"?null:(t=q1&&t[q1]||t["@@iterator"],typeof t=="function"?t:null)}var EI=Symbol.for("react.client.reference");function lg(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===EI?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qs:return"Fragment";case ag:return"Profiler";case pT:return"StrictMode";case ig:return"Suspense";case sg:return"SuspenseList";case og:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Kl:return"Portal";case Mr:return t.displayName||"Context";case gT:return(t._context.displayName||"Context")+".Consumer";case a0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case i0:return e=t.displayName||null,e!==null?e:lg(t.type)||"Memo";case xa:e=t._payload,t=t._init;try{return lg(t(e))}catch{}}return null}var Ql=Array.isArray,re=uT.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=_I.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Bi={pending:!1,data:null,method:null,action:null},cg=[],Hs=-1;function Tr(t){return{current:t}}function wt(t){0>Hs||(t.current=cg[Hs],cg[Hs]=null,Hs--)}function ke(t,e){Hs++,cg[Hs]=t.current,t.current=e}var mr=Tr(null),Cc=Tr(null),Va=Tr(null),nh=Tr(null);function rh(t,e){switch(ke(Va,e),ke(Cc,t),ke(mr,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Qb(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Qb(e),t=P2(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}wt(mr),ke(mr,t)}function _o(){wt(mr),wt(Cc),wt(Va)}function ug(t){t.memoizedState!==null&&ke(nh,t);var e=mr.current,n=P2(e,t.type);e!==n&&(ke(Cc,t),ke(mr,n))}function ah(t){Cc.current===t&&(wt(mr),wt(Cc)),nh.current===t&&(wt(nh),Uc._currentValue=Bi)}var qm,H1;function ji(t){if(qm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qm=e&&e[1]||"",H1=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qm+t+H1}var Hm=!1;function Gm(t,e){if(!t||Hm)return"";Hm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(y){var p=y}Reflect.construct(t,[],f)}else{try{f.call()}catch(y){p=y}t.call(f.prototype)}}else{try{throw Error()}catch(y){p=y}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(y){if(y&&p&&typeof y.stack=="string")return[y.stack,p.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),s=i[0],o=i[1];if(s&&o){var u=s.split(`
`),d=o.split(`
`);for(a=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(r===u.length||a===d.length)for(r=u.length-1,a=d.length-1;1<=r&&0<=a&&u[r]!==d[a];)a--;for(;1<=r&&0<=a;r--,a--)if(u[r]!==d[a]){if(r!==1||a!==1)do if(r--,a--,0>a||u[r]!==d[a]){var h=`
`+u[r].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=r&&0<=a);break}}}finally{Hm=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ji(n):""}function TI(t,e){switch(t.tag){case 26:case 27:case 5:return ji(t.type);case 16:return ji("Lazy");case 13:return t.child!==e&&e!==null?ji("Suspense Fallback"):ji("Suspense");case 19:return ji("SuspenseList");case 0:case 15:return Gm(t.type,!1);case 11:return Gm(t.type.render,!1);case 1:return Gm(t.type,!0);case 31:return ji("Activity");default:return""}}function G1(t){try{var e="",n=null;do e+=TI(t,n),n=t,t=t.return;while(t);return e}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var dg=Object.prototype.hasOwnProperty,s0=gt.unstable_scheduleCallback,Ym=gt.unstable_cancelCallback,SI=gt.unstable_shouldYield,NI=gt.unstable_requestPaint,pn=gt.unstable_now,AI=gt.unstable_getCurrentPriorityLevel,yT=gt.unstable_ImmediatePriority,vT=gt.unstable_UserBlockingPriority,ih=gt.unstable_NormalPriority,CI=gt.unstable_LowPriority,_T=gt.unstable_IdlePriority,RI=gt.log,DI=gt.unstable_setDisableYieldValue,tu=null,gn=null;function Ia(t){if(typeof RI=="function"&&DI(t),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(tu,t)}catch{}}var yn=Math.clz32?Math.clz32:jI,II=Math.log,OI=Math.LN2;function jI(t){return t>>>=0,t===0?32:31-(II(t)/OI|0)|0}var Qu=256,Xu=262144,Ju=4194304;function ki(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function uf(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var a=0,i=t.suspendedLanes,s=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~i,r!==0?a=ki(r):(s&=o,s!==0?a=ki(s):n||(n=o&~t,n!==0&&(a=ki(n))))):(o=r&~i,o!==0?a=ki(o):s!==0?a=ki(s):n||(n=r&~t,n!==0&&(a=ki(n)))),a===0?0:e!==0&&e!==a&&!(e&i)&&(i=a&-a,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:a}function nu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function kI(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bT(){var t=Ju;return Ju<<=1,!(Ju&62914560)&&(Ju=4194304),t}function Wm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ru(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function MI(t,e,n,r,a,i){var s=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,u=t.expirationTimes,d=t.hiddenUpdates;for(n=s&~n;0<n;){var h=31-yn(n),f=1<<h;o[h]=0,u[h]=-1;var p=d[h];if(p!==null)for(d[h]=null,h=0;h<p.length;h++){var y=p[h];y!==null&&(y.lane&=-536870913)}n&=~f}r!==0&&xT(t,r,0),i!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=i&~(s&~e))}function xT(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-yn(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&261930}function wT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}function ET(t,e){var n=e&-e;return n=n&42?1:o0(n),n&(t.suspendedLanes|e)?0:n}function o0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function l0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function TT(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:Y2(t.type))}function Y1(t,e){var n=Te.p;try{return Te.p=t,e()}finally{Te.p=n}}var ui=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ui,nn="__reactProps$"+ui,Fo="__reactContainer$"+ui,hg="__reactEvents$"+ui,PI="__reactListeners$"+ui,LI="__reactHandles$"+ui,W1="__reactResources$"+ui,au="__reactMarker$"+ui;function c0(t){delete t[Rt],delete t[nn],delete t[hg],delete t[PI],delete t[LI]}function Gs(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fo]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tx(t);t!==null;){if(n=t[Rt])return n;t=tx(t)}return e}t=n,n=t.parentNode}return null}function $o(t){if(t=t[Rt]||t[Fo]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Xl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(F(33))}function so(t){var e=t[W1];return e||(e=t[W1]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function xt(t){t[au]=!0}var ST=new Set,NT={};function ss(t,e){bo(t,e),bo(t+"Capture",e)}function bo(t,e){for(NT[t]=e,t=0;t<e.length;t++)ST.add(e[t])}var VI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),K1={},Q1={};function UI(t){return dg.call(Q1,t)?!0:dg.call(K1,t)?!1:VI.test(t)?Q1[t]=!0:(K1[t]=!0,!1)}function Ad(t,e,n){if(UI(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Zu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Cr(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}function Sn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BI(t,e,n){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fg(t){if(!t._valueTracker){var e=AT(t)?"checked":"value";t._valueTracker=BI(t,e,""+t[e])}}function CT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zI=/[\n"\\]/g;function Cn(t){return t.replace(zI,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mg(t,e,n,r,a,i,s,o){t.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?t.type=s:t.removeAttribute("type"),e!=null?s==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Sn(e)):t.value!==""+Sn(e)&&(t.value=""+Sn(e)):s!=="submit"&&s!=="reset"||t.removeAttribute("value"),e!=null?pg(t,s,Sn(e)):n!=null?pg(t,s,Sn(n)):r!=null&&t.removeAttribute("value"),a==null&&i!=null&&(t.defaultChecked=!!i),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Sn(o):t.removeAttribute("name")}function RT(t,e,n,r,a,i,s,o){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){fg(t);return}n=n!=null?""+Sn(n):"",e=e!=null?""+Sn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??a,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.name=s),fg(t)}function pg(t,e,n){e==="number"&&sh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function oo(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sn(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function DT(t,e,n){if(e!=null&&(e=""+Sn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Sn(n):""}function IT(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(F(92));if(Ql(r)){if(1<r.length)throw Error(F(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=Sn(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r),fg(t)}function xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var FI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function X1(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||FI.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function OT(t,e,n){if(e!=null&&typeof e!="object")throw Error(F(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var a in e)r=e[a],e.hasOwnProperty(a)&&n[a]!==r&&X1(t,a,r)}else for(var i in e)e.hasOwnProperty(i)&&X1(t,i,e[i])}function u0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $I=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cd(t){return qI.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Pr(){}var gg=null;function d0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ys=null,lo=null;function J1(t){var e=$o(t);if(e&&(t=e.stateNode)){var n=t[nn]||null;e:switch(t=e.stateNode,e.type){case"input":if(mg(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Cn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=r[nn]||null;if(!a)throw Error(F(90));mg(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&CT(r)}break e;case"textarea":DT(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}}}var Km=!1;function jT(t,e,n){if(Km)return t(e,n);Km=!0;try{var r=t(e);return r}finally{if(Km=!1,(Ys!==null||lo!==null)&&(wf(),Ys&&(e=Ys,t=lo,lo=Ys=null,J1(e),t)))for(e=0;e<t.length;e++)J1(t[e])}}function Rc(t,e){var n=t.stateNode;if(n===null)return null;var r=n[nn]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yg=!1;if(Yr)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){yg=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{yg=!1}var Oa=null,h0=null,Rd=null;function kT(){if(Rd)return Rd;var t,e=h0,n=e.length,r,a="value"in Oa?Oa.value:Oa.textContent,i=a.length;for(t=0;t<n&&e[t]===a[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===a[i-r];r++);return Rd=a.slice(t,1<r?1-r:void 0)}function Dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ed(){return!0}function Z1(){return!1}function rn(t){function e(n,r,a,i,s){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ed:Z1,this.isPropagationStopped=Z1,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ed)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ed)},persist:function(){},isPersistent:ed}),e}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},df=rn(os),iu=Be({},os,{view:0,detail:0}),HI=rn(iu),Qm,Xm,Ul,hf=Be({},iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ul&&(Ul&&t.type==="mousemove"?(Qm=t.screenX-Ul.screenX,Xm=t.screenY-Ul.screenY):Xm=Qm=0,Ul=t),Qm)},movementY:function(t){return"movementY"in t?t.movementY:Xm}}),eb=rn(hf),GI=Be({},hf,{dataTransfer:0}),YI=rn(GI),WI=Be({},iu,{relatedTarget:0}),Jm=rn(WI),KI=Be({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),QI=rn(KI),XI=Be({},os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JI=rn(XI),ZI=Be({},os,{data:0}),tb=rn(ZI),eO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nO[t])?!!e[t]:!1}function f0(){return rO}var aO=Be({},iu,{key:function(t){if(t.key){var e=eO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f0,charCode:function(t){return t.type==="keypress"?Dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iO=rn(aO),sO=Be({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nb=rn(sO),oO=Be({},iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f0}),lO=rn(oO),cO=Be({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),uO=rn(cO),dO=Be({},hf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hO=rn(dO),fO=Be({},os,{newState:0,oldState:0}),mO=rn(fO),pO=[9,13,27,32],m0=Yr&&"CompositionEvent"in window,cc=null;Yr&&"documentMode"in document&&(cc=document.documentMode);var gO=Yr&&"TextEvent"in window&&!cc,MT=Yr&&(!m0||cc&&8<cc&&11>=cc),rb=" ",ab=!1;function PT(t,e){switch(t){case"keyup":return pO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function yO(t,e){switch(t){case"compositionend":return LT(e);case"keypress":return e.which!==32?null:(ab=!0,rb);case"textInput":return t=e.data,t===rb&&ab?null:t;default:return null}}function vO(t,e){if(Ws)return t==="compositionend"||!m0&&PT(t,e)?(t=kT(),Rd=h0=Oa=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MT&&e.locale!=="ko"?null:e.data;default:return null}}var _O={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ib(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_O[t.type]:e==="textarea"}function VT(t,e,n,r){Ys?lo?lo.push(r):lo=[r]:Ys=r,e=Th(e,"onChange"),0<e.length&&(n=new df("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uc=null,Dc=null;function bO(t){j2(t,0)}function ff(t){var e=Xl(t);if(CT(e))return t}function sb(t,e){if(t==="change")return e}var UT=!1;if(Yr){var Zm;if(Yr){var ep="oninput"in document;if(!ep){var ob=document.createElement("div");ob.setAttribute("oninput","return;"),ep=typeof ob.oninput=="function"}Zm=ep}else Zm=!1;UT=Zm&&(!document.documentMode||9<document.documentMode)}function lb(){uc&&(uc.detachEvent("onpropertychange",BT),Dc=uc=null)}function BT(t){if(t.propertyName==="value"&&ff(Dc)){var e=[];VT(e,Dc,t,d0(t)),jT(bO,e)}}function xO(t,e,n){t==="focusin"?(lb(),uc=e,Dc=n,uc.attachEvent("onpropertychange",BT)):t==="focusout"&&lb()}function wO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ff(Dc)}function EO(t,e){if(t==="click")return ff(e)}function TO(t,e){if(t==="input"||t==="change")return ff(e)}function SO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:SO;function Ic(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!dg.call(e,a)||!bn(t[a],e[a]))return!1}return!0}function cb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ub(t,e){var n=cb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cb(n)}}function zT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FT(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=sh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sh(t.document)}return e}function p0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var NO=Yr&&"documentMode"in document&&11>=document.documentMode,Ks=null,vg=null,dc=null,_g=!1;function db(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_g||Ks==null||Ks!==sh(r)||(r=Ks,"selectionStart"in r&&p0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dc&&Ic(dc,r)||(dc=r,r=Th(vg,"onSelect"),0<r.length&&(e=new df("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ks)))}function Oi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qs={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionrun:Oi("Transition","TransitionRun"),transitionstart:Oi("Transition","TransitionStart"),transitioncancel:Oi("Transition","TransitionCancel"),transitionend:Oi("Transition","TransitionEnd")},tp={},$T={};Yr&&($T=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function ls(t){if(tp[t])return tp[t];if(!Qs[t])return t;var e=Qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $T)return tp[t]=e[n];return t}var qT=ls("animationend"),HT=ls("animationiteration"),GT=ls("animationstart"),AO=ls("transitionrun"),CO=ls("transitionstart"),RO=ls("transitioncancel"),YT=ls("transitionend"),WT=new Map,bg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bg.push("scrollEnd");function Jn(t,e){WT.set(t,e),ss(e,[t])}var oh=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Tn=[],Xs=0,g0=0;function mf(){for(var t=Xs,e=g0=Xs=0;e<t;){var n=Tn[e];Tn[e++]=null;var r=Tn[e];Tn[e++]=null;var a=Tn[e];Tn[e++]=null;var i=Tn[e];if(Tn[e++]=null,r!==null&&a!==null){var s=r.pending;s===null?a.next=a:(a.next=s.next,s.next=a),r.pending=a}i!==0&&KT(n,a,i)}}function pf(t,e,n,r){Tn[Xs++]=t,Tn[Xs++]=e,Tn[Xs++]=n,Tn[Xs++]=r,g0|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function y0(t,e,n,r){return pf(t,e,n,r),lh(t)}function cs(t,e){return pf(t,null,null,e),lh(t)}function KT(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var a=!1,i=t.return;i!==null;)i.childLanes|=n,r=i.alternate,r!==null&&(r.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(a=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,a&&e!==null&&(a=31-yn(n),t=i.hiddenUpdates,r=t[a],r===null?t[a]=[e]:r.push(e),e.lane=n|536870912),i):null}function lh(t){if(50<bc)throw bc=0,zg=null,Error(F(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Js={};function DO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,e,n,r){return new DO(t,e,n,r)}function v0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zr(t,e){var n=t.alternate;return n===null?(n=dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function QT(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Id(t,e,n,r,a,i){var s=0;if(r=t,typeof t=="function")v0(t)&&(s=1);else if(typeof t=="string")s=Mj(t,n,mr.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case og:return t=dn(31,n,e,a),t.elementType=og,t.lanes=i,t;case qs:return zi(n.children,a,i,e);case pT:s=8,a|=24;break;case ag:return t=dn(12,n,e,a|2),t.elementType=ag,t.lanes=i,t;case ig:return t=dn(13,n,e,a),t.elementType=ig,t.lanes=i,t;case sg:return t=dn(19,n,e,a),t.elementType=sg,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mr:s=10;break e;case gT:s=9;break e;case a0:s=11;break e;case i0:s=14;break e;case xa:s=16,r=null;break e}s=29,n=Error(F(130,t===null?"null":typeof t,"")),r=null}return e=dn(s,n,e,a),e.elementType=t,e.type=r,e.lanes=i,e}function zi(t,e,n,r){return t=dn(7,t,r,e),t.lanes=n,t}function np(t,e,n){return t=dn(6,t,null,e),t.lanes=n,t}function XT(t){var e=dn(18,null,null,0);return e.stateNode=t,e}function rp(t,e,n){return e=dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var hb=new WeakMap;function Rn(t,e){if(typeof t=="object"&&t!==null){var n=hb.get(t);return n!==void 0?n:(e={value:t,source:e,stack:G1(e)},hb.set(t,e),e)}return{value:t,source:e,stack:G1(e)}}var Zs=[],eo=0,ch=null,Oc=0,Nn=[],An=0,Za=null,ur=1,dr="";function jr(t,e){Zs[eo++]=Oc,Zs[eo++]=ch,ch=t,Oc=e}function JT(t,e,n){Nn[An++]=ur,Nn[An++]=dr,Nn[An++]=Za,Za=t;var r=ur;t=dr;var a=32-yn(r)-1;r&=~(1<<a),n+=1;var i=32-yn(e)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,ur=1<<32-yn(e)+a|n<<a|r,dr=i+t}else ur=1<<i|n<<a|r,dr=t}function _0(t){t.return!==null&&(jr(t,1),JT(t,1,0))}function b0(t){for(;t===ch;)ch=Zs[--eo],Zs[eo]=null,Oc=Zs[--eo],Zs[eo]=null;for(;t===Za;)Za=Nn[--An],Nn[An]=null,dr=Nn[--An],Nn[An]=null,ur=Nn[--An],Nn[An]=null}function ZT(t,e){Nn[An++]=ur,Nn[An++]=dr,Nn[An++]=Za,ur=e.id,dr=e.overflow,Za=t}var Dt=null,Ve=null,xe=!1,Ua=null,Dn=!1,xg=Error(F(519));function ei(t){var e=Error(F(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jc(Rn(e,t)),xg}function fb(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Rt]=t,e[nn]=r,n){case"dialog":pe("cancel",e),pe("close",e);break;case"iframe":case"object":case"embed":pe("load",e);break;case"video":case"audio":for(n=0;n<Lc.length;n++)pe(Lc[n],e);break;case"source":pe("error",e);break;case"img":case"image":case"link":pe("error",e),pe("load",e);break;case"details":pe("toggle",e);break;case"input":pe("invalid",e),RT(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":pe("invalid",e);break;case"textarea":pe("invalid",e),IT(e,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||M2(e.textContent,n)?(r.popover!=null&&(pe("beforetoggle",e),pe("toggle",e)),r.onScroll!=null&&pe("scroll",e),r.onScrollEnd!=null&&pe("scrollend",e),r.onClick!=null&&(e.onclick=Pr),e=!0):e=!1,e||ei(t,!0)}function mb(t){for(Dt=t.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Dt=Dt.return}}function Is(t){if(t!==Dt)return!1;if(!xe)return mb(t),xe=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Gg(t.type,t.memoizedProps)),n=!n),n&&Ve&&ei(t),mb(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));Ve=ex(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));Ve=ex(t)}else e===27?(e=Ve,di(t.type)?(t=Qg,Qg=null,Ve=t):Ve=e):Ve=Dt?Mn(t.stateNode.nextSibling):null;return!0}function Ki(){Ve=Dt=null,xe=!1}function ap(){var t=Ua;return t!==null&&(Qt===null?Qt=t:Qt.push.apply(Qt,t),Ua=null),t}function jc(t){Ua===null?Ua=[t]:Ua.push(t)}var wg=Tr(null),us=null,Lr=null;function Ea(t,e,n){ke(wg,e._currentValue),e._currentValue=n}function Fr(t){t._currentValue=wg.current,wt(wg)}function Eg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tg(t,e,n,r){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){var s=a.child;i=i.firstContext;e:for(;i!==null;){var o=i;i=a;for(var u=0;u<e.length;u++)if(o.context===e[u]){i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Eg(i.return,n,t),r||(s=null);break e}i=o.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(F(341));s.lanes|=n,i=s.alternate,i!==null&&(i.lanes|=n),Eg(s,n,t),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function qo(t,e,n,r){t=null;for(var a=e,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(F(387));if(s=s.memoizedProps,s!==null){var o=a.type;bn(a.pendingProps.value,s.value)||(t!==null?t.push(o):t=[o])}}else if(a===nh.current){if(s=a.alternate,s===null)throw Error(F(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(Uc):t=[Uc])}a=a.return}t!==null&&Tg(e,t,n,r),e.flags|=262144}function uh(t){for(t=t.firstContext;t!==null;){if(!bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Qi(t){us=t,Lr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function jt(t){return eS(us,t)}function td(t,e){return us===null&&Qi(t),eS(t,e)}function eS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Lr===null){if(t===null)throw Error(F(308));Lr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Lr=Lr.next=e;return n}var IO=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},OO=gt.unstable_scheduleCallback,jO=gt.unstable_NormalPriority,lt={$$typeof:Mr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function x0(){return{controller:new IO,data:new Map,refCount:0}}function su(t){t.refCount--,t.refCount===0&&OO(jO,function(){t.controller.abort()})}var hc=null,Sg=0,wo=0,co=null;function kO(t,e){if(hc===null){var n=hc=[];Sg=0,wo=G0(),co={status:"pending",value:void 0,then:function(r){n.push(r)}}}return Sg++,e.then(pb,pb),e}function pb(){if(--Sg===0&&hc!==null){co!==null&&(co.status="fulfilled");var t=hc;hc=null,wo=0,co=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function MO(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var a=0;a<n.length;a++)(0,n[a])(e)},function(a){for(r.status="rejected",r.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),r}var gb=re.S;re.S=function(t,e){m2=pn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&kO(t,e),gb!==null&&gb(t,e)};var Fi=Tr(null);function w0(){var t=Fi.current;return t!==null?t:Ie.pooledCache}function Od(t,e){e===null?ke(Fi,Fi.current):ke(Fi,e.pool)}function tS(){var t=w0();return t===null?null:{parent:lt._currentValue,pool:t}}var Ho=Error(F(460)),E0=Error(F(474)),gf=Error(F(542)),dh={then:function(){}};function yb(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Pr,Pr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_b(t),t;default:if(typeof e.status=="string")e.then(Pr,Pr);else{if(t=Ie,t!==null&&100<t.shellSuspendCounter)throw Error(F(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=r}},function(r){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_b(t),t}throw $i=e,Ho}}function Mi(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?($i=n,Ho):n}}var $i=null;function vb(){if($i===null)throw Error(F(459));var t=$i;return $i=null,t}function _b(t){if(t===Ho||t===gf)throw Error(F(483))}var uo=null,kc=0;function nd(t){var e=kc;return kc+=1,uo===null&&(uo=[]),nS(uo,t,e)}function Bl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function rd(t,e){throw e.$$typeof===xI?Error(F(525)):(t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function rS(t){function e(_,x){if(t){var E=_.deletions;E===null?(_.deletions=[x],_.flags|=16):E.push(x)}}function n(_,x){if(!t)return null;for(;x!==null;)e(_,x),x=x.sibling;return null}function r(_){for(var x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function a(_,x){return _=zr(_,x),_.index=0,_.sibling=null,_}function i(_,x,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<x?(_.flags|=67108866,x):E):(_.flags|=67108866,x)):(_.flags|=1048576,x)}function s(_){return t&&_.alternate===null&&(_.flags|=67108866),_}function o(_,x,E,I){return x===null||x.tag!==6?(x=np(E,_.mode,I),x.return=_,x):(x=a(x,E),x.return=_,x)}function u(_,x,E,I){var V=E.type;return V===qs?h(_,x,E.props.children,I,E.key):x!==null&&(x.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===xa&&Mi(V)===x.type)?(x=a(x,E.props),Bl(x,E),x.return=_,x):(x=Id(E.type,E.key,E.props,null,_.mode,I),Bl(x,E),x.return=_,x)}function d(_,x,E,I){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=rp(E,_.mode,I),x.return=_,x):(x=a(x,E.children||[]),x.return=_,x)}function h(_,x,E,I,V){return x===null||x.tag!==7?(x=zi(E,_.mode,I,V),x.return=_,x):(x=a(x,E),x.return=_,x)}function f(_,x,E){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=np(""+x,_.mode,E),x.return=_,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ku:return E=Id(x.type,x.key,x.props,null,_.mode,E),Bl(E,x),E.return=_,E;case Kl:return x=rp(x,_.mode,E),x.return=_,x;case xa:return x=Mi(x),f(_,x,E)}if(Ql(x)||Ll(x))return x=zi(x,_.mode,E,null),x.return=_,x;if(typeof x.then=="function")return f(_,nd(x),E);if(x.$$typeof===Mr)return f(_,td(_,x),E);rd(_,x)}return null}function p(_,x,E,I){var V=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return V!==null?null:o(_,x,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ku:return E.key===V?u(_,x,E,I):null;case Kl:return E.key===V?d(_,x,E,I):null;case xa:return E=Mi(E),p(_,x,E,I)}if(Ql(E)||Ll(E))return V!==null?null:h(_,x,E,I,null);if(typeof E.then=="function")return p(_,x,nd(E),I);if(E.$$typeof===Mr)return p(_,x,td(_,E),I);rd(_,E)}return null}function y(_,x,E,I,V){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return _=_.get(E)||null,o(x,_,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ku:return _=_.get(I.key===null?E:I.key)||null,u(x,_,I,V);case Kl:return _=_.get(I.key===null?E:I.key)||null,d(x,_,I,V);case xa:return I=Mi(I),y(_,x,E,I,V)}if(Ql(I)||Ll(I))return _=_.get(E)||null,h(x,_,I,V,null);if(typeof I.then=="function")return y(_,x,E,nd(I),V);if(I.$$typeof===Mr)return y(_,x,E,td(x,I),V);rd(x,I)}return null}function w(_,x,E,I){for(var V=null,q=null,S=x,v=x=0,b=null;S!==null&&v<E.length;v++){S.index>v?(b=S,S=null):b=S.sibling;var C=p(_,S,E[v],I);if(C===null){S===null&&(S=b);break}t&&S&&C.alternate===null&&e(_,S),x=i(C,x,v),q===null?V=C:q.sibling=C,q=C,S=b}if(v===E.length)return n(_,S),xe&&jr(_,v),V;if(S===null){for(;v<E.length;v++)S=f(_,E[v],I),S!==null&&(x=i(S,x,v),q===null?V=S:q.sibling=S,q=S);return xe&&jr(_,v),V}for(S=r(S);v<E.length;v++)b=y(S,_,v,E[v],I),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?v:b.key),x=i(b,x,v),q===null?V=b:q.sibling=b,q=b);return t&&S.forEach(function(O){return e(_,O)}),xe&&jr(_,v),V}function N(_,x,E,I){if(E==null)throw Error(F(151));for(var V=null,q=null,S=x,v=x=0,b=null,C=E.next();S!==null&&!C.done;v++,C=E.next()){S.index>v?(b=S,S=null):b=S.sibling;var O=p(_,S,C.value,I);if(O===null){S===null&&(S=b);break}t&&S&&O.alternate===null&&e(_,S),x=i(O,x,v),q===null?V=O:q.sibling=O,q=O,S=b}if(C.done)return n(_,S),xe&&jr(_,v),V;if(S===null){for(;!C.done;v++,C=E.next())C=f(_,C.value,I),C!==null&&(x=i(C,x,v),q===null?V=C:q.sibling=C,q=C);return xe&&jr(_,v),V}for(S=r(S);!C.done;v++,C=E.next())C=y(S,_,v,C.value,I),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?v:C.key),x=i(C,x,v),q===null?V=C:q.sibling=C,q=C);return t&&S.forEach(function(j){return e(_,j)}),xe&&jr(_,v),V}function A(_,x,E,I){if(typeof E=="object"&&E!==null&&E.type===qs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ku:e:{for(var V=E.key;x!==null;){if(x.key===V){if(V=E.type,V===qs){if(x.tag===7){n(_,x.sibling),I=a(x,E.props.children),I.return=_,_=I;break e}}else if(x.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===xa&&Mi(V)===x.type){n(_,x.sibling),I=a(x,E.props),Bl(I,E),I.return=_,_=I;break e}n(_,x);break}else e(_,x);x=x.sibling}E.type===qs?(I=zi(E.props.children,_.mode,I,E.key),I.return=_,_=I):(I=Id(E.type,E.key,E.props,null,_.mode,I),Bl(I,E),I.return=_,_=I)}return s(_);case Kl:e:{for(V=E.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(_,x.sibling),I=a(x,E.children||[]),I.return=_,_=I;break e}else{n(_,x);break}else e(_,x);x=x.sibling}I=rp(E,_.mode,I),I.return=_,_=I}return s(_);case xa:return E=Mi(E),A(_,x,E,I)}if(Ql(E))return w(_,x,E,I);if(Ll(E)){if(V=Ll(E),typeof V!="function")throw Error(F(150));return E=V.call(E),N(_,x,E,I)}if(typeof E.then=="function")return A(_,x,nd(E),I);if(E.$$typeof===Mr)return A(_,x,td(_,E),I);rd(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,x!==null&&x.tag===6?(n(_,x.sibling),I=a(x,E),I.return=_,_=I):(n(_,x),I=np(E,_.mode,I),I.return=_,_=I),s(_)):n(_,x)}return function(_,x,E,I){try{kc=0;var V=A(_,x,E,I);return uo=null,V}catch(S){if(S===Ho||S===gf)throw S;var q=dn(29,S,null,_.mode);return q.lanes=I,q.return=_,q}finally{}}}var Xi=rS(!0),aS=rS(!1),wa=!1;function T0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ng(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ba(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function za(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,e=lh(t),KT(t,null,n),e}return pf(t,r,e,n),lh(t)}function fc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wT(t,n)}}function ip(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?a=i=e:i=i.next=e}else a=i=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Ag=!1;function mc(){if(Ag){var t=co;if(t!==null)throw t}}function pc(t,e,n,r){Ag=!1;var a=t.updateQueue;wa=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var u=o,d=u.next;u.next=null,s===null?i=d:s.next=d,s=u;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==s&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=u))}if(i!==null){var f=a.baseState;s=0,h=d=u=null,o=i;do{var p=o.lane&-536870913,y=p!==o.lane;if(y?(be&p)===p:(r&p)===p){p!==0&&p===wo&&(Ag=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var w=t,N=o;p=e;var A=n;switch(N.tag){case 1:if(w=N.payload,typeof w=="function"){f=w.call(A,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,p=typeof w=="function"?w.call(A,f,p):w,p==null)break e;f=Be({},f,p);break e;case 2:wa=!0}}p=o.callback,p!==null&&(t.flags|=64,y&&(t.flags|=8192),y=a.callbacks,y===null?a.callbacks=[p]:y.push(p))}else y={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=y,u=f):h=h.next=y,s|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;y=o,o=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);h===null&&(u=f),a.baseState=u,a.firstBaseUpdate=d,a.lastBaseUpdate=h,i===null&&(a.shared.lanes=0),ni|=s,t.lanes=s,t.memoizedState=f}}function iS(t,e){if(typeof t!="function")throw Error(F(191,t));t.call(e)}function sS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)iS(n[t],e)}var Eo=Tr(null),hh=Tr(0);function bb(t,e){t=Xr,ke(hh,t),ke(Eo,e),Xr=t|e.baseLanes}function Cg(){ke(hh,Xr),ke(Eo,Eo.current)}function S0(){Xr=hh.current,wt(Eo),wt(hh)}var xn=Tr(null),kn=null;function Ta(t){var e=t.alternate;ke(tt,tt.current&1),ke(xn,t),kn===null&&(e===null||Eo.current!==null||e.memoizedState!==null)&&(kn=t)}function Rg(t){ke(tt,tt.current),ke(xn,t),kn===null&&(kn=t)}function oS(t){t.tag===22?(ke(tt,tt.current),ke(xn,t),kn===null&&(kn=t)):Sa()}function Sa(){ke(tt,tt.current),ke(xn,xn.current)}function un(t){wt(xn),kn===t&&(kn=null),wt(tt)}var tt=Tr(0);function fh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Wg(n)||Kg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wr=0,le=null,Re=null,st=null,mh=!1,ho=!1,Ji=!1,ph=0,Mc=0,fo=null,PO=0;function Je(){throw Error(F(321))}function N0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function A0(t,e,n,r,a,i){return Wr=i,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,re.H=t===null||t.memoizedState===null?VS:V0,Ji=!1,i=n(r,a),Ji=!1,ho&&(i=cS(e,n,r,a)),lS(t),i}function lS(t){re.H=Pc;var e=Re!==null&&Re.next!==null;if(Wr=0,st=Re=le=null,mh=!1,Mc=0,fo=null,e)throw Error(F(300));t===null||ut||(t=t.dependencies,t!==null&&uh(t)&&(ut=!0))}function cS(t,e,n,r){le=t;var a=0;do{if(ho&&(fo=null),Mc=0,ho=!1,25<=a)throw Error(F(301));if(a+=1,st=Re=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}re.H=US,i=e(n,r)}while(ho);return i}function LO(){var t=re.H,e=t.useState()[0];return e=typeof e.then=="function"?ou(e):e,t=t.useState()[0],(Re!==null?Re.memoizedState:null)!==t&&(le.flags|=1024),e}function C0(){var t=ph!==0;return ph=0,t}function R0(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function D0(t){if(mh){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}mh=!1}Wr=0,st=Re=le=null,ho=!1,Mc=ph=0,fo=null}function Ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?le.memoizedState=st=t:st=st.next=t,st}function rt(){if(Re===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=Re.next;var e=st===null?le.memoizedState:st.next;if(e!==null)st=e,Re=t;else{if(t===null)throw le.alternate===null?Error(F(467)):Error(F(310));Re=t,t={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},st===null?le.memoizedState=st=t:st=st.next=t}return st}function yf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(t){var e=Mc;return Mc+=1,fo===null&&(fo=[]),t=nS(fo,t,e),e=le,(st===null?e.memoizedState:st.next)===null&&(e=e.alternate,re.H=e===null||e.memoizedState===null?VS:V0),t}function vf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ou(t);if(t.$$typeof===Mr)return jt(t)}throw Error(F(438,String(t)))}function I0(t){var e=null,n=le.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=le.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=yf(),le.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=wI;return e.index++,n}function Kr(t,e){return typeof e=="function"?e(t):e}function jd(t){var e=rt();return O0(e,Re,t)}function O0(t,e,n){var r=t.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=n;var a=t.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}e.baseQueue=a=i,r.pending=null}if(i=t.baseState,a===null)t.memoizedState=i;else{e=a.next;var o=s=null,u=null,d=e,h=!1;do{var f=d.lane&-536870913;if(f!==d.lane?(be&f)===f:(Wr&f)===f){var p=d.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),f===wo&&(h=!0);else if((Wr&p)===p){d=d.next,p===wo&&(h=!0);continue}else f={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(o=u=f,s=i):u=u.next=f,le.lanes|=p,ni|=p;f=d.action,Ji&&n(i,f),i=d.hasEagerState?d.eagerState:n(i,f)}else p={lane:f,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},u===null?(o=u=p,s=i):u=u.next=p,le.lanes|=f,ni|=f;d=d.next}while(d!==null&&d!==e);if(u===null?s=i:u.next=o,!bn(i,t.memoizedState)&&(ut=!0,h&&(n=co,n!==null)))throw n;t.memoizedState=i,t.baseState=s,t.baseQueue=u,r.lastRenderedState=i}return a===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function sp(t){var e=rt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,i=e.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do i=t(i,s.action),s=s.next;while(s!==a);bn(i,e.memoizedState)||(ut=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uS(t,e,n){var r=le,a=rt(),i=xe;if(i){if(n===void 0)throw Error(F(407));n=n()}else n=e();var s=!bn((Re||a).memoizedState,n);if(s&&(a.memoizedState=n,ut=!0),a=a.queue,j0(fS.bind(null,r,a,t),[t]),a.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(r.flags|=2048,To(9,{destroy:void 0},hS.bind(null,r,a,n,e),null),Ie===null)throw Error(F(349));i||Wr&127||dS(r,e,n)}return n}function dS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e=yf(),le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hS(t,e,n,r){e.value=n,e.getSnapshot=r,mS(e)&&pS(t)}function fS(t,e,n){return n(function(){mS(e)&&pS(t)})}function mS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function pS(t){var e=cs(t,2);e!==null&&en(e,t,2)}function Dg(t){var e=Ft();if(typeof t=="function"){var n=t;if(t=n(),Ji){Ia(!0);try{n()}finally{Ia(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:t},e}function gS(t,e,n,r){return t.baseState=n,O0(t,Re,typeof r=="function"?r:Kr)}function VO(t,e,n,r,a){if(bf(t))throw Error(F(485));if(t=e.action,t!==null){var i={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){i.listeners.push(s)}};re.T!==null?n(!0):i.isTransition=!1,r(i),n=e.pending,n===null?(i.next=e.pending=i,yS(e,i)):(i.next=n.next,e.pending=n.next=i)}}function yS(t,e){var n=e.action,r=e.payload,a=t.state;if(e.isTransition){var i=re.T,s={};re.T=s;try{var o=n(a,r),u=re.S;u!==null&&u(s,o),xb(t,e,o)}catch(d){Ig(t,e,d)}finally{i!==null&&s.types!==null&&(i.types=s.types),re.T=i}}else try{i=n(a,r),xb(t,e,i)}catch(d){Ig(t,e,d)}}function xb(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){wb(t,e,r)},function(r){return Ig(t,e,r)}):wb(t,e,n)}function wb(t,e,n){e.status="fulfilled",e.value=n,vS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,yS(t,n)))}function Ig(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,vS(e),e=e.next;while(e!==r)}t.action=null}function vS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function _S(t,e){return e}function Eb(t,e){if(xe){var n=Ie.formState;if(n!==null){e:{var r=le;if(xe){if(Ve){t:{for(var a=Ve,i=Dn;a.nodeType!==8;){if(!i){a=null;break t}if(a=Mn(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){Ve=Mn(a.nextSibling),r=a.data==="F!";break e}}ei(r)}r=!1}r&&(e=n[0])}}return n=Ft(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_S,lastRenderedState:e},n.queue=r,n=MS.bind(null,le,r),r.dispatch=n,r=Dg(!1),i=L0.bind(null,le,!1,r.queue),r=Ft(),a={state:e,dispatch:null,action:t,pending:null},r.queue=a,n=VO.bind(null,le,a,i,n),a.dispatch=n,r.memoizedState=t,[e,n,!1]}function Tb(t){var e=rt();return bS(e,Re,t)}function bS(t,e,n){if(e=O0(t,e,_S)[0],t=jd(Kr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=ou(e)}catch(s){throw s===Ho?gf:s}else r=e;e=rt();var a=e.queue,i=a.dispatch;return n!==e.memoizedState&&(le.flags|=2048,To(9,{destroy:void 0},UO.bind(null,a,n),null)),[r,i,t]}function UO(t,e){t.action=e}function Sb(t){var e=rt(),n=Re;if(n!==null)return bS(e,n,t);rt(),e=e.memoizedState,n=rt();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function To(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=le.updateQueue,e===null&&(e=yf(),le.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function xS(){return rt().memoizedState}function kd(t,e,n,r){var a=Ft();le.flags|=t,a.memoizedState=To(1|e,{destroy:void 0},n,r===void 0?null:r)}function _f(t,e,n,r){var a=rt();r=r===void 0?null:r;var i=a.memoizedState.inst;Re!==null&&r!==null&&N0(r,Re.memoizedState.deps)?a.memoizedState=To(e,i,n,r):(le.flags|=t,a.memoizedState=To(1|e,i,n,r))}function Nb(t,e){kd(8390656,8,t,e)}function j0(t,e){_f(2048,8,t,e)}function BO(t){le.flags|=4;var e=le.updateQueue;if(e===null)e=yf(),le.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function wS(t){var e=rt().memoizedState;return BO({ref:e,nextImpl:t}),function(){if(Ee&2)throw Error(F(440));return e.impl.apply(void 0,arguments)}}function ES(t,e){return _f(4,2,t,e)}function TS(t,e){return _f(4,4,t,e)}function SS(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NS(t,e,n){n=n!=null?n.concat([t]):null,_f(4,4,SS.bind(null,e,t),n)}function k0(){}function AS(t,e){var n=rt();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&N0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CS(t,e){var n=rt();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&N0(e,r[1]))return r[0];if(r=t(),Ji){Ia(!0);try{t()}finally{Ia(!1)}}return n.memoizedState=[r,e],r}function M0(t,e,n){return n===void 0||Wr&1073741824&&!(be&261930)?t.memoizedState=e:(t.memoizedState=n,t=g2(),le.lanes|=t,ni|=t,n)}function RS(t,e,n,r){return bn(n,e)?n:Eo.current!==null?(t=M0(t,n,r),bn(t,e)||(ut=!0),t):!(Wr&42)||Wr&1073741824&&!(be&261930)?(ut=!0,t.memoizedState=n):(t=g2(),le.lanes|=t,ni|=t,e)}function DS(t,e,n,r,a){var i=Te.p;Te.p=i!==0&&8>i?i:8;var s=re.T,o={};re.T=o,L0(t,!1,e,n);try{var u=a(),d=re.S;if(d!==null&&d(o,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=MO(u,r);gc(t,e,h,vn(t))}else gc(t,e,r,vn(t))}catch(f){gc(t,e,{then:function(){},status:"rejected",reason:f},vn())}finally{Te.p=i,s!==null&&o.types!==null&&(s.types=o.types),re.T=s}}function zO(){}function Og(t,e,n,r){if(t.tag!==5)throw Error(F(476));var a=IS(t).queue;DS(t,a,e,Bi,n===null?zO:function(){return OS(t),n(r)})}function IS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Bi,baseState:Bi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:Bi},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function OS(t){var e=IS(t);e.next===null&&(e=t.alternate.memoizedState),gc(t,e.next.queue,{},vn())}function P0(){return jt(Uc)}function jS(){return rt().memoizedState}function kS(){return rt().memoizedState}function FO(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=vn();t=Ba(n);var r=za(e,t,n);r!==null&&(en(r,e,n),fc(r,e,n)),e={cache:x0()},t.payload=e;return}e=e.return}}function $O(t,e,n){var r=vn();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},bf(t)?PS(e,n):(n=y0(t,e,n,r),n!==null&&(en(n,t,r),LS(n,e,r)))}function MS(t,e,n){var r=vn();gc(t,e,n,r)}function gc(t,e,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(bf(t))PS(e,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,bn(o,s))return pf(t,e,a,0),Ie===null&&mf(),!1}catch{}finally{}if(n=y0(t,e,a,r),n!==null)return en(n,t,r),LS(n,e,r),!0}return!1}function L0(t,e,n,r){if(r={lane:2,revertLane:G0(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},bf(t)){if(e)throw Error(F(479))}else e=y0(t,n,r,2),e!==null&&en(e,t,2)}function bf(t){var e=t.alternate;return t===le||e!==null&&e===le}function PS(t,e){ho=mh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LS(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wT(t,n)}}var Pc={readContext:jt,use:vf,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};Pc.useEffectEvent=Je;var VS={readContext:jt,use:vf,useCallback:function(t,e){return Ft().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Nb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,kd(4194308,4,SS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kd(4194308,4,t,e)},useInsertionEffect:function(t,e){kd(4,2,t,e)},useMemo:function(t,e){var n=Ft();e=e===void 0?null:e;var r=t();if(Ji){Ia(!0);try{t()}finally{Ia(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=Ft();if(n!==void 0){var a=n(e);if(Ji){Ia(!0);try{n(e)}finally{Ia(!1)}}}else a=e;return r.memoizedState=r.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},r.queue=t,t=t.dispatch=$O.bind(null,le,t),[r.memoizedState,t]},useRef:function(t){var e=Ft();return t={current:t},e.memoizedState=t},useState:function(t){t=Dg(t);var e=t.queue,n=MS.bind(null,le,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:k0,useDeferredValue:function(t,e){var n=Ft();return M0(n,t,e)},useTransition:function(){var t=Dg(!1);return t=DS.bind(null,le,t.queue,!0,!1),Ft().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=le,a=Ft();if(xe){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ie===null)throw Error(F(349));be&127||dS(r,e,n)}a.memoizedState=n;var i={value:n,getSnapshot:e};return a.queue=i,Nb(fS.bind(null,r,i,t),[t]),r.flags|=2048,To(9,{destroy:void 0},hS.bind(null,r,i,n,e),null),n},useId:function(){var t=Ft(),e=Ie.identifierPrefix;if(xe){var n=dr,r=ur;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e="_"+e+"R_"+n,n=ph++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=PO++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:P0,useFormState:Eb,useActionState:Eb,useOptimistic:function(t){var e=Ft();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=L0.bind(null,le,!0,n),n.dispatch=e,[t,e]},useMemoCache:I0,useCacheRefresh:function(){return Ft().memoizedState=FO.bind(null,le)},useEffectEvent:function(t){var e=Ft(),n={impl:t};return e.memoizedState=n,function(){if(Ee&2)throw Error(F(440));return n.impl.apply(void 0,arguments)}}},V0={readContext:jt,use:vf,useCallback:AS,useContext:jt,useEffect:j0,useImperativeHandle:NS,useInsertionEffect:ES,useLayoutEffect:TS,useMemo:CS,useReducer:jd,useRef:xS,useState:function(){return jd(Kr)},useDebugValue:k0,useDeferredValue:function(t,e){var n=rt();return RS(n,Re.memoizedState,t,e)},useTransition:function(){var t=jd(Kr)[0],e=rt().memoizedState;return[typeof t=="boolean"?t:ou(t),e]},useSyncExternalStore:uS,useId:jS,useHostTransitionStatus:P0,useFormState:Tb,useActionState:Tb,useOptimistic:function(t,e){var n=rt();return gS(n,Re,t,e)},useMemoCache:I0,useCacheRefresh:kS};V0.useEffectEvent=wS;var US={readContext:jt,use:vf,useCallback:AS,useContext:jt,useEffect:j0,useImperativeHandle:NS,useInsertionEffect:ES,useLayoutEffect:TS,useMemo:CS,useReducer:sp,useRef:xS,useState:function(){return sp(Kr)},useDebugValue:k0,useDeferredValue:function(t,e){var n=rt();return Re===null?M0(n,t,e):RS(n,Re.memoizedState,t,e)},useTransition:function(){var t=sp(Kr)[0],e=rt().memoizedState;return[typeof t=="boolean"?t:ou(t),e]},useSyncExternalStore:uS,useId:jS,useHostTransitionStatus:P0,useFormState:Sb,useActionState:Sb,useOptimistic:function(t,e){var n=rt();return Re!==null?gS(n,Re,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:I0,useCacheRefresh:kS};US.useEffectEvent=wS;function op(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jg={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),a=Ba(r);a.payload=e,n!=null&&(a.callback=n),e=za(t,a,r),e!==null&&(en(e,t,r),fc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),a=Ba(r);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=za(t,a,r),e!==null&&(en(e,t,r),fc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=Ba(n);r.tag=2,e!=null&&(r.callback=e),e=za(t,r,n),e!==null&&(en(e,t,n),fc(e,t,n))}};function Ab(t,e,n,r,a,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!Ic(n,r)||!Ic(a,i):!0}function Cb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jg.enqueueReplaceState(e,e.state,null)}function Zi(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=Be({},n));for(var a in t)n[a]===void 0&&(n[a]=t[a])}return n}function BS(t){oh(t)}function zS(t){console.error(t)}function FS(t){oh(t)}function gh(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function Rb(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function kg(t,e,n){return n=Ba(n),n.tag=3,n.payload={element:null},n.callback=function(){gh(t,e)},n}function $S(t){return t=Ba(t),t.tag=3,t}function qS(t,e,n,r){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=r.value;t.payload=function(){return a(i)},t.callback=function(){Rb(e,n,r)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Rb(e,n,r),typeof a!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function qO(t,e,n,r,a){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&qo(e,n,a,!0),n=xn.current,n!==null){switch(n.tag){case 31:case 13:return kn===null?xh():n.alternate===null&&Ze===0&&(Ze=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===dh?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),vp(t,r,a)),!1;case 22:return n.flags|=65536,r===dh?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),vp(t,r,a)),!1}throw Error(F(435,n.tag))}return vp(t,r,a),xh(),!1}if(xe)return e=xn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,r!==xg&&(t=Error(F(422),{cause:r}),jc(Rn(t,n)))):(r!==xg&&(e=Error(F(423),{cause:r}),jc(Rn(e,n))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,r=Rn(r,n),a=kg(t.stateNode,r,a),ip(t,a),Ze!==4&&(Ze=2)),!1;var i=Error(F(520),{cause:r});if(i=Rn(i,n),_c===null?_c=[i]:_c.push(i),Ze!==4&&(Ze=2),e===null)return!0;r=Rn(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=a&-a,n.lanes|=t,t=kg(n.stateNode,r,t),ip(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Fa===null||!Fa.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=$S(a),qS(a,t,n,r),ip(n,a),!1}n=n.return}while(n!==null);return!1}var U0=Error(F(461)),ut=!1;function At(t,e,n,r){e.child=t===null?aS(e,null,n,r):Xi(e,t.child,n,r)}function Db(t,e,n,r,a){n=n.render;var i=e.ref;if("ref"in r){var s={};for(var o in r)o!=="ref"&&(s[o]=r[o])}else s=r;return Qi(e),r=A0(t,e,n,s,i,a),o=C0(),t!==null&&!ut?(R0(t,e,a),Qr(t,e,a)):(xe&&o&&_0(e),e.flags|=1,At(t,e,r,a),e.child)}function Ib(t,e,n,r,a){if(t===null){var i=n.type;return typeof i=="function"&&!v0(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,HS(t,e,i,r,a)):(t=Id(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!B0(t,a)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ic,n(s,r)&&t.ref===e.ref)return Qr(t,e,a)}return e.flags|=1,t=zr(i,r),t.ref=e.ref,t.return=e,e.child=t}function HS(t,e,n,r,a){if(t!==null){var i=t.memoizedProps;if(Ic(i,r)&&t.ref===e.ref)if(ut=!1,e.pendingProps=r=i,B0(t,a))t.flags&131072&&(ut=!0);else return e.lanes=t.lanes,Qr(t,e,a)}return Mg(t,e,n,r,a)}function GS(t,e,n,r){var a=r.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(r=e.child=t.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~i}else r=0,e.child=null;return Ob(t,e,i,n,r)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Od(e,i!==null?i.cachePool:null),i!==null?bb(e,i):Cg(),oS(e);else return r=e.lanes=536870912,Ob(t,e,i!==null?i.baseLanes|n:n,n,r)}else i!==null?(Od(e,i.cachePool),bb(e,i),Sa(),e.memoizedState=null):(t!==null&&Od(e,null),Cg(),Sa());return At(t,e,a,n),e.child}function Jl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Ob(t,e,n,r,a){var i=w0();return i=i===null?null:{parent:lt._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&Od(e,null),Cg(),oS(e),t!==null&&qo(t,e,r,!0),e.childLanes=a,null}function Md(t,e){return e=yh({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function jb(t,e,n){return Xi(e,t.child,null,n),t=Md(e,e.pendingProps),t.flags|=2,un(e),e.memoizedState=null,t}function HO(t,e,n){var r=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(xe){if(r.mode==="hidden")return t=Md(e,r),e.lanes=536870912,Jl(null,t);if(Rg(e),(t=Ve)?(t=V2(t,Dn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Za!==null?{id:ur,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},n=XT(t),n.return=e,e.child=n,Dt=e,Ve=null)):t=null,t===null)throw ei(e);return e.lanes=536870912,null}return Md(e,r)}var i=t.memoizedState;if(i!==null){var s=i.dehydrated;if(Rg(e),a)if(e.flags&256)e.flags&=-257,e=jb(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(F(558));else if(ut||qo(t,e,n,!1),a=(n&t.childLanes)!==0,ut||a){if(r=Ie,r!==null&&(s=ET(r,n),s!==0&&s!==i.retryLane))throw i.retryLane=s,cs(t,s),en(r,t,s),U0;xh(),e=jb(t,e,n)}else t=i.treeContext,Ve=Mn(s.nextSibling),Dt=e,xe=!0,Ua=null,Dn=!1,t!==null&&ZT(e,t),e=Md(e,r),e.flags|=4096;return e}return t=zr(t.child,{mode:r.mode,children:r.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Pd(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(F(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Mg(t,e,n,r,a){return Qi(e),n=A0(t,e,n,r,void 0,a),r=C0(),t!==null&&!ut?(R0(t,e,a),Qr(t,e,a)):(xe&&r&&_0(e),e.flags|=1,At(t,e,n,a),e.child)}function kb(t,e,n,r,a,i){return Qi(e),e.updateQueue=null,n=cS(e,r,n,a),lS(t),r=C0(),t!==null&&!ut?(R0(t,e,i),Qr(t,e,i)):(xe&&r&&_0(e),e.flags|=1,At(t,e,n,i),e.child)}function Mb(t,e,n,r,a){if(Qi(e),e.stateNode===null){var i=Js,s=n.contextType;typeof s=="object"&&s!==null&&(i=jt(s)),i=new n(r,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=jg,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=r,i.state=e.memoizedState,i.refs={},T0(e),s=n.contextType,i.context=typeof s=="object"&&s!==null?jt(s):Js,i.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(op(e,n,s,r),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(s=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),s!==i.state&&jg.enqueueReplaceState(i,i.state,null),pc(e,r,i,a),mc(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){i=e.stateNode;var o=e.memoizedProps,u=Zi(n,o);i.props=u;var d=i.context,h=n.contextType;s=Js,typeof h=="object"&&h!==null&&(s=jt(h));var f=n.getDerivedStateFromProps;h=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o||d!==s)&&Cb(e,i,r,s),wa=!1;var p=e.memoizedState;i.state=p,pc(e,r,i,a),mc(),d=e.memoizedState,o||p!==d||wa?(typeof f=="function"&&(op(e,n,f,r),d=e.memoizedState),(u=wa||Ab(e,n,u,r,p,d,s))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),i.props=r,i.state=d,i.context=s,r=u):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,Ng(t,e),s=e.memoizedProps,h=Zi(n,s),i.props=h,f=e.pendingProps,p=i.context,d=n.contextType,u=Js,typeof d=="object"&&d!==null&&(u=jt(d)),o=n.getDerivedStateFromProps,(d=typeof o=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==f||p!==u)&&Cb(e,i,r,u),wa=!1,p=e.memoizedState,i.state=p,pc(e,r,i,a),mc();var y=e.memoizedState;s!==f||p!==y||wa||t!==null&&t.dependencies!==null&&uh(t.dependencies)?(typeof o=="function"&&(op(e,n,o,r),y=e.memoizedState),(h=wa||Ab(e,n,h,r,p,y,u)||t!==null&&t.dependencies!==null&&uh(t.dependencies))?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),i.props=r,i.state=y,i.context=u,r=h):(typeof i.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return i=r,Pd(t,e),r=(e.flags&128)!==0,i||r?(i=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&r?(e.child=Xi(e,t.child,null,a),e.child=Xi(e,null,n,a)):At(t,e,n,a),e.memoizedState=i.state,t=e.child):t=Qr(t,e,a),t}function Pb(t,e,n,r){return Ki(),e.flags|=256,At(t,e,n,r),e.child}var lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cp(t){return{baseLanes:t,cachePool:tS()}}function up(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=fn),t}function YS(t,e,n){var r=e.pendingProps,a=!1,i=(e.flags&128)!==0,s;if((s=i)||(s=t!==null&&t.memoizedState===null?!1:(tt.current&2)!==0),s&&(a=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,t===null){if(xe){if(a?Ta(e):Sa(),(t=Ve)?(t=V2(t,Dn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Za!==null?{id:ur,overflow:dr}:null,retryLane:536870912,hydrationErrors:null},n=XT(t),n.return=e,e.child=n,Dt=e,Ve=null)):t=null,t===null)throw ei(e);return Kg(t)?e.lanes=32:e.lanes=536870912,null}var o=r.children;return r=r.fallback,a?(Sa(),a=e.mode,o=yh({mode:"hidden",children:o},a),r=zi(r,a,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r=e.child,r.memoizedState=cp(n),r.childLanes=up(t,s,n),e.memoizedState=lp,Jl(null,r)):(Ta(e),Pg(e,o))}var u=t.memoizedState;if(u!==null&&(o=u.dehydrated,o!==null)){if(i)e.flags&256?(Ta(e),e.flags&=-257,e=dp(t,e,n)):e.memoizedState!==null?(Sa(),e.child=t.child,e.flags|=128,e=null):(Sa(),o=r.fallback,a=e.mode,r=yh({mode:"visible",children:r.children},a),o=zi(o,a,n,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,Xi(e,t.child,null,n),r=e.child,r.memoizedState=cp(n),r.childLanes=up(t,s,n),e.memoizedState=lp,e=Jl(null,r));else if(Ta(e),Kg(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var d=s.dgst;s=d,r=Error(F(419)),r.stack="",r.digest=s,jc({value:r,source:null,stack:null}),e=dp(t,e,n)}else if(ut||qo(t,e,n,!1),s=(n&t.childLanes)!==0,ut||s){if(s=Ie,s!==null&&(r=ET(s,n),r!==0&&r!==u.retryLane))throw u.retryLane=r,cs(t,r),en(s,t,r),U0;Wg(o)||xh(),e=dp(t,e,n)}else Wg(o)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,Ve=Mn(o.nextSibling),Dt=e,xe=!0,Ua=null,Dn=!1,t!==null&&ZT(e,t),e=Pg(e,r.children),e.flags|=4096);return e}return a?(Sa(),o=r.fallback,a=e.mode,u=t.child,d=u.sibling,r=zr(u,{mode:"hidden",children:r.children}),r.subtreeFlags=u.subtreeFlags&65011712,d!==null?o=zr(d,o):(o=zi(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,Jl(null,r),r=e.child,o=t.child.memoizedState,o===null?o=cp(n):(a=o.cachePool,a!==null?(u=lt._currentValue,a=a.parent!==u?{parent:u,pool:u}:a):a=tS(),o={baseLanes:o.baseLanes|n,cachePool:a}),r.memoizedState=o,r.childLanes=up(t,s,n),e.memoizedState=lp,Jl(t.child,r)):(Ta(e),n=t.child,t=n.sibling,n=zr(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n)}function Pg(t,e){return e=yh({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function yh(t,e){return t=dn(22,t,null,e),t.lanes=0,t}function dp(t,e,n){return Xi(e,t.child,null,n),t=Pg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Eg(t.return,e,n)}function hp(t,e,n,r,a,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a,s.treeForkCount=i)}function WS(t,e,n){var r=e.pendingProps,a=r.revealOrder,i=r.tail;r=r.children;var s=tt.current,o=(s&2)!==0;if(o?(s=s&1|2,e.flags|=128):s&=1,ke(tt,s),At(t,e,r,n),r=xe?Oc:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lb(t,n,e);else if(t.tag===19)Lb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&fh(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),hp(e,!1,a,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&fh(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}hp(e,!0,n,null,i,r);break;case"together":hp(e,!1,null,null,void 0,r);break;default:e.memoizedState=null}return e.child}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))if(t!==null){if(qo(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B0(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&uh(t)))}function GO(t,e,n){switch(e.tag){case 3:rh(e,e.stateNode.containerInfo),Ea(e,lt,t.memoizedState.cache),Ki();break;case 27:case 5:ug(e);break;case 4:rh(e,e.stateNode.containerInfo);break;case 10:Ea(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Rg(e),null;break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(Ta(e),e.flags|=128,null):n&e.child.childLanes?YS(t,e,n):(Ta(e),t=Qr(t,e,n),t!==null?t.sibling:null);Ta(e);break;case 19:var a=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(qo(t,e,n,!1),r=(n&e.childLanes)!==0),a){if(r)return WS(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ke(tt,tt.current),r)break;return null;case 22:return e.lanes=0,GS(t,e,n,e.pendingProps);case 24:Ea(e,lt,t.memoizedState.cache)}return Qr(t,e,n)}function KS(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ut=!0;else{if(!B0(t,n)&&!(e.flags&128))return ut=!1,GO(t,e,n);ut=!!(t.flags&131072)}else ut=!1,xe&&e.flags&1048576&&JT(e,Oc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var r=e.pendingProps;if(t=Mi(e.elementType),e.type=t,typeof t=="function")v0(t)?(r=Zi(t,r),e.tag=1,e=Mb(null,e,t,r,n)):(e.tag=0,e=Mg(null,e,t,r,n));else{if(t!=null){var a=t.$$typeof;if(a===a0){e.tag=11,e=Db(null,e,t,r,n);break e}else if(a===i0){e.tag=14,e=Ib(null,e,t,r,n);break e}}throw e=lg(t)||t,Error(F(306,e,""))}}return e;case 0:return Mg(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,a=Zi(r,e.pendingProps),Mb(t,e,r,a,n);case 3:e:{if(rh(e,e.stateNode.containerInfo),t===null)throw Error(F(387));r=e.pendingProps;var i=e.memoizedState;a=i.element,Ng(t,e),pc(e,r,null,n);var s=e.memoizedState;if(r=s.cache,Ea(e,lt,r),r!==i.cache&&Tg(e,[lt],n,!0),mc(),r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=Pb(t,e,r,n);break e}else if(r!==a){a=Rn(Error(F(424)),e),jc(a),e=Pb(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ve=Mn(t.firstChild),Dt=e,xe=!0,Ua=null,Dn=!0,n=aS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ki(),r===a){e=Qr(t,e,n);break e}At(t,e,r,n)}e=e.child}return e;case 26:return Pd(t,e),t===null?(n=rx(e.type,null,e.pendingProps,null))?e.memoizedState=n:xe||(n=e.type,t=e.pendingProps,r=Sh(Va.current).createElement(n),r[Rt]=e,r[nn]=t,kt(r,n,t),xt(r),e.stateNode=r):e.memoizedState=rx(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ug(e),t===null&&xe&&(r=e.stateNode=U2(e.type,e.pendingProps,Va.current),Dt=e,Dn=!0,a=Ve,di(e.type)?(Qg=a,Ve=Mn(r.firstChild)):Ve=a),At(t,e,e.pendingProps.children,n),Pd(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&xe&&((a=r=Ve)&&(r=wj(r,e.type,e.pendingProps,Dn),r!==null?(e.stateNode=r,Dt=e,Ve=Mn(r.firstChild),Dn=!1,a=!0):a=!1),a||ei(e)),ug(e),a=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,r=i.children,Gg(a,i)?r=null:s!==null&&Gg(a,s)&&(e.flags|=32),e.memoizedState!==null&&(a=A0(t,e,LO,null,null,n),Uc._currentValue=a),Pd(t,e),At(t,e,r,n),e.child;case 6:return t===null&&xe&&((t=n=Ve)&&(n=Ej(n,e.pendingProps,Dn),n!==null?(e.stateNode=n,Dt=e,Ve=null,t=!0):t=!1),t||ei(e)),null;case 13:return YS(t,e,n);case 4:return rh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xi(e,null,r,n):At(t,e,r,n),e.child;case 11:return Db(t,e,e.type,e.pendingProps,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,Ea(e,e.type,r.value),At(t,e,r.children,n),e.child;case 9:return a=e.type._context,r=e.pendingProps.children,Qi(e),a=jt(a),r=r(a),e.flags|=1,At(t,e,r,n),e.child;case 14:return Ib(t,e,e.type,e.pendingProps,n);case 15:return HS(t,e,e.type,e.pendingProps,n);case 19:return WS(t,e,n);case 31:return HO(t,e,n);case 22:return GS(t,e,n,e.pendingProps);case 24:return Qi(e),r=jt(lt),t===null?(a=w0(),a===null&&(a=Ie,i=x0(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),e.memoizedState={parent:r,cache:a},T0(e),Ea(e,lt,a)):(t.lanes&n&&(Ng(t,e),pc(e,null,null,n),mc()),a=t.memoizedState,i=e.memoizedState,a.parent!==r?(a={parent:r,cache:r},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),Ea(e,lt,r)):(r=i.cache,Ea(e,lt,r),r!==a.cache&&Tg(e,[lt],n,!0))),At(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(F(156,e.tag))}function Rr(t){t.flags|=4}function fp(t,e,n,r,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if(_2())t.flags|=8192;else throw $i=dh,E0}else t.flags&=-16777217}function Vb(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!F2(e))if(_2())t.flags|=8192;else throw $i=dh,E0}function ad(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?bT():536870912,t.lanes|=e,So|=e)}function zl(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&65011712,r|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function YO(t,e,n){var r=e.pendingProps;switch(b0(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return Le(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Fr(lt),_o(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Is(e)?Rr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ap())),Le(e),null;case 26:var a=e.type,i=e.memoizedState;return t===null?(Rr(e),i!==null?(Le(e),Vb(e,i)):(Le(e),fp(e,a,null,r,n))):i?i!==t.memoizedState?(Rr(e),Le(e),Vb(e,i)):(Le(e),e.flags&=-16777217):(t=t.memoizedProps,t!==r&&Rr(e),Le(e),fp(e,a,t,r,n)),null;case 27:if(ah(e),n=Va.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Rr(e);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Le(e),null}t=mr.current,Is(e)?fb(e):(t=U2(a,r,n),e.stateNode=t,Rr(e))}return Le(e),null;case 5:if(ah(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Rr(e);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Le(e),null}if(i=mr.current,Is(e))fb(e);else{var s=Sh(Va.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof r.is=="string"?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i=typeof r.is=="string"?s.createElement(a,{is:r.is}):s.createElement(a)}}i[Rt]=e,i[nn]=r;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=i;e:switch(kt(i,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Rr(e)}}return Le(e),fp(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&Rr(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(t=Va.current,Is(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,a=Dt,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}t[Rt]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||M2(t.nodeValue,n)),t||ei(e,!0)}else t=Sh(t).createTextNode(r),t[Rt]=e,e.stateNode=t}return Le(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(r=Is(e),n!==null){if(t===null){if(!r)throw Error(F(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(557));t[Rt]=e}else Ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),t=!1}else n=ap(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(un(e),e):(un(e),null);if(e.flags&128)throw Error(F(558))}return Le(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Is(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(F(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(F(317));a[Rt]=e}else Ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),a=!1}else a=ap(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(un(e),e):(un(e),null)}return un(e),e.flags&128?(e.lanes=n,e):(n=r!==null,t=t!==null&&t.memoizedState!==null,n&&(r=e.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),ad(e,e.updateQueue),Le(e),null);case 4:return _o(),t===null&&Y0(e.stateNode.containerInfo),Le(e),null;case 10:return Fr(e.type),Le(e),null;case 19:if(wt(tt),r=e.memoizedState,r===null)return Le(e),null;if(a=(e.flags&128)!==0,i=r.rendering,i===null)if(a)zl(r,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=fh(t),i!==null){for(e.flags|=128,zl(r,!1),t=i.updateQueue,e.updateQueue=t,ad(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)QT(n,t),n=n.sibling;return ke(tt,tt.current&1|2),xe&&jr(e,r.treeForkCount),e.child}t=t.sibling}r.tail!==null&&pn()>_h&&(e.flags|=128,a=!0,zl(r,!1),e.lanes=4194304)}else{if(!a)if(t=fh(i),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,ad(e,t),zl(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!xe)return Le(e),null}else 2*pn()-r.renderingStartTime>_h&&n!==536870912&&(e.flags|=128,a=!0,zl(r,!1),e.lanes=4194304);r.isBackwards?(i.sibling=e.child,e.child=i):(t=r.last,t!==null?t.sibling=i:e.child=i,r.last=i)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=pn(),t.sibling=null,n=tt.current,ke(tt,a?n&1|2:n&1),xe&&jr(e,r.treeForkCount),t):(Le(e),null);case 22:case 23:return un(e),S0(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),n=e.updateQueue,n!==null&&ad(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&wt(Fi),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Fr(lt),Le(e),null;case 25:return null;case 30:return null}throw Error(F(156,e.tag))}function WO(t,e){switch(b0(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(lt),_o(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ah(e),null;case 31:if(e.memoizedState!==null){if(un(e),e.alternate===null)throw Error(F(340));Ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(un(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wt(tt),null;case 4:return _o(),null;case 10:return Fr(e.type),null;case 22:case 23:return un(e),S0(),t!==null&&wt(Fi),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Fr(lt),null;case 25:return null;default:return null}}function QS(t,e){switch(b0(e),e.tag){case 3:Fr(lt),_o();break;case 26:case 27:case 5:ah(e);break;case 4:_o();break;case 31:e.memoizedState!==null&&un(e);break;case 13:un(e);break;case 19:wt(tt);break;case 10:Fr(e.type);break;case 22:case 23:un(e),S0(),t!==null&&wt(Fi);break;case 24:Fr(lt)}}function lu(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var a=r.next;n=a;do{if((n.tag&t)===t){r=void 0;var i=n.create,s=n.inst;r=i(),s.destroy=r}n=n.next}while(n!==a)}}catch(o){Ae(e,e.return,o)}}function ti(t,e,n){try{var r=e.updateQueue,a=r!==null?r.lastEffect:null;if(a!==null){var i=a.next;r=i;do{if((r.tag&t)===t){var s=r.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,a=e;var u=n,d=o;try{d()}catch(h){Ae(a,u,h)}}}r=r.next}while(r!==i)}}catch(h){Ae(e,e.return,h)}}function XS(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{sS(e,n)}catch(r){Ae(t,t.return,r)}}}function JS(t,e,n){n.props=Zi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){Ae(t,e,r)}}function yc(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(a){Ae(t,e,a)}}function hr(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(a){Ae(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Ae(t,e,a)}else n.current=null}function ZS(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Ae(t,t.return,a)}}function mp(t,e,n){try{var r=t.stateNode;gj(r,t.type,n,e),r[nn]=e}catch(a){Ae(t,t.return,a)}}function e2(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&di(t.type)||t.tag===4}function pp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||e2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&di(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pr));else if(r!==4&&(r===27&&di(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Lg(t,e,n),t=t.sibling;t!==null;)Lg(t,e,n),t=t.sibling}function vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&di(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(vh(t,e,n),t=t.sibling;t!==null;)vh(t,e,n),t=t.sibling}function t2(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);kt(e,r,n),e[Rt]=t,e[nn]=n}catch(i){Ae(t,t.return,i)}}var kr=!1,ot=!1,gp=!1,Ub=typeof WeakSet=="function"?WeakSet:Set,bt=null;function KO(t,e){if(t=t.containerInfo,qg=Rh,t=FT(t),p0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,o=-1,u=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||a!==0&&f.nodeType!==3||(o=s+a),f!==i||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++d===a&&(o=s),p===i&&++h===r&&(u=s),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hg={focusedElem:t,selectionRange:n},Rh=!1,bt=e;bt!==null;)if(e=bt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,bt=t;else for(;bt!==null;){switch(e=bt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)a=t[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var w=Zi(n.type,a);t=r.getSnapshotBeforeUpdate(w,i),r.__reactInternalSnapshotBeforeUpdate=t}catch(N){Ae(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Yg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(F(163))}if(t=e.sibling,t!==null){t.return=e.return,bt=t;break}bt=e.return}}function n2(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ir(t,n),r&4&&lu(5,n);break;case 1:if(Ir(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(s){Ae(n,n.return,s)}else{var a=Zi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(s){Ae(n,n.return,s)}}r&64&&XS(n),r&512&&yc(n,n.return);break;case 3:if(Ir(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{sS(t,e)}catch(s){Ae(n,n.return,s)}}break;case 27:e===null&&r&4&&t2(n);case 26:case 5:Ir(t,n),e===null&&r&4&&ZS(n),r&512&&yc(n,n.return);break;case 12:Ir(t,n);break;case 31:Ir(t,n),r&4&&i2(t,n);break;case 13:Ir(t,n),r&4&&s2(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=aj.bind(null,n),Tj(t,n))));break;case 22:if(r=n.memoizedState!==null||kr,!r){e=e!==null&&e.memoizedState!==null||ot,a=kr;var i=ot;kr=r,(ot=e)&&!i?Or(t,n,(n.subtreeFlags&8772)!==0):Ir(t,n),kr=a,ot=i}break;case 30:break;default:Ir(t,n)}}function r2(t){var e=t.alternate;e!==null&&(t.alternate=null,r2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&c0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $e=null,Kt=!1;function Dr(t,e,n){for(n=n.child;n!==null;)a2(t,e,n),n=n.sibling}function a2(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(tu,n)}catch{}switch(n.tag){case 26:ot||hr(n,e),Dr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ot||hr(n,e);var r=$e,a=Kt;di(n.type)&&($e=n.stateNode,Kt=!1),Dr(t,e,n),xc(n.stateNode),$e=r,Kt=a;break;case 5:ot||hr(n,e);case 6:if(r=$e,a=Kt,$e=null,Dr(t,e,n),$e=r,Kt=a,$e!==null)if(Kt)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(n.stateNode)}catch(i){Ae(n,e,i)}else try{$e.removeChild(n.stateNode)}catch(i){Ae(n,e,i)}break;case 18:$e!==null&&(Kt?(t=$e,Jb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ro(t)):Jb($e,n.stateNode));break;case 4:r=$e,a=Kt,$e=n.stateNode.containerInfo,Kt=!0,Dr(t,e,n),$e=r,Kt=a;break;case 0:case 11:case 14:case 15:ti(2,n,e),ot||ti(4,n,e),Dr(t,e,n);break;case 1:ot||(hr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&JS(n,e,r)),Dr(t,e,n);break;case 21:Dr(t,e,n);break;case 22:ot=(r=ot)||n.memoizedState!==null,Dr(t,e,n),ot=r;break;default:Dr(t,e,n)}}function i2(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ro(t)}catch(n){Ae(e,e.return,n)}}}function s2(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ro(t)}catch(n){Ae(e,e.return,n)}}function QO(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Ub),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Ub),e;default:throw Error(F(435,t.tag))}}function id(t,e){var n=QO(t);e.forEach(function(r){if(!n.has(r)){n.add(r);var a=ij.bind(null,t,r);r.then(a,a)}})}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],i=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(di(o.type)){$e=o.stateNode,Kt=!1;break e}break;case 5:$e=o.stateNode,Kt=!1;break e;case 3:case 4:$e=o.stateNode.containerInfo,Kt=!0;break e}o=o.return}if($e===null)throw Error(F(160));a2(i,s,a),$e=null,Kt=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)o2(e,t),e=e.sibling}var qn=null;function o2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Yt(e,t),Wt(t),r&4&&(ti(3,t,t.return),lu(3,t),ti(5,t,t.return));break;case 1:Yt(e,t),Wt(t),r&512&&(ot||n===null||hr(n,n.return)),r&64&&kr&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=qn;if(Yt(e,t),Wt(t),r&512&&(ot||n===null||hr(n,n.return)),r&4){var i=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":i=a.getElementsByTagName("title")[0],(!i||i[au]||i[Rt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),kt(i,r,n),i[Rt]=t,xt(i),r=i;break e;case"link":var s=ix("link","href",a).get(r+(n.href||""));if(s){for(var o=0;o<s.length;o++)if(i=s[o],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(o,1);break t}}i=a.createElement(r),kt(i,r,n),a.head.appendChild(i);break;case"meta":if(s=ix("meta","content",a).get(r+(n.content||""))){for(o=0;o<s.length;o++)if(i=s[o],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(o,1);break t}}i=a.createElement(r),kt(i,r,n),a.head.appendChild(i);break;default:throw Error(F(468,r))}i[Rt]=t,xt(i),r=i}t.stateNode=r}else sx(a,t.type,t.stateNode);else t.stateNode=ax(a,r,t.memoizedProps);else i!==r?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,r===null?sx(a,t.type,t.stateNode):ax(a,r,t.memoizedProps)):r===null&&t.stateNode!==null&&mp(t,t.memoizedProps,n.memoizedProps)}break;case 27:Yt(e,t),Wt(t),r&512&&(ot||n===null||hr(n,n.return)),n!==null&&r&4&&mp(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Yt(e,t),Wt(t),r&512&&(ot||n===null||hr(n,n.return)),t.flags&32){a=t.stateNode;try{xo(a,"")}catch(w){Ae(t,t.return,w)}}r&4&&t.stateNode!=null&&(a=t.memoizedProps,mp(t,a,n!==null?n.memoizedProps:a)),r&1024&&(gp=!0);break;case 6:if(Yt(e,t),Wt(t),r&4){if(t.stateNode===null)throw Error(F(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(w){Ae(t,t.return,w)}}break;case 3:if(Ud=null,a=qn,qn=Nh(e.containerInfo),Yt(e,t),qn=a,Wt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ro(e.containerInfo)}catch(w){Ae(t,t.return,w)}gp&&(gp=!1,l2(t));break;case 4:r=qn,qn=Nh(t.stateNode.containerInfo),Yt(e,t),Wt(t),qn=r;break;case 12:Yt(e,t),Wt(t);break;case 31:Yt(e,t),Wt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,id(t,r)));break;case 13:Yt(e,t),Wt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(xf=pn()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,id(t,r)));break;case 22:a=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,d=kr,h=ot;if(kr=d||a,ot=h||u,Yt(e,t),ot=h,kr=d,Wt(t),r&8192)e:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(n===null||u||kr||ot||Pi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(i=u.stateNode,a)s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=u.stateNode;var f=u.memoizedProps.style,p=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(w){Ae(u,u.return,w)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=a?"":u.memoizedProps}catch(w){Ae(u,u.return,w)}}}else if(e.tag===18){if(n===null){u=e;try{var y=u.stateNode;a?Zb(y,!0):Zb(u.stateNode,!1)}catch(w){Ae(u,u.return,w)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,id(t,n))));break;case 19:Yt(e,t),Wt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,id(t,r)));break;case 30:break;case 21:break;default:Yt(e,t),Wt(t)}}function Wt(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(e2(r)){n=r;break}r=r.return}if(n==null)throw Error(F(160));switch(n.tag){case 27:var a=n.stateNode,i=pp(t);vh(t,i,a);break;case 5:var s=n.stateNode;n.flags&32&&(xo(s,""),n.flags&=-33);var o=pp(t);vh(t,o,s);break;case 3:case 4:var u=n.stateNode.containerInfo,d=pp(t);Lg(t,d,u);break;default:throw Error(F(161))}}catch(h){Ae(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l2(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;l2(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ir(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)n2(t,e.alternate,e),e=e.sibling}function Pi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ti(4,e,e.return),Pi(e);break;case 1:hr(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&JS(e,e.return,n),Pi(e);break;case 27:xc(e.stateNode);case 26:case 5:hr(e,e.return),Pi(e);break;case 22:e.memoizedState===null&&Pi(e);break;case 30:Pi(e);break;default:Pi(e)}t=t.sibling}}function Or(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,a=t,i=e,s=i.flags;switch(i.tag){case 0:case 11:case 15:Or(a,i,n),lu(4,i);break;case 1:if(Or(a,i,n),r=i,a=r.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(d){Ae(r,r.return,d)}if(r=i,a=r.updateQueue,a!==null){var o=r.stateNode;try{var u=a.shared.hiddenCallbacks;if(u!==null)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)iS(u[a],o)}catch(d){Ae(r,r.return,d)}}n&&s&64&&XS(i),yc(i,i.return);break;case 27:t2(i);case 26:case 5:Or(a,i,n),n&&r===null&&s&4&&ZS(i),yc(i,i.return);break;case 12:Or(a,i,n);break;case 31:Or(a,i,n),n&&s&4&&i2(a,i);break;case 13:Or(a,i,n),n&&s&4&&s2(a,i);break;case 22:i.memoizedState===null&&Or(a,i,n),yc(i,i.return);break;case 30:break;default:Or(a,i,n)}e=e.sibling}}function z0(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&su(n))}function F0(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&su(t))}function $n(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)c2(t,e,n,r),e=e.sibling}function c2(t,e,n,r){var a=e.flags;switch(e.tag){case 0:case 11:case 15:$n(t,e,n,r),a&2048&&lu(9,e);break;case 1:$n(t,e,n,r);break;case 3:$n(t,e,n,r),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&su(t)));break;case 12:if(a&2048){$n(t,e,n,r),t=e.stateNode;try{var i=e.memoizedProps,s=i.id,o=i.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Ae(e,e.return,u)}}else $n(t,e,n,r);break;case 31:$n(t,e,n,r);break;case 13:$n(t,e,n,r);break;case 23:break;case 22:i=e.stateNode,s=e.alternate,e.memoizedState!==null?i._visibility&2?$n(t,e,n,r):vc(t,e):i._visibility&2?$n(t,e,n,r):(i._visibility|=2,Ls(t,e,n,r,(e.subtreeFlags&10256)!==0||!1)),a&2048&&z0(s,e);break;case 24:$n(t,e,n,r),a&2048&&F0(e.alternate,e);break;default:$n(t,e,n,r)}}function Ls(t,e,n,r,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,s=e,o=n,u=r,d=s.flags;switch(s.tag){case 0:case 11:case 15:Ls(i,s,o,u,a),lu(8,s);break;case 23:break;case 22:var h=s.stateNode;s.memoizedState!==null?h._visibility&2?Ls(i,s,o,u,a):vc(i,s):(h._visibility|=2,Ls(i,s,o,u,a)),a&&d&2048&&z0(s.alternate,s);break;case 24:Ls(i,s,o,u,a),a&&d&2048&&F0(s.alternate,s);break;default:Ls(i,s,o,u,a)}e=e.sibling}}function vc(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,a=r.flags;switch(r.tag){case 22:vc(n,r),a&2048&&z0(r.alternate,r);break;case 24:vc(n,r),a&2048&&F0(r.alternate,r);break;default:vc(n,r)}e=e.sibling}}var Zl=8192;function Os(t,e,n){if(t.subtreeFlags&Zl)for(t=t.child;t!==null;)u2(t,e,n),t=t.sibling}function u2(t,e,n){switch(t.tag){case 26:Os(t,e,n),t.flags&Zl&&t.memoizedState!==null&&Pj(n,qn,t.memoizedState,t.memoizedProps);break;case 5:Os(t,e,n);break;case 3:case 4:var r=qn;qn=Nh(t.stateNode.containerInfo),Os(t,e,n),qn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Zl,Zl=16777216,Os(t,e,n),Zl=r):Os(t,e,n));break;default:Os(t,e,n)}}function d2(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Fl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];bt=r,f2(r,t)}d2(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)h2(t),t=t.sibling}function h2(t){switch(t.tag){case 0:case 11:case 15:Fl(t),t.flags&2048&&ti(9,t,t.return);break;case 3:Fl(t);break;case 12:Fl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ld(t)):Fl(t);break;default:Fl(t)}}function Ld(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];bt=r,f2(r,t)}d2(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ti(8,e,e.return),Ld(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ld(e));break;default:Ld(e)}t=t.sibling}}function f2(t,e){for(;bt!==null;){var n=bt;switch(n.tag){case 0:case 11:case 15:ti(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:su(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,bt=r;else e:for(n=t;bt!==null;){r=bt;var a=r.sibling,i=r.return;if(r2(r),r===n){bt=null;break e}if(a!==null){a.return=i,bt=a;break e}bt=i}}}var XO={getCacheForType:function(t){var e=jt(lt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return jt(lt).controller.signal}},JO=typeof WeakMap=="function"?WeakMap:Map,Ee=0,Ie=null,ge=null,be=0,Ne=0,cn=null,ja=!1,Go=!1,$0=!1,Xr=0,Ze=0,ni=0,qi=0,q0=0,fn=0,So=0,_c=null,Qt=null,Vg=!1,xf=0,m2=0,_h=1/0,bh=null,Fa=null,mt=0,$a=null,No=null,$r=0,Ug=0,Bg=null,p2=null,bc=0,zg=null;function vn(){return Ee&2&&be!==0?be&-be:re.T!==null?G0():TT()}function g2(){if(fn===0)if(!(be&536870912)||xe){var t=Xu;Xu<<=1,!(Xu&3932160)&&(Xu=262144),fn=t}else fn=536870912;return t=xn.current,t!==null&&(t.flags|=32),fn}function en(t,e,n){(t===Ie&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)&&(Ao(t,0),ka(t,be,fn,!1)),ru(t,n),(!(Ee&2)||t!==Ie)&&(t===Ie&&(!(Ee&2)&&(qi|=n),Ze===4&&ka(t,be,fn,!1)),Sr(t))}function y2(t,e,n){if(Ee&6)throw Error(F(327));var r=!n&&(e&127)===0&&(e&t.expiredLanes)===0||nu(t,e),a=r?tj(t,e):yp(t,e,!0),i=r;do{if(a===0){Go&&!r&&ka(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!ZO(n)){a=yp(t,e,!1),i=!1;continue}if(a===2){if(i=e,t.errorRecoveryDisabledLanes&i)var s=0;else s=t.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=t;a=_c;var u=o.current.memoizedState.isDehydrated;if(u&&(Ao(o,s).flags|=256),s=yp(o,s,!1),s!==2){if($0&&!u){o.errorRecoveryDisabledLanes|=i,qi|=i,a=4;break e}i=Qt,Qt=a,i!==null&&(Qt===null?Qt=i:Qt.push.apply(Qt,i))}a=s}if(i=!1,a!==2)continue}}if(a===1){Ao(t,0),ka(t,e,0,!0);break}e:{switch(r=t,i=a,i){case 0:case 1:throw Error(F(345));case 4:if((e&4194048)!==e)break;case 6:ka(r,e,fn,!ja);break e;case 2:Qt=null;break;case 3:case 5:break;default:throw Error(F(329))}if((e&62914560)===e&&(a=xf+300-pn(),10<a)){if(ka(r,e,fn,!ja),uf(r,0,!0)!==0)break e;$r=e,r.timeoutHandle=L2(Bb.bind(null,r,n,Qt,bh,Vg,e,fn,qi,So,ja,i,"Throttled",-0,0),a);break e}Bb(r,n,Qt,bh,Vg,e,fn,qi,So,ja,i,null,-0,0)}}break}while(!0);Sr(t)}function Bb(t,e,n,r,a,i,s,o,u,d,h,f,p,y){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pr},u2(e,i,f);var w=(i&62914560)===i?xf-pn():(i&4194048)===i?m2-pn():0;if(w=Lj(f,w),w!==null){$r=i,t.cancelPendingCommit=w(Fb.bind(null,t,e,i,n,r,a,s,o,u,h,f,null,p,y)),ka(t,i,s,!d);return}}Fb(t,e,i,n,r,a,s,o,u)}function ZO(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!bn(i(),a))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ka(t,e,n,r){e&=~q0,e&=~qi,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var a=e;0<a;){var i=31-yn(a),s=1<<i;r[i]=-1,a&=~s}n!==0&&xT(t,n,e)}function wf(){return Ee&6?!0:(cu(0),!1)}function H0(){if(ge!==null){if(Ne===0)var t=ge.return;else t=ge,Lr=us=null,D0(t),uo=null,kc=0,t=ge;for(;t!==null;)QS(t.alternate,t),t=t.return;ge=null}}function Ao(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,_j(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),$r=0,H0(),Ie=t,ge=n=zr(t.current,null),be=e,Ne=0,cn=null,ja=!1,Go=nu(t,e),$0=!1,So=fn=q0=qi=ni=Ze=0,Qt=_c=null,Vg=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var a=31-yn(r),i=1<<a;e|=t[a],r&=~i}return Xr=e,mf(),n}function v2(t,e){le=null,re.H=Pc,e===Ho||e===gf?(e=vb(),Ne=3):e===E0?(e=vb(),Ne=4):Ne=e===U0?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,cn=e,ge===null&&(Ze=1,gh(t,Rn(e,t.current)))}function _2(){var t=xn.current;return t===null?!0:(be&4194048)===be?kn===null:(be&62914560)===be||be&536870912?t===kn:!1}function b2(){var t=re.H;return re.H=Pc,t===null?Pc:t}function x2(){var t=re.A;return re.A=XO,t}function xh(){Ze=4,ja||(be&4194048)!==be&&xn.current!==null||(Go=!0),!(ni&134217727)&&!(qi&134217727)||Ie===null||ka(Ie,be,fn,!1)}function yp(t,e,n){var r=Ee;Ee|=2;var a=b2(),i=x2();(Ie!==t||be!==e)&&(bh=null,Ao(t,e)),e=!1;var s=Ze;e:do try{if(Ne!==0&&ge!==null){var o=ge,u=cn;switch(Ne){case 8:H0(),s=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(e=!0);var d=Ne;if(Ne=0,cn=null,to(t,o,u,d),n&&Go){s=0;break e}break;default:d=Ne,Ne=0,cn=null,to(t,o,u,d)}}ej(),s=Ze;break}catch(h){v2(t,h)}while(!0);return e&&t.shellSuspendCounter++,Lr=us=null,Ee=r,re.H=a,re.A=i,ge===null&&(Ie=null,be=0,mf()),s}function ej(){for(;ge!==null;)w2(ge)}function tj(t,e){var n=Ee;Ee|=2;var r=b2(),a=x2();Ie!==t||be!==e?(bh=null,_h=pn()+500,Ao(t,e)):Go=nu(t,e);e:do try{if(Ne!==0&&ge!==null){e=ge;var i=cn;t:switch(Ne){case 1:Ne=0,cn=null,to(t,e,i,1);break;case 2:case 9:if(yb(i)){Ne=0,cn=null,zb(e);break}e=function(){Ne!==2&&Ne!==9||Ie!==t||(Ne=7),Sr(t)},i.then(e,e);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:yb(i)?(Ne=0,cn=null,zb(e)):(Ne=0,cn=null,to(t,e,i,7));break;case 5:var s=null;switch(ge.tag){case 26:s=ge.memoizedState;case 5:case 27:var o=ge;if(s?F2(s):o.stateNode.complete){Ne=0,cn=null;var u=o.sibling;if(u!==null)ge=u;else{var d=o.return;d!==null?(ge=d,Ef(d)):ge=null}break t}}Ne=0,cn=null,to(t,e,i,5);break;case 6:Ne=0,cn=null,to(t,e,i,6);break;case 8:H0(),Ze=6;break e;default:throw Error(F(462))}}nj();break}catch(h){v2(t,h)}while(!0);return Lr=us=null,re.H=r,re.A=a,Ee=n,ge!==null?0:(Ie=null,be=0,mf(),Ze)}function nj(){for(;ge!==null&&!SI();)w2(ge)}function w2(t){var e=KS(t.alternate,t,Xr);t.memoizedProps=t.pendingProps,e===null?Ef(t):ge=e}function zb(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=kb(n,e,e.pendingProps,e.type,void 0,be);break;case 11:e=kb(n,e,e.pendingProps,e.type.render,e.ref,be);break;case 5:D0(e);default:QS(n,e),e=ge=QT(e,Xr),e=KS(n,e,Xr)}t.memoizedProps=t.pendingProps,e===null?Ef(t):ge=e}function to(t,e,n,r){Lr=us=null,D0(e),uo=null,kc=0;var a=e.return;try{if(qO(t,a,e,n,be)){Ze=1,gh(t,Rn(n,t.current)),ge=null;return}}catch(i){if(a!==null)throw ge=a,i;Ze=1,gh(t,Rn(n,t.current)),ge=null;return}e.flags&32768?(xe||r===1?t=!0:Go||be&536870912?t=!1:(ja=t=!0,(r===2||r===9||r===3||r===6)&&(r=xn.current,r!==null&&r.tag===13&&(r.flags|=16384))),E2(e,t)):Ef(e)}function Ef(t){var e=t;do{if(e.flags&32768){E2(e,ja);return}t=e.return;var n=YO(e.alternate,e,Xr);if(n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);Ze===0&&(Ze=5)}function E2(t,e){do{var n=WO(t.alternate,t);if(n!==null){n.flags&=32767,ge=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ge=t;return}ge=t=n}while(t!==null);Ze=6,ge=null}function Fb(t,e,n,r,a,i,s,o,u){t.cancelPendingCommit=null;do Tf();while(mt!==0);if(Ee&6)throw Error(F(327));if(e!==null){if(e===t.current)throw Error(F(177));if(i=e.lanes|e.childLanes,i|=g0,MI(t,n,i,s,o,u),t===Ie&&(ge=Ie=null,be=0),No=e,$a=t,$r=n,Ug=i,Bg=a,p2=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,sj(ih,function(){return C2(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=re.T,re.T=null,a=Te.p,Te.p=2,s=Ee,Ee|=4;try{KO(t,e,n)}finally{Ee=s,Te.p=a,re.T=r}}mt=1,T2(),S2(),N2()}}function T2(){if(mt===1){mt=0;var t=$a,e=No,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=re.T,re.T=null;var r=Te.p;Te.p=2;var a=Ee;Ee|=4;try{o2(e,t);var i=Hg,s=FT(t.containerInfo),o=i.focusedElem,u=i.selectionRange;if(s!==o&&o&&o.ownerDocument&&zT(o.ownerDocument.documentElement,o)){if(u!==null&&p0(o)){var d=u.start,h=u.end;if(h===void 0&&(h=d),"selectionStart"in o)o.selectionStart=d,o.selectionEnd=Math.min(h,o.value.length);else{var f=o.ownerDocument||document,p=f&&f.defaultView||window;if(p.getSelection){var y=p.getSelection(),w=o.textContent.length,N=Math.min(u.start,w),A=u.end===void 0?N:Math.min(u.end,w);!y.extend&&N>A&&(s=A,A=N,N=s);var _=ub(o,N),x=ub(o,A);if(_&&x&&(y.rangeCount!==1||y.anchorNode!==_.node||y.anchorOffset!==_.offset||y.focusNode!==x.node||y.focusOffset!==x.offset)){var E=f.createRange();E.setStart(_.node,_.offset),y.removeAllRanges(),N>A?(y.addRange(E),y.extend(x.node,x.offset)):(E.setEnd(x.node,x.offset),y.addRange(E))}}}}for(f=[],y=o;y=y.parentNode;)y.nodeType===1&&f.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var I=f[o];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Rh=!!qg,Hg=qg=null}finally{Ee=a,Te.p=r,re.T=n}}t.current=e,mt=2}}function S2(){if(mt===2){mt=0;var t=$a,e=No,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=re.T,re.T=null;var r=Te.p;Te.p=2;var a=Ee;Ee|=4;try{n2(t,e.alternate,e)}finally{Ee=a,Te.p=r,re.T=n}}mt=3}}function N2(){if(mt===4||mt===3){mt=0,NI();var t=$a,e=No,n=$r,r=p2;e.subtreeFlags&10256||e.flags&10256?mt=5:(mt=0,No=$a=null,A2(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(Fa=null),l0(n),e=e.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(tu,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=re.T,a=Te.p,Te.p=2,re.T=null;try{for(var i=t.onRecoverableError,s=0;s<r.length;s++){var o=r[s];i(o.value,{componentStack:o.stack})}}finally{re.T=e,Te.p=a}}$r&3&&Tf(),Sr(t),a=t.pendingLanes,n&261930&&a&42?t===zg?bc++:(bc=0,zg=t):bc=0,cu(0)}}function A2(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,su(e)))}function Tf(){return T2(),S2(),N2(),C2()}function C2(){if(mt!==5)return!1;var t=$a,e=Ug;Ug=0;var n=l0($r),r=re.T,a=Te.p;try{Te.p=32>n?32:n,re.T=null,n=Bg,Bg=null;var i=$a,s=$r;if(mt=0,No=$a=null,$r=0,Ee&6)throw Error(F(331));var o=Ee;if(Ee|=4,h2(i.current),c2(i,i.current,s,n),Ee=o,cu(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(tu,i)}catch{}return!0}finally{Te.p=a,re.T=r,A2(t,e)}}function $b(t,e,n){e=Rn(n,e),e=kg(t.stateNode,e,2),t=za(t,e,2),t!==null&&(ru(t,2),Sr(t))}function Ae(t,e,n){if(t.tag===3)$b(t,t,n);else for(;e!==null;){if(e.tag===3){$b(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fa===null||!Fa.has(r))){t=Rn(n,t),n=$S(2),r=za(e,n,2),r!==null&&(qS(n,r,e,t),ru(r,2),Sr(r));break}}e=e.return}}function vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new JO;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||($0=!0,a.add(n),t=rj.bind(null,t,e,n),e.then(t,t))}function rj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ie===t&&(be&n)===n&&(Ze===4||Ze===3&&(be&62914560)===be&&300>pn()-xf?!(Ee&2)&&Ao(t,0):q0|=n,So===be&&(So=0)),Sr(t)}function R2(t,e){e===0&&(e=bT()),t=cs(t,e),t!==null&&(ru(t,e),Sr(t))}function aj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),R2(t,n)}function ij(t,e){var n=0;switch(t.tag){case 31:case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(F(314))}r!==null&&r.delete(e),R2(t,n)}function sj(t,e){return s0(t,e)}var wh=null,Vs=null,Fg=!1,Eh=!1,_p=!1,Ma=0;function Sr(t){t!==Vs&&t.next===null&&(Vs===null?wh=Vs=t:Vs=Vs.next=t),Eh=!0,Fg||(Fg=!0,lj())}function cu(t,e){if(!_p&&Eh){_p=!0;do for(var n=!1,r=wh;r!==null;){if(t!==0){var a=r.pendingLanes;if(a===0)var i=0;else{var s=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-yn(42|t)+1)-1,i&=a&~(s&~o),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,qb(r,i))}else i=be,i=uf(r,r===Ie?i:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(i&3)||nu(r,i)||(n=!0,qb(r,i));r=r.next}while(n);_p=!1}}function oj(){D2()}function D2(){Eh=Fg=!1;var t=0;Ma!==0&&vj()&&(t=Ma);for(var e=pn(),n=null,r=wh;r!==null;){var a=r.next,i=I2(r,e);i===0?(r.next=null,n===null?wh=a:n.next=a,a===null&&(Vs=n)):(n=r,(t!==0||i&3)&&(Eh=!0)),r=a}mt!==0&&mt!==5||cu(t),Ma!==0&&(Ma=0)}function I2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var s=31-yn(i),o=1<<s,u=a[s];u===-1?(!(o&n)||o&r)&&(a[s]=kI(o,e)):u<=e&&(t.expiredLanes|=o),i&=~o}if(e=Ie,n=be,n=uf(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Ym(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||nu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&Ym(r),l0(n)){case 2:case 8:n=vT;break;case 32:n=ih;break;case 268435456:n=_T;break;default:n=ih}return r=O2.bind(null,t),n=s0(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&Ym(r),t.callbackPriority=2,t.callbackNode=null,2}function O2(t,e){if(mt!==0&&mt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Tf()&&t.callbackNode!==n)return null;var r=be;return r=uf(t,t===Ie?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(y2(t,r,e),I2(t,pn()),t.callbackNode!=null&&t.callbackNode===n?O2.bind(null,t):null)}function qb(t,e){if(Tf())return null;y2(t,e,!0)}function lj(){bj(function(){Ee&6?s0(yT,oj):D2()})}function G0(){if(Ma===0){var t=wo;t===0&&(t=Qu,Qu<<=1,!(Qu&261888)&&(Qu=256)),Ma=t}return Ma}function Hb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Cd(""+t)}function Gb(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function cj(t,e,n,r,a){if(e==="submit"&&n&&n.stateNode===a){var i=Hb((a[nn]||null).action),s=r.submitter;s&&(e=(e=s[nn]||null)?Hb(e.formAction):s.getAttribute("formAction"),e!==null&&(i=e,s=null));var o=new df("action","action",null,r,a);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ma!==0){var u=s?Gb(a,s):new FormData(a);Og(n,{pending:!0,data:u,method:a.method,action:i},null,u)}}else typeof i=="function"&&(o.preventDefault(),u=s?Gb(a,s):new FormData(a),Og(n,{pending:!0,data:u,method:a.method,action:i},i,u))},currentTarget:a}]})}}for(var bp=0;bp<bg.length;bp++){var xp=bg[bp],uj=xp.toLowerCase(),dj=xp[0].toUpperCase()+xp.slice(1);Jn(uj,"on"+dj)}Jn(qT,"onAnimationEnd");Jn(HT,"onAnimationIteration");Jn(GT,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(AO,"onTransitionRun");Jn(CO,"onTransitionStart");Jn(RO,"onTransitionCancel");Jn(YT,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function j2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,d=o.currentTarget;if(o=o.listener,u!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=d;try{i(a)}catch(h){oh(h)}a.currentTarget=null,i=u}else for(s=0;s<r.length;s++){if(o=r[s],u=o.instance,d=o.currentTarget,o=o.listener,u!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=d;try{i(a)}catch(h){oh(h)}a.currentTarget=null,i=u}}}}function pe(t,e){var n=e[hg];n===void 0&&(n=e[hg]=new Set);var r=t+"__bubble";n.has(r)||(k2(e,t,2,!1),n.add(r))}function wp(t,e,n){var r=0;e&&(r|=4),k2(n,t,r,e)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Y0(t){if(!t[sd]){t[sd]=!0,ST.forEach(function(n){n!=="selectionchange"&&(hj.has(n)||wp(n,!1,t),wp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sd]||(e[sd]=!0,wp("selectionchange",!1,e))}}function k2(t,e,n,r){switch(Y2(e)){case 2:var a=Bj;break;case 8:a=zj;break;default:a=X0}n=a.bind(null,e,n,t),a=void 0,!yg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Ep(t,e,n,r,a){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===a)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&s.stateNode.containerInfo===a)return;s=s.return}for(;o!==null;){if(s=Gs(o),s===null)return;if(u=s.tag,u===5||u===6||u===26||u===27){r=i=s;continue e}o=o.parentNode}}r=r.return}jT(function(){var d=i,h=d0(n),f=[];e:{var p=WT.get(t);if(p!==void 0){var y=df,w=t;switch(t){case"keypress":if(Dd(n)===0)break e;case"keydown":case"keyup":y=iO;break;case"focusin":w="focus",y=Jm;break;case"focusout":w="blur",y=Jm;break;case"beforeblur":case"afterblur":y=Jm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=YI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=lO;break;case qT:case HT:case GT:y=QI;break;case YT:y=uO;break;case"scroll":case"scrollend":y=HI;break;case"wheel":y=hO;break;case"copy":case"cut":case"paste":y=JI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=nb;break;case"toggle":case"beforetoggle":y=mO}var N=(e&4)!==0,A=!N&&(t==="scroll"||t==="scrollend"),_=N?p!==null?p+"Capture":null:p;N=[];for(var x=d,E;x!==null;){var I=x;if(E=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||E===null||_===null||(I=Rc(x,_),I!=null&&N.push(Vc(x,I,E))),A)break;x=x.return}0<N.length&&(p=new y(p,w,null,n,h),f.push({event:p,listeners:N}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==gg&&(w=n.relatedTarget||n.fromElement)&&(Gs(w)||w[Fo]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=d,w=w?Gs(w):null,w!==null&&(A=eu(w),N=w.tag,w!==A||N!==5&&N!==27&&N!==6)&&(w=null)):(y=null,w=d),y!==w)){if(N=eb,I="onMouseLeave",_="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=nb,I="onPointerLeave",_="onPointerEnter",x="pointer"),A=y==null?p:Xl(y),E=w==null?p:Xl(w),p=new N(I,x+"leave",y,n,h),p.target=A,p.relatedTarget=E,I=null,Gs(h)===d&&(N=new N(_,x+"enter",w,n,h),N.target=E,N.relatedTarget=A,I=N),A=I,y&&w)t:{for(N=fj,_=y,x=w,E=0,I=_;I;I=N(I))E++;I=0;for(var V=x;V;V=N(V))I++;for(;0<E-I;)_=N(_),E--;for(;0<I-E;)x=N(x),I--;for(;E--;){if(_===x||x!==null&&_===x.alternate){N=_;break t}_=N(_),x=N(x)}N=null}else N=null;y!==null&&Yb(f,p,y,N,!1),w!==null&&A!==null&&Yb(f,A,w,N,!0)}}e:{if(p=d?Xl(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var q=sb;else if(ib(p))if(UT)q=TO;else{q=wO;var S=xO}else y=p.nodeName,!y||y.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&u0(d.elementType)&&(q=sb):q=EO;if(q&&(q=q(t,d))){VT(f,q,n,h);break e}S&&S(t,p,d),t==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&pg(p,"number",p.value)}switch(S=d?Xl(d):window,t){case"focusin":(ib(S)||S.contentEditable==="true")&&(Ks=S,vg=d,dc=null);break;case"focusout":dc=vg=Ks=null;break;case"mousedown":_g=!0;break;case"contextmenu":case"mouseup":case"dragend":_g=!1,db(f,n,h);break;case"selectionchange":if(NO)break;case"keydown":case"keyup":db(f,n,h)}var v;if(m0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ws?PT(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(MT&&n.locale!=="ko"&&(Ws||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ws&&(v=kT()):(Oa=h,h0="value"in Oa?Oa.value:Oa.textContent,Ws=!0)),S=Th(d,b),0<S.length&&(b=new tb(b,t,null,n,h),f.push({event:b,listeners:S}),v?b.data=v:(v=LT(n),v!==null&&(b.data=v)))),(v=gO?yO(t,n):vO(t,n))&&(b=Th(d,"onBeforeInput"),0<b.length&&(S=new tb("onBeforeInput","beforeinput",null,n,h),f.push({event:S,listeners:b}),S.data=v)),cj(f,t,d,n,h)}j2(f,e)})}function Vc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Th(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=Rc(t,n),a!=null&&r.unshift(Vc(t,a,i)),a=Rc(t,e),a!=null&&r.push(Vc(t,a,i))),t.tag===3)return r;t=t.return}return[]}function fj(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yb(t,e,n,r,a){for(var i=e._reactName,s=[];n!==null&&n!==r;){var o=n,u=o.alternate,d=o.stateNode;if(o=o.tag,u!==null&&u===r)break;o!==5&&o!==26&&o!==27||d===null||(u=d,a?(d=Rc(n,i),d!=null&&s.unshift(Vc(n,d,u))):a||(d=Rc(n,i),d!=null&&s.push(Vc(n,d,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var mj=/\r\n?/g,pj=/\u0000|\uFFFD/g;function Wb(t){return(typeof t=="string"?t:""+t).replace(mj,`
`).replace(pj,"")}function M2(t,e){return e=Wb(e),Wb(t)===e}function Ce(t,e,n,r,a,i){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||xo(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&xo(t,""+r);break;case"className":Zu(t,"class",r);break;case"tabIndex":Zu(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Zu(t,n,r);break;case"style":OT(t,r,i);break;case"data":if(e!=="object"){Zu(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Cd(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&Ce(t,e,"name",a.name,a,null),Ce(t,e,"formEncType",a.formEncType,a,null),Ce(t,e,"formMethod",a.formMethod,a,null),Ce(t,e,"formTarget",a.formTarget,a,null)):(Ce(t,e,"encType",a.encType,a,null),Ce(t,e,"method",a.method,a,null),Ce(t,e,"target",a.target,a,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=Cd(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=Pr);break;case"onScroll":r!=null&&pe("scroll",t);break;case"onScrollEnd":r!=null&&pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(F(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(F(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=Cd(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":pe("beforetoggle",t),pe("toggle",t),Ad(t,"popover",r);break;case"xlinkActuate":Cr(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Cr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Cr(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Cr(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Cr(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Cr(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Cr(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Cr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Cr(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ad(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=$I.get(n)||n,Ad(t,n,r))}}function $g(t,e,n,r,a,i){switch(n){case"style":OT(t,r,i);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(F(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(F(60));t.innerHTML=n}}break;case"children":typeof r=="string"?xo(t,r):(typeof r=="number"||typeof r=="bigint")&&xo(t,""+r);break;case"onScroll":r!=null&&pe("scroll",t);break;case"onScrollEnd":r!=null&&pe("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!NT.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),e=n.slice(2,a?n.length-7:void 0),i=t[nn]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,a),typeof r=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,a);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):Ad(t,n,r)}}}function kt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pe("error",t),pe("load",t);var r=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var s=n[i];if(s!=null)switch(i){case"src":r=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(F(137,e));default:Ce(t,e,i,s,n,null)}}a&&Ce(t,e,"srcSet",n.srcSet,n,null),r&&Ce(t,e,"src",n.src,n,null);return;case"input":pe("invalid",t);var o=i=s=a=null,u=null,d=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(h!=null)switch(r){case"name":a=h;break;case"type":s=h;break;case"checked":u=h;break;case"defaultChecked":d=h;break;case"value":i=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(F(137,e));break;default:Ce(t,e,r,h,n,null)}}RT(t,i,o,u,d,s,a,!1);return;case"select":pe("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":s=o;break;case"multiple":r=o;default:Ce(t,e,a,o,n,null)}e=i,n=s,t.multiple=!!r,e!=null?oo(t,!!r,e,!1):n!=null&&oo(t,!!r,n,!0);return;case"textarea":pe("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":a=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(F(91));break;default:Ce(t,e,s,o,n,null)}IT(t,r,a,i);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Ce(t,e,u,r,n,null)}return;case"dialog":pe("beforetoggle",t),pe("toggle",t),pe("cancel",t),pe("close",t);break;case"iframe":case"object":pe("load",t);break;case"video":case"audio":for(r=0;r<Lc.length;r++)pe(Lc[r],t);break;case"image":pe("error",t),pe("load",t);break;case"details":pe("toggle",t);break;case"embed":case"source":case"link":pe("error",t),pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(r=n[d],r!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(F(137,e));default:Ce(t,e,d,r,n,null)}return;default:if(u0(e)){for(h in n)n.hasOwnProperty(h)&&(r=n[h],r!==void 0&&$g(t,e,h,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&Ce(t,e,o,r,n,null))}function gj(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,o=null,u=null,d=null,h=null;for(y in n){var f=n[y];if(n.hasOwnProperty(y)&&f!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":u=f;default:r.hasOwnProperty(y)||Ce(t,e,y,null,r,f)}}for(var p in r){var y=r[p];if(f=n[p],r.hasOwnProperty(p)&&(y!=null||f!=null))switch(p){case"type":i=y;break;case"name":a=y;break;case"checked":d=y;break;case"defaultChecked":h=y;break;case"value":s=y;break;case"defaultValue":o=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(F(137,e));break;default:y!==f&&Ce(t,e,p,y,r,f)}}mg(t,s,o,u,d,h,i,a);return;case"select":y=s=o=p=null;for(i in n)if(u=n[i],n.hasOwnProperty(i)&&u!=null)switch(i){case"value":break;case"multiple":y=u;default:r.hasOwnProperty(i)||Ce(t,e,i,null,r,u)}for(a in r)if(i=r[a],u=n[a],r.hasOwnProperty(a)&&(i!=null||u!=null))switch(a){case"value":p=i;break;case"defaultValue":o=i;break;case"multiple":s=i;default:i!==u&&Ce(t,e,a,i,r,u)}e=o,n=s,r=y,p!=null?oo(t,!!n,p,!1):!!r!=!!n&&(e!=null?oo(t,!!n,e,!0):oo(t,!!n,n?[]:"",!1));return;case"textarea":y=p=null;for(o in n)if(a=n[o],n.hasOwnProperty(o)&&a!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ce(t,e,o,null,r,a)}for(s in r)if(a=r[s],i=n[s],r.hasOwnProperty(s)&&(a!=null||i!=null))switch(s){case"value":p=a;break;case"defaultValue":y=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(F(91));break;default:a!==i&&Ce(t,e,s,a,r,i)}DT(t,p,y);return;case"option":for(var w in n)if(p=n[w],n.hasOwnProperty(w)&&p!=null&&!r.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:Ce(t,e,w,null,r,p)}for(u in r)if(p=r[u],y=n[u],r.hasOwnProperty(u)&&p!==y&&(p!=null||y!=null))switch(u){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ce(t,e,u,p,r,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)p=n[N],n.hasOwnProperty(N)&&p!=null&&!r.hasOwnProperty(N)&&Ce(t,e,N,null,r,p);for(d in r)if(p=r[d],y=n[d],r.hasOwnProperty(d)&&p!==y&&(p!=null||y!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(F(137,e));break;default:Ce(t,e,d,p,r,y)}return;default:if(u0(e)){for(var A in n)p=n[A],n.hasOwnProperty(A)&&p!==void 0&&!r.hasOwnProperty(A)&&$g(t,e,A,void 0,r,p);for(h in r)p=r[h],y=n[h],!r.hasOwnProperty(h)||p===y||p===void 0&&y===void 0||$g(t,e,h,p,r,y);return}}for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!=null&&!r.hasOwnProperty(_)&&Ce(t,e,_,null,r,p);for(f in r)p=r[f],y=n[f],!r.hasOwnProperty(f)||p===y||p==null&&y==null||Ce(t,e,f,p,r,y)}function Kb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yj(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],i=a.transferSize,s=a.initiatorType,o=a.duration;if(i&&o&&Kb(s)){for(s=0,o=a.responseEnd,r+=1;r<n.length;r++){var u=n[r],d=u.startTime;if(d>o)break;var h=u.transferSize,f=u.initiatorType;h&&Kb(f)&&(u=u.responseEnd,s+=h*(u<o?1:(o-d)/(u-d)))}if(--r,e+=8*(i+s)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var qg=null,Hg=null;function Sh(t){return t.nodeType===9?t:t.ownerDocument}function Qb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function P2(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Gg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tp=null;function vj(){var t=window.event;return t&&t.type==="popstate"?t===Tp?!1:(Tp=t,!0):(Tp=null,!1)}var L2=typeof setTimeout=="function"?setTimeout:void 0,_j=typeof clearTimeout=="function"?clearTimeout:void 0,Xb=typeof Promise=="function"?Promise:void 0,bj=typeof queueMicrotask=="function"?queueMicrotask:typeof Xb<"u"?function(t){return Xb.resolve(null).then(t).catch(xj)}:L2;function xj(t){setTimeout(function(){throw t})}function di(t){return t==="head"}function Jb(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(r===0){t.removeChild(a),Ro(e);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")xc(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,xc(n);for(var i=n.firstChild;i;){var s=i.nextSibling,o=i.nodeName;i[au]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=s}}else n==="body"&&xc(t.ownerDocument.body);n=a}while(n);Ro(e)}function Zb(t,e){var n=t;t=0;do{var r=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=r}while(n)}function Yg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Yg(n),c0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function wj(t,e,n,r){for(;t.nodeType===1;){var a=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[au])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=Mn(t.nextSibling),t===null)break}return null}function Ej(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Mn(t.nextSibling),t===null))return null;return t}function V2(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Mn(t.nextSibling),t===null))return null;return t}function Wg(t){return t.data==="$?"||t.data==="$~"}function Kg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Tj(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function Mn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Qg=null;function ex(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Mn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function tx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function U2(t,e,n){switch(e=Sh(n),t){case"html":if(t=e.documentElement,!t)throw Error(F(452));return t;case"head":if(t=e.head,!t)throw Error(F(453));return t;case"body":if(t=e.body,!t)throw Error(F(454));return t;default:throw Error(F(451))}}function xc(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);c0(t)}var Ln=new Map,nx=new Set;function Nh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var aa=Te.d;Te.d={f:Sj,r:Nj,D:Aj,C:Cj,L:Rj,m:Dj,X:Oj,S:Ij,M:jj};function Sj(){var t=aa.f(),e=wf();return t||e}function Nj(t){var e=$o(t);e!==null&&e.tag===5&&e.type==="form"?OS(e):aa.r(t)}var Yo=typeof document>"u"?null:document;function B2(t,e,n){var r=Yo;if(r&&typeof e=="string"&&e){var a=Cn(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),nx.has(a)||(nx.add(a),t={rel:t,crossOrigin:n,href:e},r.querySelector(a)===null&&(e=r.createElement("link"),kt(e,"link",t),xt(e),r.head.appendChild(e)))}}function Aj(t){aa.D(t),B2("dns-prefetch",t,null)}function Cj(t,e){aa.C(t,e),B2("preconnect",t,e)}function Rj(t,e,n){aa.L(t,e,n);var r=Yo;if(r&&t&&e){var a='link[rel="preload"][as="'+Cn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Cn(n.imageSizes)+'"]')):a+='[href="'+Cn(t)+'"]';var i=a;switch(e){case"style":i=Co(t);break;case"script":i=Wo(t)}Ln.has(i)||(t=Be({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Ln.set(i,t),r.querySelector(a)!==null||e==="style"&&r.querySelector(uu(i))||e==="script"&&r.querySelector(du(i))||(e=r.createElement("link"),kt(e,"link",t),xt(e),r.head.appendChild(e)))}}function Dj(t,e){aa.m(t,e);var n=Yo;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+Cn(r)+'"][href="'+Cn(t)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Wo(t)}if(!Ln.has(i)&&(t=Be({rel:"modulepreload",href:t},e),Ln.set(i,t),n.querySelector(a)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(du(i)))return}r=n.createElement("link"),kt(r,"link",t),xt(r),n.head.appendChild(r)}}}function Ij(t,e,n){aa.S(t,e,n);var r=Yo;if(r&&t){var a=so(r).hoistableStyles,i=Co(t);e=e||"default";var s=a.get(i);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(uu(i)))o.loading=5;else{t=Be({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Ln.get(i))&&W0(t,n);var u=s=r.createElement("link");xt(u),kt(u,"link",t),u._p=new Promise(function(d,h){u.onload=d,u.onerror=h}),u.addEventListener("load",function(){o.loading|=1}),u.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Vd(s,e,r)}s={type:"stylesheet",instance:s,count:1,state:o},a.set(i,s)}}}function Oj(t,e){aa.X(t,e);var n=Yo;if(n&&t){var r=so(n).hoistableScripts,a=Wo(t),i=r.get(a);i||(i=n.querySelector(du(a)),i||(t=Be({src:t,async:!0},e),(e=Ln.get(a))&&K0(t,e),i=n.createElement("script"),xt(i),kt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}function jj(t,e){aa.M(t,e);var n=Yo;if(n&&t){var r=so(n).hoistableScripts,a=Wo(t),i=r.get(a);i||(i=n.querySelector(du(a)),i||(t=Be({src:t,async:!0,type:"module"},e),(e=Ln.get(a))&&K0(t,e),i=n.createElement("script"),xt(i),kt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}function rx(t,e,n,r){var a=(a=Va.current)?Nh(a):null;if(!a)throw Error(F(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Co(n.href),n=so(a).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Co(n.href);var i=so(a).hoistableStyles,s=i.get(t);if(s||(a=a.ownerDocument||a,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,s),(i=a.querySelector(uu(t)))&&!i._p&&(s.instance=i,s.state.loading=5),Ln.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ln.set(t,n),i||kj(a,t,n,s.state))),e&&r===null)throw Error(F(528,""));return s}if(e&&r!==null)throw Error(F(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Wo(n),n=so(a).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(F(444,t))}}function Co(t){return'href="'+Cn(t)+'"'}function uu(t){return'link[rel="stylesheet"]['+t+"]"}function z2(t){return Be({},t,{"data-precedence":t.precedence,precedence:null})}function kj(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),kt(e,"link",n),xt(e),t.head.appendChild(e))}function Wo(t){return'[src="'+Cn(t)+'"]'}function du(t){return"script[async]"+t}function ax(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+Cn(n.href)+'"]');if(r)return e.instance=r,xt(r),r;var a=Be({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),xt(r),kt(r,"style",a),Vd(r,n.precedence,t),e.instance=r;case"stylesheet":a=Co(n.href);var i=t.querySelector(uu(a));if(i)return e.state.loading|=4,e.instance=i,xt(i),i;r=z2(n),(a=Ln.get(a))&&W0(r,a),i=(t.ownerDocument||t).createElement("link"),xt(i);var s=i;return s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),kt(i,"link",r),e.state.loading|=4,Vd(i,n.precedence,t),e.instance=i;case"script":return i=Wo(n.src),(a=t.querySelector(du(i)))?(e.instance=a,xt(a),a):(r=n,(a=Ln.get(i))&&(r=Be({},n),K0(r,a)),t=t.ownerDocument||t,a=t.createElement("script"),xt(a),kt(a,"link",r),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(F(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,Vd(r,n.precedence,t));return e.instance}function Vd(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===e)i=o;else if(i!==a)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function W0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function K0(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Ud=null;function ix(t,e,n){if(Ud===null){var r=new Map,a=Ud=new Map;a.set(n,r)}else a=Ud,r=a.get(n),r||(r=new Map,a.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),a=0;a<n.length;a++){var i=n[a];if(!(i[au]||i[Rt]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var s=i.getAttribute(e)||"";s=t+s;var o=r.get(s);o?o.push(i):r.set(s,[i])}}return r}function sx(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Mj(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function F2(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function Pj(t,e,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=Co(r.href),i=e.querySelector(uu(a));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Ah.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,xt(i);return}i=e.ownerDocument||e,r=z2(r),(a=Ln.get(a))&&W0(r,a),i=i.createElement("link"),xt(i);var s=i;s._p=new Promise(function(o,u){s.onload=o,s.onerror=u}),kt(i,"link",r),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Ah.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Sp=0;function Lj(t,e){return t.stylesheets&&t.count===0&&Bd(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var r=setTimeout(function(){if(t.stylesheets&&Bd(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&Sp===0&&(Sp=62500*yj());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Bd(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>Sp?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}function Ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ch=null;function Bd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ch=new Map,e.forEach(Vj,t),Ch=null,Ah.call(t))}function Vj(t,e){if(!(e.state.loading&4)){var n=Ch.get(t);if(n)var r=n.get(null);else{n=new Map,Ch.set(t,n);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}a=e.instance,s=a.getAttribute("data-precedence"),i=n.get(s)||r,i===r&&n.set(null,a),n.set(s,a),this.count++,r=Ah.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var Uc={$$typeof:Mr,Provider:null,Consumer:null,_currentValue:Bi,_currentValue2:Bi,_threadCount:0};function Uj(t,e,n,r,a,i,s,o,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wm(0),this.hiddenUpdates=Wm(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function $2(t,e,n,r,a,i,s,o,u,d,h,f){return t=new Uj(t,e,n,s,u,d,h,f,o),e=1,i===!0&&(e|=24),i=dn(3,null,null,e),t.current=i,i.stateNode=t,e=x0(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:e},T0(i),t}function q2(t){return t?(t=Js,t):Js}function H2(t,e,n,r,a,i){a=q2(a),r.context===null?r.context=a:r.pendingContext=a,r=Ba(e),r.payload={element:n},i=i===void 0?null:i,i!==null&&(r.callback=i),n=za(t,r,e),n!==null&&(en(n,t,e),fc(n,t,e))}function ox(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Q0(t,e){ox(t,e),(t=t.alternate)&&ox(t,e)}function G2(t){if(t.tag===13||t.tag===31){var e=cs(t,67108864);e!==null&&en(e,t,67108864),Q0(t,67108864)}}function lx(t){if(t.tag===13||t.tag===31){var e=vn();e=o0(e);var n=cs(t,e);n!==null&&en(n,t,e),Q0(t,e)}}var Rh=!0;function Bj(t,e,n,r){var a=re.T;re.T=null;var i=Te.p;try{Te.p=2,X0(t,e,n,r)}finally{Te.p=i,re.T=a}}function zj(t,e,n,r){var a=re.T;re.T=null;var i=Te.p;try{Te.p=8,X0(t,e,n,r)}finally{Te.p=i,re.T=a}}function X0(t,e,n,r){if(Rh){var a=Xg(r);if(a===null)Ep(t,e,r,Dh,n),cx(t,r);else if($j(a,t,e,n,r))r.stopPropagation();else if(cx(t,r),e&4&&-1<Fj.indexOf(t)){for(;a!==null;){var i=$o(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var s=ki(i.pendingLanes);if(s!==0){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var u=1<<31-yn(s);o.entanglements[1]|=u,s&=~u}Sr(i),!(Ee&6)&&(_h=pn()+500,cu(0))}}break;case 31:case 13:o=cs(i,2),o!==null&&en(o,i,2),wf(),Q0(i,2)}if(i=Xg(r),i===null&&Ep(t,e,r,Dh,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Ep(t,e,r,null,n)}}function Xg(t){return t=d0(t),J0(t)}var Dh=null;function J0(t){if(Dh=null,t=Gs(t),t!==null){var e=eu(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=hT(e),t!==null)return t;t=null}else if(n===31){if(t=fT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Dh=t,null}function Y2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(AI()){case yT:return 2;case vT:return 8;case ih:case CI:return 32;case _T:return 268435456;default:return 32}default:return 32}}var Jg=!1,qa=null,Ha=null,Ga=null,Bc=new Map,zc=new Map,Na=[],Fj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cx(t,e){switch(t){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Bc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zc.delete(e.pointerId)}}function $l(t,e,n,r,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},e!==null&&(e=$o(e),e!==null&&G2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function $j(t,e,n,r,a){switch(e){case"focusin":return qa=$l(qa,t,e,n,r,a),!0;case"dragenter":return Ha=$l(Ha,t,e,n,r,a),!0;case"mouseover":return Ga=$l(Ga,t,e,n,r,a),!0;case"pointerover":var i=a.pointerId;return Bc.set(i,$l(Bc.get(i)||null,t,e,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,zc.set(i,$l(zc.get(i)||null,t,e,n,r,a)),!0}return!1}function W2(t){var e=Gs(t.target);if(e!==null){var n=eu(e);if(n!==null){if(e=n.tag,e===13){if(e=hT(n),e!==null){t.blockedOn=e,Y1(t.priority,function(){lx(n)});return}}else if(e===31){if(e=fT(n),e!==null){t.blockedOn=e,Y1(t.priority,function(){lx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xg(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gg=r,n.target.dispatchEvent(r),gg=null}else return e=$o(n),e!==null&&G2(e),t.blockedOn=n,!1;e.shift()}return!0}function ux(t,e,n){zd(t)&&n.delete(e)}function qj(){Jg=!1,qa!==null&&zd(qa)&&(qa=null),Ha!==null&&zd(Ha)&&(Ha=null),Ga!==null&&zd(Ga)&&(Ga=null),Bc.forEach(ux),zc.forEach(ux)}function od(t,e){t.blockedOn===e&&(t.blockedOn=null,Jg||(Jg=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,qj)))}var ld=null;function dx(t){ld!==t&&(ld=t,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,function(){ld===t&&(ld=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],a=t[e+2];if(typeof r!="function"){if(J0(r||n)===null)continue;break}var i=$o(n);i!==null&&(t.splice(e,3),e-=3,Og(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Ro(t){function e(u){return od(u,t)}qa!==null&&od(qa,t),Ha!==null&&od(Ha,t),Ga!==null&&od(Ga,t),Bc.forEach(e),zc.forEach(e);for(var n=0;n<Na.length;n++){var r=Na[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Na.length&&(n=Na[0],n.blockedOn===null);)W2(n),n.blockedOn===null&&Na.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],s=a[nn]||null;if(typeof i=="function")s||dx(n);else if(s){var o=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[nn]||null)o=s.formAction;else if(J0(a)!==null)continue}else o=s.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),dx(n)}}}function K2(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(s){return a=s})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function Z0(t){this._internalRoot=t}Sf.prototype.render=Z0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));var n=e.current,r=vn();H2(n,r,t,e,null,null)};Sf.prototype.unmount=Z0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;H2(t.current,2,null,t,null,null),wf(),e[Fo]=null}};function Sf(t){this._internalRoot=t}Sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=TT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Na.length&&e!==0&&e<Na[n].priority;n++);Na.splice(n,0,t),n===0&&W2(t)}};var hx=uT.version;if(hx!=="19.2.3")throw Error(F(527,hx,"19.2.3"));Te.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=bI(e),t=t!==null?mT(t):null,t=t===null?null:t.stateNode,t};var Hj={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:re,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{tu=cd.inject(Hj),gn=cd}catch{}}lf.createRoot=function(t,e){if(!dT(t))throw Error(F(299));var n=!1,r="",a=BS,i=zS,s=FS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$2(t,1,!1,null,null,n,r,null,a,i,s,K2),t[Fo]=e.current,Y0(t),new Z0(e)};lf.hydrateRoot=function(t,e,n){if(!dT(t))throw Error(F(299));var r=!1,a="",i=BS,s=zS,o=FS,u=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=$2(t,1,!0,e,n??null,r,a,u,i,s,o,K2),e.context=q2(null),n=e.current,r=vn(),r=o0(r),a=Ba(r),a.callback=null,za(n,a,r),n=r,e.current.lanes=n,ru(e,n),Sr(e),t[Fo]=e.current,Y0(t),new Sf(e)};lf.version="19.2.3";function Q2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q2)}catch(t){console.error(t)}}Q2(),aT.exports=lf;var Gj=aT.exports;/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fx="popstate";function Yj(t={}){function e(r,a){let{pathname:i,search:s,hash:o}=r.location;return Zg("",{pathname:i,search:s,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Fc(a)}return Kj(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wj(){return Math.random().toString(36).substring(2,10)}function mx(t,e){return{usr:t.state,key:t.key,idx:e}}function Zg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ko(e):e,state:n,key:e&&e.key||r||Wj()}}function Fc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ko(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Kj(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,s=a.history,o="POP",u=null,d=h();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function h(){return(s.state||{idx:null}).idx}function f(){o="POP";let A=h(),_=A==null?null:A-d;d=A,u&&u({action:o,location:N.location,delta:_})}function p(A,_){o="PUSH";let x=Zg(N.location,A,_);d=h()+1;let E=mx(x,d),I=N.createHref(x);try{s.pushState(E,"",I)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;a.location.assign(I)}i&&u&&u({action:o,location:N.location,delta:1})}function y(A,_){o="REPLACE";let x=Zg(N.location,A,_);d=h();let E=mx(x,d),I=N.createHref(x);s.replaceState(E,"",I),i&&u&&u({action:o,location:N.location,delta:0})}function w(A){return Qj(A)}let N={get action(){return o},get location(){return t(a,s)},listen(A){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(fx,f),u=A,()=>{a.removeEventListener(fx,f),u=null}},createHref(A){return e(a,A)},createURL:w,encodeLocation(A){let _=w(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:y,go(A){return s.go(A)}};return N}function Qj(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qe(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Fc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function X2(t,e,n="/"){return Xj(t,e,n,!1)}function Xj(t,e,n,r){let a=typeof e=="string"?Ko(e):e,i=Jr(a.pathname||"/",n);if(i==null)return null;let s=J2(t);Jj(s);let o=null;for(let u=0;o==null&&u<s.length;++u){let d=ck(i);o=ok(s[u],d,r)}return o}function J2(t,e=[],n=[],r="",a=!1){let i=(s,o,u=a,d)=>{let h={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;qe(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=qr([r,h.relativePath]),p=n.concat(h);s.children&&s.children.length>0&&(qe(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),J2(s.children,e,p,f,u)),!(s.path==null&&!s.index)&&e.push({path:f,score:ik(f,s.index),routesMeta:p})};return t.forEach((s,o)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,o);else for(let d of Z2(s.path))i(s,o,!0,d)}),e}function Z2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let s=Z2(r.join("/")),o=[];return o.push(...s.map(u=>u===""?i:[i,u].join("/"))),a&&o.push(...s),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function Jj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Zj=/^:[\w-]+$/,ek=3,tk=2,nk=1,rk=10,ak=-2,px=t=>t==="*";function ik(t,e){let n=t.split("/"),r=n.length;return n.some(px)&&(r+=ak),e&&(r+=tk),n.filter(a=>!px(a)).reduce((a,i)=>a+(Zj.test(i)?ek:i===""?nk:rk),r)}function sk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function ok(t,e,n=!1){let{routesMeta:r}=t,a={},i="/",s=[];for(let o=0;o<r.length;++o){let u=r[o],d=o===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Ih({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=Ih({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:qr([i,f.pathname]),pathnameBase:fk(qr([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=qr([i,f.pathnameBase]))}return s}function Ih(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lk(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let i=a[0],s=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:f},p)=>{if(h==="*"){let w=o[p]||"";s=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=o[p];return f&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:s,pattern:t}}function lk(t,e=!1,n=!0){Vn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,u)=>(r.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function ck(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Jr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uk=t=>eN.test(t);function dk(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Ko(t):t,i;if(n)if(uk(n))i=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Vn(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${n}`)}n.startsWith("/")?i=gx(n.substring(1),"/"):i=gx(n,e)}else i=e;return{pathname:i,search:mk(r),hash:pk(a)}}function gx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Np(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ev(t){let e=hk(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function tv(t,e,n,r=!1){let a;typeof t=="string"?a=Ko(t):(a={...t},qe(!a.pathname||!a.pathname.includes("?"),Np("?","pathname","search",a)),qe(!a.pathname||!a.pathname.includes("#"),Np("#","pathname","hash",a)),qe(!a.search||!a.search.includes("#"),Np("#","search","hash",a)));let i=t===""||a.pathname==="",s=i?"/":a.pathname,o;if(s==null)o=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}o=f>=0?e[f]:"/"}let u=dk(a,o),d=s&&s!=="/"&&s.endsWith("/"),h=(i||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var qr=t=>t.join("/").replace(/\/\/+/g,"/"),fk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,gk=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function yk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function vk(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nN(t,e){let n=t;if(typeof n!="string"||!eN.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,a=!1;if(tN)try{let i=new URL(window.location.href),s=n.startsWith("//")?new URL(i.protocol+n):new URL(n),o=Jr(s.pathname,e);s.origin===i.origin&&o!=null?n=o+s.search+s.hash:a=!0}catch{Vn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rN=["POST","PUT","PATCH","DELETE"];new Set(rN);var _k=["GET",...rN];new Set(_k);var Qo=R.createContext(null);Qo.displayName="DataRouter";var Nf=R.createContext(null);Nf.displayName="DataRouterState";var bk=R.createContext(!1),aN=R.createContext({isTransitioning:!1});aN.displayName="ViewTransition";var xk=R.createContext(new Map);xk.displayName="Fetchers";var wk=R.createContext(null);wk.displayName="Await";var wn=R.createContext(null);wn.displayName="Navigation";var hu=R.createContext(null);hu.displayName="Location";var Zn=R.createContext({outlet:null,matches:[],isDataRoute:!1});Zn.displayName="Route";var nv=R.createContext(null);nv.displayName="RouteError";var iN="REACT_ROUTER_ERROR",Ek="REDIRECT",Tk="ROUTE_ERROR_RESPONSE";function Sk(t){if(t.startsWith(`${iN}:${Ek}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Nk(t){if(t.startsWith(`${iN}:${Tk}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new gk(e.status,e.statusText,e.data)}catch{}}function Ak(t,{relative:e}={}){qe(Xo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(wn),{hash:a,pathname:i,search:s}=fu(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:qr([n,i])),r.createHref({pathname:o,search:s,hash:a})}function Xo(){return R.useContext(hu)!=null}function ia(){return qe(Xo(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(hu).location}var sN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oN(t){R.useContext(wn).static||R.useLayoutEffect(t)}function ds(){let{isDataRoute:t}=R.useContext(Zn);return t?Bk():Ck()}function Ck(){qe(Xo(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Qo),{basename:e,navigator:n}=R.useContext(wn),{matches:r}=R.useContext(Zn),{pathname:a}=ia(),i=JSON.stringify(ev(r)),s=R.useRef(!1);return oN(()=>{s.current=!0}),R.useCallback((u,d={})=>{if(Vn(s.current,sN),!s.current)return;if(typeof u=="number"){n.go(u);return}let h=tv(u,JSON.parse(i),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qr([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,a,t])}R.createContext(null);function lN(){let{matches:t}=R.useContext(Zn),e=t[t.length-1];return e?e.params:{}}function fu(t,{relative:e}={}){let{matches:n}=R.useContext(Zn),{pathname:r}=ia(),a=JSON.stringify(ev(n));return R.useMemo(()=>tv(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function Rk(t,e){return cN(t,e)}function cN(t,e,n,r,a){var x;qe(Xo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=R.useContext(wn),{matches:s}=R.useContext(Zn),o=s[s.length-1],u=o?o.params:{},d=o?o.pathname:"/",h=o?o.pathnameBase:"/",f=o&&o.route;{let E=f&&f.path||"";dN(d,!f||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=ia(),y;if(e){let E=typeof e=="string"?Ko(e):e;qe(h==="/"||((x=E.pathname)==null?void 0:x.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${E.pathname}" was given in the \`location\` prop.`),y=E}else y=p;let w=y.pathname||"/",N=w;if(h!=="/"){let E=h.replace(/^\//,"").split("/");N="/"+w.replace(/^\//,"").split("/").slice(E.length).join("/")}let A=X2(t,{pathname:N});Vn(f||A!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Vn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=kk(A&&A.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:qr([h,i.encodeLocation?i.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:qr([h,i.encodeLocation?i.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),s,n,r,a);return e&&_?R.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function Dk(){let t=Uk(),e=yk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:i},"ErrorBoundary")," or"," ",R.createElement("code",{style:i},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:a},n):null,s)}var Ik=R.createElement(Dk,null),uN=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Nk(t.digest);n&&(t=n)}let e=t!==void 0?R.createElement(Zn.Provider,{value:this.props.routeContext},R.createElement(nv.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?R.createElement(Ok,{error:t},e):e}};uN.contextType=bk;var Ap=new WeakMap;function Ok({children:t,error:e}){let{basename:n}=R.useContext(wn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Sk(e.digest);if(r){let a=Ap.get(e);if(a)throw a;let i=nN(r.location,n);if(tN&&!Ap.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw Ap.set(e,s),s}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function jk({routeContext:t,match:e,children:n}){let r=R.useContext(Qo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Zn.Provider,{value:t},n)}function kk(t,e=[],n=null,r=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let h=i.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);qe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let o=!1,u=-1;if(n)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:y}=n,w=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||w){o=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(h,f)=>{var p,y;r(h,{location:n.location,params:((y=(p=n.matches)==null?void 0:p[0])==null?void 0:y.params)??{},unstable_pattern:vk(n.matches),errorInfo:f})}:void 0;return i.reduceRight((h,f,p)=>{let y,w=!1,N=null,A=null;n&&(y=s&&f.route.id?s[f.route.id]:void 0,N=f.route.errorElement||Ik,o&&(u<0&&p===0?(dN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,A=null):u===p&&(w=!0,A=f.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,p+1)),x=()=>{let E;return y?E=N:w?E=A:f.route.Component?E=R.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,R.createElement(jk,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?R.createElement(uN,{location:n.location,revalidation:n.revalidation,component:N,error:y,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:d}):x()},null)}function rv(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mk(t){let e=R.useContext(Qo);return qe(e,rv(t)),e}function Pk(t){let e=R.useContext(Nf);return qe(e,rv(t)),e}function Lk(t){let e=R.useContext(Zn);return qe(e,rv(t)),e}function av(t){let e=Lk(t),n=e.matches[e.matches.length-1];return qe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Vk(){return av("useRouteId")}function Uk(){var r;let t=R.useContext(nv),e=Pk("useRouteError"),n=av("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Bk(){let{router:t}=Mk("useNavigate"),e=av("useNavigate"),n=R.useRef(!1);return oN(()=>{n.current=!0}),R.useCallback(async(a,i={})=>{Vn(n.current,sN),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var yx={};function dN(t,e,n){!e&&!yx[t]&&(yx[t]=!0,Vn(!1,n))}R.memo(zk);function zk({routes:t,future:e,state:n,onError:r}){return cN(t,void 0,n,r,e)}function Fk({to:t,replace:e,state:n,relative:r}){qe(Xo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=R.useContext(wn);Vn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=R.useContext(Zn),{pathname:s}=ia(),o=ds(),u=tv(t,ev(i),s,r==="path"),d=JSON.stringify(u);return R.useEffect(()=>{o(JSON.parse(d),{replace:e,state:n,relative:r})},[o,d,r,e,n]),null}function ba(t){qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $k({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:i=!1,unstable_useTransitions:s}){qe(!Xo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:o,navigator:a,static:i,unstable_useTransitions:s,future:{}}),[o,a,i,s]);typeof n=="string"&&(n=Ko(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:y="default"}=n,w=R.useMemo(()=>{let N=Jr(d,o);return N==null?null:{location:{pathname:N,search:h,hash:f,state:p,key:y},navigationType:r}},[o,d,h,f,p,y,r]);return Vn(w!=null,`<Router basename="${o}"> is not able to match the URL "${d}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:R.createElement(wn.Provider,{value:u},R.createElement(hu.Provider,{children:e,value:w}))}function qk({children:t,location:e}){return Rk(ey(t),e)}function ey(t,e=[]){let n=[];return R.Children.forEach(t,(r,a)=>{if(!R.isValidElement(r))return;let i=[...e,a];if(r.type===R.Fragment){n.push.apply(n,ey(r.props.children,i));return}qe(r.type===ba,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=ey(r.props.children,i)),n.push(s)}),n}var Fd="get",$d="application/x-www-form-urlencoded";function Af(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Hk(t){return Af(t)&&t.tagName.toLowerCase()==="button"}function Gk(t){return Af(t)&&t.tagName.toLowerCase()==="form"}function Yk(t){return Af(t)&&t.tagName.toLowerCase()==="input"}function Wk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kk(t,e){return t.button===0&&(!e||e==="_self")&&!Wk(t)}var ud=null;function Qk(){if(ud===null)try{new FormData(document.createElement("form"),0),ud=!1}catch{ud=!0}return ud}var Xk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cp(t){return t!=null&&!Xk.has(t)?(Vn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$d}"`),null):t}function Jk(t,e){let n,r,a,i,s;if(Gk(t)){let o=t.getAttribute("action");r=o?Jr(o,e):null,n=t.getAttribute("method")||Fd,a=Cp(t.getAttribute("enctype"))||$d,i=new FormData(t)}else if(Hk(t)||Yk(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||o.getAttribute("action");if(r=u?Jr(u,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Fd,a=Cp(t.getAttribute("formenctype"))||Cp(o.getAttribute("enctype"))||$d,i=new FormData(o,t),!Qk()){let{name:d,type:h,value:f}=t;if(h==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,f)}}else{if(Af(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fd,r=null,a=$d,s=t}return i&&a==="text/plain"&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iv(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zk(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Jr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function e4(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function t4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function n4(t,e,n){let r=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let s=await e4(i,n);return s.links?s.links():[]}return[]}));return s4(r.flat(1).filter(t4).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function vx(t,e,n,r,a,i){let s=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,o=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>s(u,d)||o(u,d)):i==="data"?e.filter((u,d)=>{var f;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(s(u,d)||o(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function r4(t,e,{includeHydrateFallback:n}={}){return a4(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function a4(t){return[...new Set(t)]}function i4(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function s4(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let i=JSON.stringify(i4(a));return n.has(i)||(n.add(i),r.push({key:i,link:a})),r},[])}function hN(){let t=R.useContext(Qo);return iv(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function o4(){let t=R.useContext(Nf);return iv(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var sv=R.createContext(void 0);sv.displayName="FrameworkContext";function fN(){let t=R.useContext(sv);return iv(t,"You must render this element inside a <HydratedRouter> element"),t}function l4(t,e){let n=R.useContext(sv),[r,a]=R.useState(!1),[i,s]=R.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=e,p=R.useRef(null);R.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let N=_=>{_.forEach(x=>{s(x.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return p.current&&A.observe(p.current),()=>{A.disconnect()}}},[t]),R.useEffect(()=>{if(r){let N=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(N)}}},[r]);let y=()=>{a(!0)},w=()=>{a(!1),s(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:ql(o,y),onBlur:ql(u,w),onMouseEnter:ql(d,y),onMouseLeave:ql(h,w),onTouchStart:ql(f,y)}]:[!1,p,{}]}function ql(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function c4({page:t,...e}){let{router:n}=hN(),r=R.useMemo(()=>X2(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(d4,{page:t,matches:r,...e}):null}function u4(t){let{manifest:e,routeModules:n}=fN(),[r,a]=R.useState([]);return R.useEffect(()=>{let i=!1;return n4(t,e,n).then(s=>{i||a(s)}),()=>{i=!0}},[t,e,n]),r}function d4({page:t,matches:e,...n}){let r=ia(),{manifest:a,routeModules:i}=fN(),{basename:s}=hN(),{loaderData:o,matches:u}=o4(),d=R.useMemo(()=>vx(t,e,u,a,r,"data"),[t,e,u,a,r]),h=R.useMemo(()=>vx(t,e,u,a,r,"assets"),[t,e,u,a,r]),f=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,N=!1;if(e.forEach(_=>{var E;let x=a.routes[_.route.id];!x||!x.hasLoader||(!d.some(I=>I.route.id===_.route.id)&&_.route.id in o&&((E=i[_.route.id])!=null&&E.shouldRevalidate)||x.hasClientLoader?N=!0:w.add(_.route.id))}),w.size===0)return[];let A=Zk(t,s,"data");return N&&w.size>0&&A.searchParams.set("_routes",e.filter(_=>w.has(_.route.id)).map(_=>_.route.id).join(",")),[A.pathname+A.search]},[s,o,r,a,d,e,t,i]),p=R.useMemo(()=>r4(h,a),[h,a]),y=u4(h);return R.createElement(R.Fragment,null,f.map(w=>R.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),p.map(w=>R.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),y.map(({key:w,link:N})=>R.createElement("link",{key:w,nonce:n.nonce,...N})))}function h4(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var f4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{f4&&(window.__reactRouterVersion="7.11.0")}catch{}function m4({basename:t,children:e,unstable_useTransitions:n,window:r}){let a=R.useRef();a.current==null&&(a.current=Yj({window:r,v5Compat:!0}));let i=a.current,[s,o]=R.useState({action:i.action,location:i.location}),u=R.useCallback(d=>{n===!1?o(d):R.startTransition(()=>o(d))},[n]);return R.useLayoutEffect(()=>i.listen(u),[i,u]),R.createElement($k,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i,unstable_useTransitions:n})}var mN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pN=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:i,replace:s,state:o,target:u,to:d,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:p,...y},w){let{basename:N,unstable_useTransitions:A}=R.useContext(wn),_=typeof d=="string"&&mN.test(d),x=nN(d,N);d=x.to;let E=Ak(d,{relative:a}),[I,V,q]=l4(r,y),S=v4(d,{replace:s,state:o,target:u,preventScrollReset:h,relative:a,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:A});function v(C){e&&e(C),C.defaultPrevented||S(C)}let b=R.createElement("a",{...y,...q,href:x.absoluteURL||E,onClick:x.isExternal||i?e:v,ref:h4(w,V),target:u,"data-discover":!_&&n==="render"?"true":void 0});return I&&!_?R.createElement(R.Fragment,null,b,R.createElement(c4,{page:E})):b});pN.displayName="Link";var p4=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:i,to:s,viewTransition:o,children:u,...d},h){let f=fu(s,{relative:d.relative}),p=ia(),y=R.useContext(Nf),{navigator:w,basename:N}=R.useContext(wn),A=y!=null&&E4(f)&&o===!0,_=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,x=p.pathname,E=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(x=x.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&N&&(E=Jr(E,N)||E);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let V=x===_||!a&&x.startsWith(_)&&x.charAt(I)==="/",q=E!=null&&(E===_||!a&&E.startsWith(_)&&E.charAt(_.length)==="/"),S={isActive:V,isPending:q,isTransitioning:A},v=V?e:void 0,b;typeof r=="function"?b=r(S):b=[r,V?"active":null,q?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(S):i;return R.createElement(pN,{...d,"aria-current":v,className:b,ref:h,style:C,to:s,viewTransition:o},typeof u=="function"?u(S):u)});p4.displayName="NavLink";var g4=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:i,method:s=Fd,action:o,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:p,...y},w)=>{let{unstable_useTransitions:N}=R.useContext(wn),A=x4(),_=w4(o,{relative:d}),x=s.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&mN.test(o),I=V=>{if(u&&u(V),V.defaultPrevented)return;V.preventDefault();let q=V.nativeEvent.submitter,S=(q==null?void 0:q.getAttribute("formmethod"))||s,v=()=>A(q||V.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:a,state:i,relative:d,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:p});N&&n!==!1?R.startTransition(()=>v()):v()};return R.createElement("form",{ref:w,method:x,action:_,onSubmit:r?u:I,...y,"data-discover":!E&&t==="render"?"true":void 0})});g4.displayName="Form";function y4(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gN(t){let e=R.useContext(Qo);return qe(e,y4(t)),e}function v4(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:u}={}){let d=ds(),h=ia(),f=fu(t,{relative:i});return R.useCallback(p=>{if(Kk(p,e)){p.preventDefault();let y=n!==void 0?n:Fc(h)===Fc(f),w=()=>d(t,{replace:y,state:r,preventScrollReset:a,relative:i,viewTransition:s,unstable_defaultShouldRevalidate:o});u?R.startTransition(()=>w()):w()}},[h,d,f,n,r,e,t,a,i,s,o,u])}var _4=0,b4=()=>`__${String(++_4)}__`;function x4(){let{router:t}=gN("useSubmit"),{basename:e}=R.useContext(wn),n=Vk(),r=t.fetch,a=t.navigate;return R.useCallback(async(i,s={})=>{let{action:o,method:u,encType:d,formData:h,body:f}=Jk(i,e);if(s.navigate===!1){let p=s.fetcherKey||b4();await r(p,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||u,formEncType:s.encType||d,flushSync:s.flushSync})}else await a(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:h,body:f,formMethod:s.method||u,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,a,e,n])}function w4(t,{relative:e}={}){let{basename:n}=R.useContext(wn),r=R.useContext(Zn);qe(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...fu(t||".",{relative:e})},s=ia();if(t==null){i.search=s.search;let o=new URLSearchParams(i.search),u=o.getAll("index");if(u.some(h=>h==="")){o.delete("index"),u.filter(f=>f).forEach(f=>o.append("index",f));let h=o.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:qr([n,i.pathname])),Fc(i)}function E4(t,{relative:e}={}){let n=R.useContext(aN);qe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=gN("useViewTransitionState"),a=fu(t,{relative:e});if(!n.isTransitioning)return!1;let i=Jr(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Jr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ih(a.pathname,s)!=null||Ih(a.pathname,i)!=null}const yN=R.createContext(),sa=()=>{const t=R.useContext(yN);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},T4=({children:t})=>{const[e,n]=R.useState("en"),a={language:e,setLanguage:n,changeLanguage:i=>{n(i)}};return l.jsx(yN.Provider,{value:a,children:t})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),_x=t=>{const e=N4(t);return e.charAt(0).toUpperCase()+e.slice(1)},vN=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),A4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},u)=>R.createElement("svg",{ref:u,...C4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:vN("lucide",a),...!i&&!A4(o)&&{"aria-hidden":"true"},...o},[...s.map(([d,h])=>R.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=R.forwardRef(({className:r,...a},i)=>R.createElement(R4,{ref:i,iconNode:e,className:vN(`lucide-${S4(_x(t))}`,`lucide-${t}`,r),...a}));return n.displayName=_x(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],I4=ce("archive",D4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bx=ce("arrow-left",O4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],_N=ce("banknote",j4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pa=ce("calendar",k4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cf=ce("check",M4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],L4=ce("chevron-down",P4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],U4=ce("chevron-up",V4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],z4=ce("circle-alert",B4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vr=ce("circle-check",F4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ty=ce("circle-x",$4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bN=ce("clock",q4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],dd=ce("cloud-rain",H4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Y4=ce("cloud-snow",G4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Hl=ce("cloud",W4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ov=ce("copy",K4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Rf=ce("credit-card",Q4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],mu=ce("dollar-sign",X4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Z4=ce("external-link",J4);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],tM=ce("facebook",eM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Yn=ce("gift",nM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],xN=ce("globe",rM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],iM=ce("instagram",aM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],oM=ce("loader",sM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cM=ce("log-in",lM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],dM=ce("log-out",uM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xx=ce("mail",hM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ny=ce("map-pin",fM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],lv=ce("message-circle",mM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],wN=ce("message-square",pM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],yM=ce("party-popper",gM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],EN=ce("pen",vM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],TN=ce("plus",_M);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wx=ce("search",bM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ex=ce("sparkles",xM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],EM=ce("square-pen",wM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],SM=ce("sun",TM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Df=ce("trash-2",NM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],SN=ce("user-plus",AM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Do=ce("user",CM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cv=ce("users",RM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Tx=ce("wind",DM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hs=ce("x",IM),P={primary:{teal:"#00BCD4",black:"#2B2B2B",white:"#FFFFFF"},success:"#10b981",seat:{vacant:"#E5E7EB",occupied:"#10b981",selected:"#00BCD4"},button:{danger:"#ef4444"},gradient:{primary:"linear-gradient(135deg, #00BCD4 0%, #26C6DA 100%)"}},OM=()=>{const t=ds(),{language:e,changeLanguage:n}=sa(),[r,a]=R.useState(!1),[i,s]=R.useState({name:"",email:"",phone:"",destination:"",message:""});R.useEffect(()=>{sessionStorage.getItem("hasVisitedLanding")||(a(!0),sessionStorage.setItem("hasVisitedLanding","true"))},[]);const u={en:{welcome:"Welcome to IVRI Tours!",welcomeMsg:"Discover breathtaking destinations with expert tour guides in multiple languages. Your adventure begins here!",getStarted:"Get Started",heroTitle:"Explore North America with IVRI Tours",heroSubtitle:"Professional guided tours in English, Hebrew, and Russian",destinationsTitle:"Our Amazing Destinations",multiLang:"Multi-language Tours",duration:"Duration",groupSize:"Group Size",highlights:"Highlights",testimonialsTitle:"What People Say About Us",socialTitle:"Follow Our Adventures",socialDesc:"Stay connected with our latest tours, photos, and travel tips on social media!",visitFacebook:"Visit Facebook",visitInstagram:"Visit Instagram",contactTitle:"Contact Us",stats:{travelers:"Happy Travelers",tours:"Tours Completed",destinations:"Destinations",languages:"Languages"},nameLabel:"Name",emailLabel:"Email",phoneLabel:"Phone",destinationLabel:"Preferred Destination",messageLabel:"Message",submitBtn:"Send Message",footerText:"All rights reserved. Explore the world with us!",adminLogin:"Admin Login",destinations:{toronto:{title:"Toronto Downtown",desc:"Explore Canada's largest and most diverse city! Experience the iconic CN Tower with breathtaking 360 views, stroll along the beautiful harbourfront, discover the historic Distillery District, visit the Royal Ontario Museum, and immerse yourself in vibrant multicultural neighborhoods like Kensington Market and Chinatown.",duration:"8-10 hours",groupSize:"12-20 people",highlights:["CN Tower & Views","Harbourfront Walk","Distillery District","ROM Museum","Kensington Market"]},niagara:{title:"Niagara Falls",desc:"Witness the raw power and beauty of one of the world's most spectacular natural wonders! Get up close with the Hornblower boat tour, walk behind the falls at Journey Behind the Falls, enjoy panoramic views from Skylon Tower, explore the charming town of Niagara-on-the-Lake, and taste world-class wines at local vineyards.",duration:"Full Day (10-12 hours)",groupSize:"15-25 people",highlights:["Hornblower Boat Tour","Journey Behind Falls","Skylon Tower","Niagara-on-the-Lake","Wine Tasting"]},tremblant:{title:"mont-tremblant",desc:"Discover Quebec's premier four-season resort destination! Experience world-class skiing and snowboarding in winter, enjoy scenic gondola rides with stunning Laurentian views, explore the charming European-style pedestrian village, try exciting outdoor activities like hiking and zip-lining, and relax in the beautiful natural surroundings.",duration:"2-3 Days",groupSize:"10-18 people",highlights:["Skiing & Snowboarding","Scenic Gondola","Village Pedestrian","Outdoor Activities","Spa & Relaxation"]},quebec:{title:"Quebec City",desc:"Step into Europe without leaving North America! Wander through the UNESCO World Heritage Old Quebec with its cobblestone streets, visit the majestic Chteau Frontenac, explore the historic Citadelle fortification, discover the charming Quartier Petit Champlain, and savor authentic French-Canadian cuisine and culture.",duration:"2-3 Days",groupSize:"12-20 people",highlights:["Old Quebec UNESCO Site","Chteau Frontenac","Citadelle Tour","Petit Champlain","French Cuisine"]},barrie:{title:"Barrie & Lake Simcoe",desc:"Experience Ontario's beautiful lakeside gem! Enjoy stunning waterfront parks and beaches along Lake Simcoe, explore the historic downtown with unique shops and restaurants, visit Spirit Catcher sculpture and Centennial Park, experience seasonal activities like swimming in summer or ice fishing in winter.",duration:"6-8 hours",groupSize:"10-15 people",highlights:["Lake Simcoe Beach","Waterfront Parks","Downtown Shopping","Spirit Catcher","Seasonal Activities"]},detroit:{title:"Detroit",desc:"Discover the Motor City's incredible transformation! Visit the Henry Ford Museum and Greenfield Village, explore the stunning Detroit Institute of Arts, walk along the beautiful RiverWalk, tour the historic Fox Theatre, experience the vibrant Eastern Market, and learn about Motown's musical legacy.",duration:"Full Day (10-12 hours)",groupSize:"15-20 people",highlights:["Henry Ford Museum","DIA Art Museum","Detroit RiverWalk","Motown Museum","Eastern Market"]},chicago:{title:"Chicago",desc:"Experience the magnificent Windy City! Marvel at world-famous architecture on a river cruise, visit Millennium Park and the iconic Cloud Gate (Bean), explore Navy Pier and Lake Michigan shoreline, enjoy deep-dish pizza, discover Art Institute treasures, and take in breathtaking views from Willis Tower Skydeck.",duration:"2-3 Days",groupSize:"15-25 people",highlights:["Architecture River Cruise","Cloud Gate (Bean)","Navy Pier","Willis Tower Skydeck","Deep-Dish Pizza"]}},testimonials:[{text:"Amazing experience! The tour guide was knowledgeable and friendly. Seeing Niagara Falls was a dream come true!",author:"Sarah M."},{text:"The multi-language support made everything so comfortable for our family. Highly recommend IVRI Tours!",author:"David L."},{text:"Quebec City tour was magical! Our guide shared fascinating stories and insider tips. Best vacation ever!",author:"Rachel K."},{text:"Professional, organized, and fun! The Chicago architecture tour exceeded all expectations. Thank you IVRI Tours!",author:"Michael R."}]},he:{welcome:"  -IVRI Tours!",welcomeMsg:"         .    !",getStarted:" ",heroTitle:"     IVRI Tours",heroSubtitle:"   ,  ",destinationsTitle:"  ",multiLang:"  ",duration:"",groupSize:" ",highlights:"",testimonialsTitle:"  ",socialTitle:"   ",socialDesc:"    ,    !",visitFacebook:" ",visitInstagram:" ",contactTitle:" ",stats:{travelers:" ",tours:" ",destinations:"",languages:""},nameLabel:"",emailLabel:"",phoneLabel:"",destinationLabel:" ",messageLabel:"",submitBtn:" ",footerText:"  .    !",adminLogin:" ",destinations:{toronto:{title:" ",desc:"      !    CN    360  ,    ,     ,        - .",duration:"8-10 ",groupSize:"12-20 ",highlights:[" CN "," "," "," ROM"," "]},niagara:{title:" ",desc:"         !     Hornblower,   ,     Skylon,     Niagara-on-the-Lake    .",duration:"  (10-12 )",groupSize:"15-25 ",highlights:["  Hornblower","  "," Skylon","Niagara-on-the-Lake"," "]},tremblant:{title:" ",desc:"        !      ,        ,           .",duration:"2-3 ",groupSize:"10-18 ",highlights:[" "," ","  "," "," "]},quebec:{title:" ",desc:'      !         "   ,    ,       - .',duration:"2-3 ",groupSize:"12-20 ",highlights:["  "," "," "," "," "]},barrie:{title:"  ",desc:"     !        ,         ,   Spirit Catcher  Centennial.",duration:"6-8 ",groupSize:"10-15 ",highlights:["  "," "," ","Spirit Catcher"," "]},detroit:{title:"",desc:"      !    ,       ,   -RiverWalk ,   Fox      .",duration:"  (10-12 )",groupSize:"15-20 ",highlights:["  "," DIA","Detroit RiverWalk"," ","Eastern Market"]},chicago:{title:"",desc:"    !     ,    -Cloud Gate ,   Navy Pier   ,         Willis.",duration:"2-3 ",groupSize:"15-25 ",highlights:["  ","Cloud Gate (Bean)","Navy Pier","Willis Tower Skydeck"," "]}},testimonials:[{text:" !     .       !",author:" ."},{text:" -        .    IVRI Tours!",author:" ."},{text:"    !       .     !",author:" ."},{text:",  !       .  IVRI Tours!",author:" ."}]},ru:{welcome:"   IVRI Tours!",welcomeMsg:"           .    !",getStarted:"",heroTitle:"    IVRI Tours",heroSubtitle:"   ,    ",destinationsTitle:"  ",multiLang:" ",duration:"",groupSize:" ",highlights:" ",testimonialsTitle:"   ",socialTitle:"   ",socialDesc:"     ,      !",visitFacebook:" Facebook",visitInstagram:" Instagram",contactTitle:"  ",stats:{travelers:" ",tours:" ",destinations:"",languages:""},nameLabel:"",emailLabel:" ",phoneLabel:"",destinationLabel:" ",messageLabel:"",submitBtn:" ",footerText:"  .     !",adminLogin:" ",destinations:{toronto:{title:" ",desc:"      !    CN     360,    ,      Distillery,          .",duration:"8-10 ",groupSize:"12-20 ",highlights:[" CN  ","  "," Distillery"," ROM"," "]},niagara:{title:" ",desc:"          !     Hornblower,     Journey Behind the Falls,      Skylon,    ---     .",duration:"  (10-12 )",groupSize:"15-25 ",highlights:["  Hornblower"," "," Skylon","---"," "]},tremblant:{title:"-",desc:"      !       ,          ,              .",duration:"2-3 ",groupSize:"10-18 ",highlights:["  "," "," "," ","  "]},quebec:{title:"-",desc:"  ,    !    ,    ,    ,    ,   ,      -    - .",duration:"2-3 ",groupSize:"12-20 ",highlights:["  "," ","  ","-"," "]},barrie:{title:"   ",desc:"      !         ,         ,   Spirit Catcher   Centennial.",duration:"6-8 ",groupSize:"10-15 ",highlights:["  "," ","  ","Spirit Catcher"," "]},detroit:{title:"",desc:"     -!      -,     ,     RiverWalk,      Fox      Motown.",duration:"  (10-12 )",groupSize:"15-20 ",highlights:["  ","  DIA","Detroit RiverWalk"," Motown","Eastern Market"]},chicago:{title:"",desc:"   !        ,  -   Cloud Gate (Bean),  Navy Pier     ,         Willis Tower Skydeck.",duration:"2-3 ",groupSize:"15-25 ",highlights:[" ","Cloud Gate (Bean)","Navy Pier","Willis Tower Skydeck"," "]}},testimonials:[{text:" !     .      !",author:" ."},{text:"        .   IVRI Tours!",author:" ."},{text:"    !        .    !",author:" ."},{text:",   !       .  IVRI Tours!",author:" ."}]}}[e],h={en:{giftCardTitle:"Give the Gift of Travel",giftCardDesc:"Share unforgettable experiences with IVRI Tours gift cards",purchaseGiftCard:"Purchase Gift Card"},he:{giftCardTitle:"    ",giftCardDesc:"        IVRI Tours",purchaseGiftCard:"  "},ru:{giftCardTitle:" ",giftCardDesc:"      IVRI Tours",purchaseGiftCard:"  "}}[e],f=[{key:"toronto",image:"https://images.unsplash.com/photo-1517935706615-2717063c2225?w=800&q=80"},{key:"niagara",image:"https://images.unsplash.com/photo-1489447068241-b3490214e879?w=800&q=80"},{key:"tremblant",image:"https://images.unsplash.com/photo-1729477458908-0a59d8026ed8?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{key:"quebec",image:"https://images.unsplash.com/photo-1519451241324-20b4ea2c4220?w=800&q=80"},{key:"barrie",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&q=80"},{key:"detroit",image:"https://images.unsplash.com/photo-1590859808308-3d2d9c515b1a?w=800&q=80"},{key:"chicago",image:"https://images.unsplash.com/photo-1494522358652-f30e61a60313?w=800&q=80"}],p=["https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200&q=80","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&q=80","https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=200&q=80","https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=200&q=80"],y=w=>{w.preventDefault(),alert({en:"Thank you for your message! We will contact you soon.",he:"  !    .",ru:"   !     ."}[e]),s({name:"",email:"",phone:"",destination:"",message:""})};return l.jsxs("div",{className:"min-h-screen bg-white",dir:e==="he"?"rtl":"ltr",children:[r&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 px-4 animate-fadeIn",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-lg w-full text-center shadow-2xl animate-slideDown",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-3xl font-bold mb-4",style:{color:P.primary.teal},children:u.welcome}),l.jsx("p",{className:"text-lg text-gray-600 mb-6",children:u.welcomeMsg}),l.jsx("button",{onClick:()=>a(!1),className:"px-8 py-3 text-white rounded-lg text-lg font-semibold hover:opacity-90 transition-opacity",style:{backgroundColor:P.primary.teal},children:u.getStarted})]})}),l.jsx("nav",{className:"bg-white shadow-md sticky top-0 z-40",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:"text-3xl font-bold",style:{color:P.primary.teal},children:"IVRI Tours"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>t("/gift-card-purchase"),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium hover:opacity-90 transition-opacity",style:{backgroundColor:P.primary.teal},children:[l.jsx(Yn,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:h.purchaseGiftCard}),l.jsx("span",{className:"sm:hidden",children:"Gift"})]}),l.jsx("button",{onClick:()=>n("en"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${e==="en"?"text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,style:e==="en"?{backgroundColor:P.primary.teal}:{},children:"English"}),l.jsx("button",{onClick:()=>n("he"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${e==="he"?"text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,style:e==="he"?{backgroundColor:P.primary.teal}:{},children:""}),l.jsx("button",{onClick:()=>n("ru"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${e==="ru"?"text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,style:e==="ru"?{backgroundColor:P.primary.teal}:{},children:""})]})]})})}),l.jsx("section",{className:"py-20 px-4 text-center text-white",style:{background:`linear-gradient(135deg, ${P.primary.teal} 0%, #0097A7 100%)`},children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-6",children:u.heroTitle}),l.jsx("p",{className:"text-xl sm:text-2xl opacity-95",children:u.heroSubtitle})]})}),l.jsxs("section",{className:"py-16 px-4 max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-4xl font-bold text-center mb-12",style:{color:P.primary.teal},children:u.destinationsTitle}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:f.map(w=>l.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:[l.jsx("div",{className:"h-64 bg-cover bg-center",style:{backgroundImage:`url(${w.image})`}}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-2xl font-bold mb-3",style:{color:P.primary.teal},children:u.destinations[w.key].title}),l.jsx("p",{className:"text-gray-600 leading-relaxed mb-4 text-sm",children:u.destinations[w.key].desc}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[l.jsx(bN,{className:"w-4 h-4",style:{color:P.primary.teal}}),l.jsxs("span",{className:"font-semibold",children:[u.duration,":"]})," ",u.destinations[w.key].duration]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[l.jsx(cv,{className:"w-4 h-4",style:{color:P.primary.teal}}),l.jsxs("span",{className:"font-semibold",children:[u.groupSize,":"]})," ",u.destinations[w.key].groupSize]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:[u.highlights,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:u.destinations[w.key].highlights.map((N,A)=>l.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-white text-xs",style:{backgroundColor:P.primary.teal},children:N},A))})]}),l.jsxs("span",{className:"inline-block px-4 py-2 rounded-full text-white text-sm font-medium mt-2",style:{backgroundColor:P.primary.teal},children:[" ",u.multiLang]})]})]},w.key))})]}),l.jsx("section",{className:"py-16 px-4 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsx("h2",{className:"text-4xl font-bold text-center mb-12",style:{color:P.primary.teal},children:u.testimonialsTitle}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.testimonials.map((w,N)=>l.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg text-center",children:[l.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 bg-cover bg-center",style:{backgroundImage:`url(${p[N]})`,border:`3px solid ${P.primary.teal}`}}),l.jsxs("p",{className:"text-gray-600 italic mb-4 leading-relaxed",children:['"',w.text,'"']}),l.jsx("h4",{className:"font-bold",style:{color:P.primary.teal},children:w.author})]},N))})]})}),l.jsx("section",{className:"py-16 px-4 bg-white",children:l.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[l.jsx("h2",{className:"text-4xl font-bold mb-4",style:{color:P.primary.teal},children:u.socialTitle}),l.jsx("p",{className:"text-xl text-gray-600 mb-8",children:u.socialDesc}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[l.jsxs("a",{href:"https://www.facebook.com/Ivritours/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-8 py-4 text-white text-lg font-bold rounded-lg hover:opacity-90 transition-opacity shadow-lg",style:{backgroundColor:"#1877F2"},children:[l.jsx(tM,{className:"w-6 h-6"}),u.visitFacebook]}),l.jsxs("a",{href:"https://www.instagram.com/ivritours_ca/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-8 py-4 text-white text-lg font-bold rounded-lg hover:opacity-90 transition-opacity shadow-lg",style:{background:"linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%)"},children:[l.jsx(iM,{className:"w-6 h-6"}),u.visitInstagram]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 shadow-inner",children:[l.jsxs("div",{className:"text-gray-500 mb-6",children:[l.jsx("p",{className:"text-lg font-semibold mb-2",children:"Connect with us:"}),l.jsx("p",{className:"mb-1",children:"Facebook: @Ivritours"}),l.jsx("p",{children:"Instagram: @ivritours_ca"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[l.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[l.jsx("div",{className:"text-3xl font-bold",style:{color:P.primary.teal},children:"1000+"}),l.jsx("div",{className:"text-sm text-gray-600",children:u.stats.travelers})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[l.jsx("div",{className:"text-3xl font-bold",style:{color:P.primary.teal},children:"100+"}),l.jsx("div",{className:"text-sm text-gray-600",children:u.stats.tours})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[l.jsx("div",{className:"text-3xl font-bold",style:{color:P.primary.teal},children:"7"}),l.jsx("div",{className:"text-sm text-gray-600",children:u.stats.destinations})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[l.jsx("div",{className:"text-3xl font-bold",style:{color:P.primary.teal},children:"3"}),l.jsx("div",{className:"text-sm text-gray-600",children:u.stats.languages})]})]})]})]})}),l.jsxs("section",{className:"py-16 px-4 max-w-4xl mx-auto",children:[l.jsx("h2",{className:"text-4xl font-bold text-center mb-12",style:{color:P.primary.teal},children:u.contactTitle}),l.jsxs("form",{onSubmit:y,className:"bg-white rounded-xl shadow-lg p-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[u.nameLabel," *"]}),l.jsx("input",{type:"text",value:i.name,onChange:w=>s({...i,name:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#00BCD4] focus:outline-none transition-colors",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[u.emailLabel," *"]}),l.jsx("input",{type:"email",value:i.email,onChange:w=>s({...i,email:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#00BCD4] focus:outline-none transition-colors",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:u.phoneLabel}),l.jsx("input",{type:"tel",value:i.phone,onChange:w=>s({...i,phone:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#00BCD4] focus:outline-none transition-colors"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:u.destinationLabel}),l.jsx("input",{type:"text",value:i.destination,onChange:w=>s({...i,destination:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#00BCD4] focus:outline-none transition-colors"})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[u.messageLabel," *"]}),l.jsx("textarea",{value:i.message,onChange:w=>s({...i,message:w.target.value}),rows:"6",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-[#00BCD4] focus:outline-none transition-colors resize-vertical",required:!0})]}),l.jsx("button",{type:"submit",className:"w-full py-4 text-white text-lg font-bold rounded-lg hover:opacity-90 transition-opacity",style:{backgroundColor:P.primary.teal},children:u.submitBtn})]})]}),l.jsx("footer",{className:"bg-gray-900 text-white py-8 px-4",children:l.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[l.jsx("div",{className:"text-2xl font-bold mb-4",style:{color:P.primary.teal},children:"IVRI Tours"}),l.jsxs("p",{className:"text-gray-400 mb-4",children:[" 2025 IVRI Tours. ",u.footerText]}),l.jsx("button",{onClick:()=>t("/login"),className:"text-sm hover:underline",style:{color:P.primary.teal},children:u.adminLogin})]})}),l.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
        .animate-slideDown { animation: slideDown 0.5s ease-out; }
      `})]})};function NN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=NN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function If(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=NN(t))&&(r&&(r+=" "),r+=e);return r}const jM=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const a=Object.getOwnPropertyDescriptor(t,n),i=Object.getOwnPropertyDescriptor(e,n);!kM(a,i)&&r||Object.defineProperty(t,n,i)},kM=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},MM=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},PM=(t,e)=>`/* Wrapped ${t}*/
${e}`,LM=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),VM=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),UM=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,a=PM.bind(null,r,e.toString());Object.defineProperty(a,"name",VM);const{writable:i,enumerable:s,configurable:o}=LM;Object.defineProperty(t,"toString",{value:a,writable:i,enumerable:s,configurable:o})};function BM(t,e,{ignoreNonConfigurable:n=!1}={}){const{name:r}=t;for(const a of Reflect.ownKeys(e))jM(t,e,a,n);return MM(t,e),UM(t,e,r),t}const hd=2147483647,zM=new WeakMap,Rp=new WeakMap,FM=new WeakMap;function $M(t,e){const n=t.get(e);if(n){if(n.maxAge<=Date.now()){t.delete(e);return}return n}}function AN(t,{cacheKey:e,cache:n=new Map,maxAge:r}={}){if(r===0)return t;if(typeof r=="number"&&Number.isFinite(r)){if(r>hd)throw new TypeError(`The \`maxAge\` option cannot exceed ${hd}.`);if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const a=function(...i){var h;const s=e?e(i):i[0],o=$M(n,s);if(o)return o.data;const u=t.apply(this,i),d=typeof r=="function"?r(...i):r;if(d!==void 0&&d!==Number.POSITIVE_INFINITY){if(!Number.isFinite(d))throw new TypeError("The `maxAge` function must return a finite number, `0`, or `Infinity`.");if(d<=0)return u;if(d>hd)throw new TypeError(`The \`maxAge\` function result cannot exceed ${hd}.`)}if(n.set(s,{data:u,maxAge:d===void 0||d===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:Date.now()+d}),d!==void 0&&d!==Number.POSITIVE_INFINITY){const f=setTimeout(()=>{var y;n.delete(s),(y=Rp.get(a))==null||y.delete(f)},d);(h=f.unref)==null||h.call(f);const p=Rp.get(a)??new Set;p.add(f),Rp.set(a,p)}return u};return BM(a,t,{ignoreNonConfigurable:!0}),zM.set(a,n),FM.set(a,e??(i=>i[0])),a}function qM(t){return typeof t=="string"}function HM(t,e,n){return n.indexOf(t)===e}function GM(t){return t.toLowerCase()===t}function Sx(t){return t.indexOf(",")===-1?t:t.split(",")}function ry(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return ry(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return ry(n)}if(t.indexOf("-")===-1||!GM(t))return t;var a=t.split("-"),i=a[0],s=a[1],o=s===void 0?"":s;return"".concat(i,"-").concat(o.toUpperCase())}function YM(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,a=e.fallbackLocale,i=a===void 0?"en-US":a,s=[];if(typeof navigator<"u"){for(var o=navigator.languages||[],u=[],d=0,h=o;d<h.length;d++){var f=h[d];u=u.concat(Sx(f))}var p=navigator.language,y=p&&Sx(p);s=s.concat(u,y)}return r&&s.push(i),s.filter(qM).map(ry).filter(HM)}var WM=AN(YM,{cacheKey:JSON.stringify});function KM(t){return WM(t)[0]||null}var CN=AN(KM,{cacheKey:JSON.stringify});function oa(t,e,n){return function(a,i=n){const s=t(a)+i;return e(s)}}function pu(t){return function(n){return new Date(t(n).getTime()-1)}}function gu(t,e){return function(r){return[t(r),e(r)]}}function He(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;const e=Number.parseInt(t,10);if(typeof t=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${t}.`)}function hi(t){if(t instanceof Date)return t.getMonth();throw new Error(`Failed to get month from date: ${t}.`)}function Of(t){if(t instanceof Date)return t.getDate();throw new Error(`Failed to get year from date: ${t}.`)}function Jo(t){const e=He(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const QM=oa(He,Jo,-100),RN=oa(He,Jo,100),uv=pu(RN),XM=oa(He,uv,-100),DN=gu(Jo,uv);function fi(t){const e=He(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const IN=oa(He,fi,-10),dv=oa(He,fi,10),jf=pu(dv),ON=oa(He,jf,-10),jN=gu(fi,jf);function Zo(t){const e=He(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}const kN=oa(He,Zo,-1),hv=oa(He,Zo,1),kf=pu(hv),MN=oa(He,kf,-1),JM=gu(Zo,kf);function fv(t,e){return function(r,a=e){const i=He(r),s=hi(r)+a,o=new Date;return o.setFullYear(i,s,1),o.setHours(0,0,0,0),t(o)}}function fs(t){const e=He(t),n=hi(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}const PN=fv(fs,-1),mv=fv(fs,1),yu=pu(mv),LN=fv(yu,-1),ZM=gu(fs,yu);function eP(t,e){return function(r,a=e){const i=He(r),s=hi(r),o=Of(r)+a,u=new Date;return u.setFullYear(i,s,o),u.setHours(0,0,0,0),t(u)}}function vu(t){const e=He(t),n=hi(t),r=Of(t),a=new Date;return a.setFullYear(e,n,r),a.setHours(0,0,0,0),a}const tP=eP(vu,1),pv=pu(tP),nP=gu(vu,pv);function VN(t){return Of(yu(t))}var It={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},rP={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},gv=[0,1,2,3,4,5,6],Dp=new Map;function aP(t){return function(n,r){var a=n||CN();Dp.has(a)||Dp.set(a,new Map);var i=Dp.get(a);return i.has(t)||i.set(t,new Intl.DateTimeFormat(a||void 0,t).format),i.get(t)(r)}}function iP(t){var e=new Date(t);return new Date(e.setHours(12))}function ms(t){return function(e,n){return aP(t)(e,iP(n))}}var sP={day:"numeric"},oP={day:"numeric",month:"long",year:"numeric"},lP={month:"long"},cP={month:"long",year:"numeric"},uP={weekday:"short"},dP={weekday:"long"},hP={year:"numeric"},fP=ms(sP),mP=ms(oP),pP=ms(lP),UN=ms(cP),gP=ms(uP),yP=ms(dP),Mf=ms(hP),vP=gv[0],_P=gv[5],Nx=gv[6];function $c(t,e){e===void 0&&(e=It.ISO_8601);var n=t.getDay();switch(e){case It.ISO_8601:return(n+6)%7;case It.ISLAMIC:return(n+1)%7;case It.HEBREW:case It.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function bP(t){var e=Jo(t);return He(e)}function xP(t){var e=fi(t);return He(e)}function ay(t,e){e===void 0&&(e=It.ISO_8601);var n=He(t),r=hi(t),a=t.getDate()-$c(t,e);return new Date(n,r,a)}function wP(t,e){e===void 0&&(e=It.ISO_8601);var n=e===It.GREGORY?It.GREGORY:It.ISO_8601,r=ay(t,e),a=He(t)+1,i,s;do i=new Date(a,0,n===It.ISO_8601?4:1),s=ay(i,e),a-=1;while(t<s);return Math.round((r.getTime()-s.getTime())/(864e5*7))+1}function Hi(t,e){switch(t){case"century":return Jo(e);case"decade":return fi(e);case"year":return Zo(e);case"month":return fs(e);case"day":return vu(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function EP(t,e){switch(t){case"century":return QM(e);case"decade":return IN(e);case"year":return kN(e);case"month":return PN(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function BN(t,e){switch(t){case"century":return RN(e);case"decade":return dv(e);case"year":return hv(e);case"month":return mv(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function TP(t,e){switch(t){case"decade":return IN(e,-100);case"year":return kN(e,-10);case"month":return PN(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function SP(t,e){switch(t){case"decade":return dv(e,100);case"year":return hv(e,10);case"month":return mv(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function zN(t,e){switch(t){case"century":return uv(e);case"decade":return jf(e);case"year":return kf(e);case"month":return yu(e);case"day":return pv(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function NP(t,e){switch(t){case"century":return XM(e);case"decade":return ON(e);case"year":return MN(e);case"month":return LN(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function AP(t,e){switch(t){case"decade":return ON(e,-100);case"year":return MN(e,-10);case"month":return LN(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function Ax(t,e){switch(t){case"century":return DN(e);case"decade":return jN(e);case"year":return JM(e);case"month":return ZM(e);case"day":return nP(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function CP(t,e,n){var r=[e,n].sort(function(a,i){return a.getTime()-i.getTime()});return[Hi(t,r[0]),zN(t,r[1])]}function FN(t,e,n){return n.map(function(r){return(e||Mf)(t,r)}).join("  ")}function RP(t,e,n){return FN(t,e,DN(n))}function $N(t,e,n){return FN(t,e,jN(n))}function DP(t){return t.getDay()===new Date().getDay()}function qN(t,e){e===void 0&&(e=It.ISO_8601);var n=t.getDay();switch(e){case It.ISLAMIC:case It.HEBREW:return n===_P||n===Nx;case It.ISO_8601:case It.GREGORY:return n===Nx||n===vP;default:throw new Error("Unsupported calendar type.")}}var lr="react-calendar__navigation";function IP(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,a=r===void 0?UN:r,i=t.formatYear,s=i===void 0?Mf:i,o=t.locale,u=t.maxDate,d=t.minDate,h=t.navigationAriaLabel,f=h===void 0?"":h,p=t.navigationAriaLive,y=t.navigationLabel,w=t.next2AriaLabel,N=w===void 0?"":w,A=t.next2Label,_=A===void 0?"":A,x=t.nextAriaLabel,E=x===void 0?"":x,I=t.nextLabel,V=I===void 0?"":I,q=t.prev2AriaLabel,S=q===void 0?"":q,v=t.prev2Label,b=v===void 0?"":v,C=t.prevAriaLabel,O=C===void 0?"":C,j=t.prevLabel,D=j===void 0?"":j,ie=t.setActiveStartDate,Y=t.showDoubleView,k=t.view,U=t.views,H=U.indexOf(k)>0,G=k!=="century",K=EP(k,e),ee=G?TP(k,e):void 0,z=BN(k,e),J=G?SP(k,e):void 0,ue=function(){if(K.getFullYear()<0)return!0;var Qe=NP(k,e);return d&&d>=Qe}(),me=G&&function(){if(ee.getFullYear()<0)return!0;var Qe=AP(k,e);return d&&d>=Qe}(),Tt=u&&u<z,er=G&&u&&u<J;function tr(){ie(K,"prev")}function Fn(){ie(ee,"prev2")}function fl(){ie(z,"next")}function ml(){ie(J,"next2")}function bi(Qe){var wi=function(){switch(k){case"century":return RP(o,s,Qe);case"decade":return $N(o,s,Qe);case"year":return s(o,Qe);case"month":return a(o,Qe);default:throw new Error("Invalid view: ".concat(k,"."))}}();return y?y({date:Qe,label:wi,locale:o||CN()||void 0,view:k}):wi}function xi(){var Qe="".concat(lr,"__label");return l.jsxs("button",{"aria-label":f,"aria-live":p,className:Qe,disabled:!H,onClick:n,style:{flexGrow:1},type:"button",children:[l.jsx("span",{className:"".concat(Qe,"__labelText ").concat(Qe,"__labelText--from"),children:bi(e)}),Y?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"".concat(Qe,"__divider"),children:"  "}),l.jsx("span",{className:"".concat(Qe,"__labelText ").concat(Qe,"__labelText--to"),children:bi(z)})]}):null]})}return l.jsxs("div",{className:lr,children:[b!==null&&G?l.jsx("button",{"aria-label":S,className:"".concat(lr,"__arrow ").concat(lr,"__prev2-button"),disabled:me,onClick:Fn,type:"button",children:b}):null,D!==null&&l.jsx("button",{"aria-label":O,className:"".concat(lr,"__arrow ").concat(lr,"__prev-button"),disabled:ue,onClick:tr,type:"button",children:D}),xi(),V!==null&&l.jsx("button",{"aria-label":E,className:"".concat(lr,"__arrow ").concat(lr,"__next-button"),disabled:Tt,onClick:fl,type:"button",children:V}),_!==null&&G?l.jsx("button",{"aria-label":N,className:"".concat(lr,"__arrow ").concat(lr,"__next2-button"),disabled:er,onClick:ml,type:"button",children:_}):null]})}var no=function(){return no=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},no.apply(this,arguments)},OP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};function Cx(t){return"".concat(t,"%")}function yv(t){var e=t.children,n=t.className,r=t.count,a=t.direction,i=t.offset,s=t.style,o=t.wrap,u=OP(t,["children","className","count","direction","offset","style","wrap"]);return l.jsx("div",no({className:n,style:no({display:"flex",flexDirection:a,flexWrap:o?"wrap":"nowrap"},s)},u,{children:R.Children.map(e,function(d,h){var f=i&&h===0?Cx(100*i/r):null;return R.cloneElement(d,no(no({},d.props),{style:{flexBasis:Cx(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))})}))}function jP(t,e,n){return e&&e>t?e:n&&n<t?n:t}function qc(t,e){return e[0]<=t&&e[1]>=t}function kP(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function HN(t,e){return qc(t[0],e)||qc(t[1],e)}function Rx(t,e,n){var r=HN(e,t),a=[];if(r){a.push(n);var i=qc(t[0],e),s=qc(t[1],e);i&&a.push("".concat(n,"Start")),s&&a.push("".concat(n,"End")),i&&s&&a.push("".concat(n,"BothEnds"))}return a}function MP(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function PP(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,a="react-calendar__tile",i=[a];if(!n)return i;var s=new Date,o=function(){if(Array.isArray(n))return n;var y=t.dateType;if(!y)throw new Error("dateType is required when date is not an array of two dates");return Ax(y,n)}();if(qc(s,o)&&i.push("".concat(a,"--now")),!e||!MP(e))return i;var u=function(){if(Array.isArray(e))return e;var y=t.valueType;if(!y)throw new Error("valueType is required when value is not an array of two dates");return Ax(y,e)}();kP(u,o)?i.push("".concat(a,"--active")):HN(u,o)&&i.push("".concat(a,"--hasActive"));var d=Rx(u,o,"".concat(a,"--range"));i.push.apply(i,d);var h=Array.isArray(e)?e:[e];if(r&&h.length===1){var f=r>u[0]?[u[0],r]:[r,u[0]],p=Rx(f,o,"".concat(a,"--hover"));i.push.apply(i,p)}return i}function Pf(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,a=t.dateTransform,i=t.dateType,s=t.end,o=t.hover,u=t.offset,d=t.renderTile,h=t.start,f=t.step,p=f===void 0?1:f,y=t.value,w=t.valueType,N=[],A=h;A<=s;A+=p){var _=a(A);N.push(d({classes:PP({date:_,dateType:i,hover:o,value:y,valueType:w}),date:_}))}return l.jsx(yv,{className:e,count:r,offset:u,wrap:!0,children:N})}function Lf(t){var e=t.activeStartDate,n=t.children,r=t.classes,a=t.date,i=t.formatAbbr,s=t.locale,o=t.maxDate,u=t.maxDateTransform,d=t.minDate,h=t.minDateTransform,f=t.onClick,p=t.onMouseOver,y=t.style,w=t.tileClassName,N=t.tileContent,A=t.tileDisabled,_=t.view,x=R.useMemo(function(){var I={activeStartDate:e,date:a,view:_};return typeof w=="function"?w(I):w},[e,a,w,_]),E=R.useMemo(function(){var I={activeStartDate:e,date:a,view:_};return typeof N=="function"?N(I):N},[e,a,N,_]);return l.jsxs("button",{className:If(r,x),disabled:d&&h(d)>a||o&&u(o)<a||(A==null?void 0:A({activeStartDate:e,date:a,view:_})),onClick:f?function(I){return f(a,I)}:void 0,onFocus:p?function(){return p(a)}:void 0,onMouseOver:p?function(){return p(a)}:void 0,style:y,type:"button",children:[i?l.jsx("abbr",{"aria-label":i(s,a),children:n}):n,E]})}var iy=function(){return iy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},iy.apply(this,arguments)},LP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n},Dx="react-calendar__century-view__decades__decade";function VP(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,a=t.formatYear,i=a===void 0?Mf:a,s=LP(t,["classes","currentCentury","formatYear"]),o=s.date,u=s.locale,d=[];return n&&d.push.apply(d,n),d.push(Dx),Jo(o).getFullYear()!==r&&d.push("".concat(Dx,"--neighboringCentury")),l.jsx(Lf,iy({},s,{classes:d,maxDateTransform:jf,minDateTransform:fi,view:"century",children:$N(u,i,o)}))}var sy=function(){return sy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},sy.apply(this,arguments)},Ix=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};function UP(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,a=t.value,i=t.valueType,s=Ix(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),o=bP(e),u=o+(r?119:99);return l.jsx(Pf,{className:"react-calendar__century-view__decades",dateTransform:fi,dateType:"decade",end:u,hover:n,renderTile:function(d){var h=d.date,f=Ix(d,["date"]);return l.jsx(VP,sy({},s,f,{activeStartDate:e,currentCentury:o,date:h}),h.getTime())},start:o,step:10,value:a,valueType:i})}var oy=function(){return oy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},oy.apply(this,arguments)};function BP(t){function e(){return l.jsx(UP,oy({},t))}return l.jsx("div",{className:"react-calendar__century-view",children:e()})}var ly=function(){return ly=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},ly.apply(this,arguments)},zP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n},Ox="react-calendar__decade-view__years__year";function FP(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,a=t.formatYear,i=a===void 0?Mf:a,s=zP(t,["classes","currentDecade","formatYear"]),o=s.date,u=s.locale,d=[];return n&&d.push.apply(d,n),d.push(Ox),fi(o).getFullYear()!==r&&d.push("".concat(Ox,"--neighboringDecade")),l.jsx(Lf,ly({},s,{classes:d,maxDateTransform:kf,minDateTransform:Zo,view:"decade",children:i(u,o)}))}var cy=function(){return cy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},cy.apply(this,arguments)},jx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};function $P(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,a=t.value,i=t.valueType,s=jx(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),o=xP(e),u=o+(r?11:9);return l.jsx(Pf,{className:"react-calendar__decade-view__years",dateTransform:Zo,dateType:"year",end:u,hover:n,renderTile:function(d){var h=d.date,f=jx(d,["date"]);return l.jsx(FP,cy({},s,f,{activeStartDate:e,currentDecade:o,date:h}),h.getTime())},start:o,value:a,valueType:i})}var uy=function(){return uy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},uy.apply(this,arguments)};function qP(t){function e(){return l.jsx($P,uy({},t))}return l.jsx("div",{className:"react-calendar__decade-view",children:e()})}var dy=function(){return dy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},dy.apply(this,arguments)},HP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n},kx=function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},GP="react-calendar__year-view__months__month";function YP(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,a=r===void 0?pP:r,i=t.formatMonthYear,s=i===void 0?UN:i,o=HP(t,["classes","formatMonth","formatMonthYear"]),u=o.date,d=o.locale;return l.jsx(Lf,dy({},o,{classes:kx(kx([],n,!0),[GP],!1),formatAbbr:s,maxDateTransform:yu,minDateTransform:fs,view:"year",children:a(d,u)}))}var hy=function(){return hy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},hy.apply(this,arguments)},Mx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};function WP(t){var e=t.activeStartDate,n=t.hover,r=t.value,a=t.valueType,i=Mx(t,["activeStartDate","hover","value","valueType"]),s=0,o=11,u=He(e);return l.jsx(Pf,{className:"react-calendar__year-view__months",dateTransform:function(d){var h=new Date;return h.setFullYear(u,d,1),fs(h)},dateType:"month",end:o,hover:n,renderTile:function(d){var h=d.date,f=Mx(d,["date"]);return l.jsx(YP,hy({},i,f,{activeStartDate:e,date:h}),h.getTime())},start:s,value:r,valueType:a})}var fy=function(){return fy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},fy.apply(this,arguments)};function KP(t){function e(){return l.jsx(WP,fy({},t))}return l.jsx("div",{className:"react-calendar__year-view",children:e()})}var my=function(){return my=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},my.apply(this,arguments)},QP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n},Ip="react-calendar__month-view__days__day";function XP(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,a=t.currentMonthIndex,i=t.formatDay,s=i===void 0?fP:i,o=t.formatLongDate,u=o===void 0?mP:o,d=QP(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=d.date,f=d.locale,p=[];return r&&p.push.apply(p,r),p.push(Ip),qN(h,e)&&p.push("".concat(Ip,"--weekend")),h.getMonth()!==a&&p.push("".concat(Ip,"--neighboringMonth")),l.jsx(Lf,my({},d,{classes:p,formatAbbr:u,maxDateTransform:pv,minDateTransform:vu,view:"month",children:s(f,h)}))}var py=function(){return py=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},py.apply(this,arguments)},Px=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};function JP(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,a=t.showFixedNumberOfWeeks,i=t.showNeighboringMonth,s=t.value,o=t.valueType,u=Px(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),d=He(e),h=hi(e),f=a||i,p=$c(e,n),y=f?0:p,w=(f?-p:0)+1,N=function(){if(a)return w+6*7-1;var A=VN(e);if(i){var _=new Date;_.setFullYear(d,h,A),_.setHours(0,0,0,0);var x=7-$c(_,n)-1;return A+x}return A}();return l.jsx(Pf,{className:"react-calendar__month-view__days",count:7,dateTransform:function(A){var _=new Date;return _.setFullYear(d,h,A),vu(_)},dateType:"day",hover:r,end:N,renderTile:function(A){var _=A.date,x=Px(A,["date"]);return l.jsx(XP,py({},u,x,{activeStartDate:e,calendarType:n,currentMonthIndex:h,date:_}),_.getTime())},offset:y,start:w,value:s,valueType:o})}var GN="react-calendar__month-view__weekdays",Op="".concat(GN,"__weekday");function ZP(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?gP:n,a=t.formatWeekday,i=a===void 0?yP:a,s=t.locale,o=t.onMouseLeave,u=new Date,d=fs(u),h=He(d),f=hi(d),p=[],y=1;y<=7;y+=1){var w=new Date(h,f,y-$c(d,e)),N=i(s,w);p.push(l.jsx("div",{className:If(Op,DP(w)&&"".concat(Op,"--current"),qN(w,e)&&"".concat(Op,"--weekend")),children:l.jsx("abbr",{"aria-label":N,title:N,children:r(s,w).replace(".","")})},y))}return l.jsx(yv,{className:GN,count:7,onFocus:o,onMouseOver:o,children:p})}var Oh=function(){return Oh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Oh.apply(this,arguments)},Lx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n},Vx="react-calendar__tile";function e3(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=l.jsx("span",{children:n});if(e){var a=t.date,i=t.onClickWeekNumber,s=t.weekNumber,o=Lx(t,["date","onClickWeekNumber","weekNumber"]);return l.jsx("button",Oh({},o,{className:Vx,onClick:function(u){return i(s,a,u)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var o=Lx(t,["date","onClickWeekNumber","weekNumber"]);return l.jsx("div",Oh({},o,{className:Vx,children:r}))}}function t3(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,a=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=function(){if(i)return 6;var d=VN(e),h=$c(e,n),f=d-(7-h);return 1+Math.ceil(f/7)}(),o=function(){for(var d=He(e),h=hi(e),f=Of(e),p=[],y=0;y<s;y+=1)p.push(ay(new Date(d,h,f+y*7),n));return p}(),u=o.map(function(d){return wP(d,n)});return l.jsx(yv,{className:"react-calendar__month-view__weekNumbers",count:s,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:u.map(function(d,h){var f=o[h];if(!f)throw new Error("date is not defined");return l.jsx(e3,{date:f,onClickWeekNumber:r,weekNumber:d},d)})})}var gy=function(){return gy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},gy.apply(this,arguments)},n3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};function r3(t){if(t)for(var e=0,n=Object.entries(rP);e<n.length;e++){var r=n[e],a=r[0],i=r[1];if(i.includes(t))return a}return It.ISO_8601}function a3(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,a=t.showFixedNumberOfWeeks,i=t.calendarType,s=i===void 0?r3(n):i,o=t.formatShortWeekday,u=t.formatWeekday,d=t.onClickWeekNumber,h=t.showWeekNumbers,f=n3(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function p(){return l.jsx(ZP,{calendarType:s,formatShortWeekday:o,formatWeekday:u,locale:n,onMouseLeave:r})}function y(){return h?l.jsx(t3,{activeStartDate:e,calendarType:s,onClickWeekNumber:d,onMouseLeave:r,showFixedNumberOfWeeks:a}):null}function w(){return l.jsx(JP,gy({calendarType:s},f))}var N="react-calendar__month-view";return l.jsx("div",{className:If(N,h?"".concat(N,"--weekNumbers"):""),children:l.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[y(),l.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[p(),w()]})]})})}var ro=function(){return ro=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},ro.apply(this,arguments)},fd="react-calendar",qd=["century","decade","year","month"],i3=["decade","year","month","day"],vv=new Date;vv.setFullYear(1,0,1);vv.setHours(0,0,0,0);var s3=new Date(864e13);function ec(t){return t instanceof Date?t:new Date(t)}function YN(t,e){return qd.slice(qd.indexOf(t),qd.indexOf(e)+1)}function o3(t,e,n){var r=YN(e,n);return r.indexOf(t)!==-1}function _v(t,e,n){return t&&o3(t,e,n)?t:n}function WN(t){var e=qd.indexOf(t);return i3[e]}function l3(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=ec(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function KN(t,e){var n=t.value,r=t.minDate,a=t.maxDate,i=t.maxDetail,s=l3(n,e);if(!s)return null;var o=WN(i),u=function(){switch(e){case 0:return Hi(o,s);case 1:return zN(o,s);default:throw new Error("Invalid index value: ".concat(e))}}();return jP(u,r,a)}var bv=function(t){return KN(t,0)},QN=function(t){return KN(t,1)},c3=function(t){return[bv,QN].map(function(e){return e(t)})};function XN(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,a=t.minDetail,i=t.value,s=t.view,o=_v(s,a,n),u=bv({value:i,minDate:r,maxDate:e,maxDetail:n})||new Date;return Hi(o,u)}function u3(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,a=t.defaultView,i=t.maxDate,s=t.maxDetail,o=t.minDate,u=t.minDetail,d=t.value,h=t.view,f=_v(h,u,s),p=e||n;return p?Hi(f,p):XN({maxDate:i,maxDetail:s,minDate:o,minDetail:u,value:d||r,view:h||a})}function jp(t){return t&&(!Array.isArray(t)||t.length===1)}function md(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var d3=R.forwardRef(function(e,n){var r=e.activeStartDate,a=e.allowPartialRange,i=e.calendarType,s=e.className,o=e.defaultActiveStartDate,u=e.defaultValue,d=e.defaultView,h=e.formatDay,f=e.formatLongDate,p=e.formatMonth,y=e.formatMonthYear,w=e.formatShortWeekday,N=e.formatWeekday,A=e.formatYear,_=e.goToRangeStartOnSelect,x=_===void 0?!0:_,E=e.inputRef,I=e.locale,V=e.maxDate,q=V===void 0?s3:V,S=e.maxDetail,v=S===void 0?"month":S,b=e.minDate,C=b===void 0?vv:b,O=e.minDetail,j=O===void 0?"century":O,D=e.navigationAriaLabel,ie=e.navigationAriaLive,Y=e.navigationLabel,k=e.next2AriaLabel,U=e.next2Label,H=e.nextAriaLabel,G=e.nextLabel,K=e.onActiveStartDateChange,ee=e.onChange,z=e.onClickDay,J=e.onClickDecade,ue=e.onClickMonth,me=e.onClickWeekNumber,Tt=e.onClickYear,er=e.onDrillDown,tr=e.onDrillUp,Fn=e.onViewChange,fl=e.prev2AriaLabel,ml=e.prev2Label,bi=e.prevAriaLabel,xi=e.prevLabel,Qe=e.returnValue,wi=Qe===void 0?"start":Qe,Pt=e.selectRange,ca=e.showDoubleView,pl=e.showFixedNumberOfWeeks,ht=e.showNavigation,St=ht===void 0?!0:ht,Ts=e.showNeighboringCentury,Im=e.showNeighboringDecade,gl=e.showNeighboringMonth,Om=gl===void 0?!0:gl,Ei=e.showWeekNumbers,ju=e.tileClassName,ku=e.tileContent,yl=e.tileDisabled,vl=e.value,Mu=e.view,_l=R.useState(o),Pu=_l[0],nr=_l[1],Ss=R.useState(null),bl=Ss[0],rr=Ss[1],xl=R.useState(Array.isArray(u)?u.map(function(he){return he!==null?ec(he):null}):u!=null?ec(u):null),ua=xl[0],Lu=xl[1],da=R.useState(d),Vu=da[0],yt=da[1],Nt=r||Pu||u3({activeStartDate:r,defaultActiveStartDate:o,defaultValue:u,defaultView:d,maxDate:q,maxDetail:v,minDate:C,minDetail:j,value:vl,view:Mu}),at=function(){var he=function(){return Pt&&jp(ua)?ua:vl!==void 0?vl:ua}();return he?Array.isArray(he)?he.map(function(Fe){return Fe!==null?ec(Fe):null}):he!==null?ec(he):null:null}(),ar=WN(v),Me=_v(Mu||Vu,j,v),En=YN(j,v),ha=Pt?bl:null,wl=En.indexOf(Me)<En.length-1,Uu=En.indexOf(Me)>0,Ti=R.useCallback(function(he){var Fe=function(){switch(wi){case"start":return bv;case"end":return QN;case"range":return c3;default:throw new Error("Invalid returnValue.")}}();return Fe({maxDate:q,maxDetail:v,minDate:C,value:he})},[q,v,C,wi]),Ns=R.useCallback(function(he,Fe){nr(he);var Ge={action:Fe,activeStartDate:he,value:at,view:Me};K&&!md(Nt,he)&&K(Ge)},[Nt,K,at,Me]),Si=R.useCallback(function(he,Fe){var Ge=function(){switch(Me){case"century":return J;case"decade":return Tt;case"year":return ue;case"month":return z;default:throw new Error("Invalid view: ".concat(Me,"."))}}();Ge&&Ge(he,Fe)},[z,J,ue,Tt,Me]),Ni=R.useCallback(function(he,Fe){if(wl){Si(he,Fe);var Ge=En[En.indexOf(Me)+1];if(!Ge)throw new Error("Attempted to drill down from the lowest view.");nr(he),yt(Ge);var an={action:"drillDown",activeStartDate:he,value:at,view:Ge};K&&!md(Nt,he)&&K(an),Fn&&Me!==Ge&&Fn(an),er&&er(an)}},[Nt,wl,K,Si,er,Fn,at,Me,En]),Ar=R.useCallback(function(){if(Uu){var he=En[En.indexOf(Me)-1];if(!he)throw new Error("Attempted to drill up from the highest view.");var Fe=Hi(he,Nt);nr(Fe),yt(he);var Ge={action:"drillUp",activeStartDate:Fe,value:at,view:he};K&&!md(Nt,Fe)&&K(Ge),Fn&&Me!==he&&Fn(Ge),tr&&tr(Ge)}},[Nt,Uu,K,tr,Fn,at,Me,En]),El=R.useCallback(function(he,Fe){var Ge=at;Si(he,Fe);var an=Pt&&!jp(Ge),Lt;if(Pt)if(an)Lt=Hi(ar,he);else{if(!Ge)throw new Error("previousValue is required");if(Array.isArray(Ge))throw new Error("previousValue must not be an array");Lt=CP(ar,Ge,he)}else Lt=Ti(he);var Cs=!Pt||an||x?XN({maxDate:q,maxDetail:v,minDate:C,minDetail:j,value:Lt,view:Me}):null;Fe.persist(),nr(Cs),Lu(Lt);var Al={action:"onChange",activeStartDate:Cs,value:Lt,view:Me};if(K&&!md(Nt,Cs)&&K(Al),ee)if(Pt){var Ai=jp(Lt);if(!Ai)ee(Lt||null,Fe);else if(a){if(Array.isArray(Lt))throw new Error("value must not be an array");ee([Lt||null,null],Fe)}}else ee(Lt||null,Fe)},[Nt,a,Ti,x,q,v,C,j,K,ee,Si,Pt,at,ar,Me]);function ir(he){rr(he)}function As(){rr(null)}R.useImperativeHandle(n,function(){return{activeStartDate:Nt,drillDown:Ni,drillUp:Ar,onChange:El,setActiveStartDate:Ns,value:at,view:Me}},[Nt,Ni,Ar,El,Ns,at,Me]);function Tl(he){var Fe=he?BN(Me,Nt):Hi(Me,Nt),Ge=wl?Ni:El,an={activeStartDate:Fe,hover:ha,locale:I,maxDate:q,minDate:C,onClick:Ge,onMouseOver:Pt?ir:void 0,tileClassName:ju,tileContent:ku,tileDisabled:yl,value:at,valueType:ar};switch(Me){case"century":return l.jsx(BP,ro({formatYear:A,showNeighboringCentury:Ts},an));case"decade":return l.jsx(qP,ro({formatYear:A,showNeighboringDecade:Im},an));case"year":return l.jsx(KP,ro({formatMonth:p,formatMonthYear:y},an));case"month":return l.jsx(a3,ro({calendarType:i,formatDay:h,formatLongDate:f,formatShortWeekday:w,formatWeekday:N,onClickWeekNumber:me,onMouseLeave:Pt?As:void 0,showFixedNumberOfWeeks:typeof pl<"u"?pl:ca,showNeighboringMonth:Om,showWeekNumbers:Ei},an));default:throw new Error("Invalid view: ".concat(Me,"."))}}function Sl(){return St?l.jsx(IP,{activeStartDate:Nt,drillUp:Ar,formatMonthYear:y,formatYear:A,locale:I,maxDate:q,minDate:C,navigationAriaLabel:D,navigationAriaLive:ie,navigationLabel:Y,next2AriaLabel:k,next2Label:U,nextAriaLabel:H,nextLabel:G,prev2AriaLabel:fl,prev2Label:ml,prevAriaLabel:bi,prevLabel:xi,setActiveStartDate:Ns,showDoubleView:ca,view:Me,views:En}):null}var Nl=Array.isArray(at)?at:[at];return l.jsxs("div",{className:If(fd,Pt&&Nl.length===1&&"".concat(fd,"--selectRange"),ca&&"".concat(fd,"--doubleView"),s),ref:E,children:[Sl(),l.jsxs("div",{className:"".concat(fd,"__viewContainer"),onBlur:Pt?As:void 0,onMouseLeave:Pt?As:void 0,children:[Tl(),ca?Tl(!0):null]})]})});const h3=()=>{};var Ux={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},f3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const a=t[n++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[n++];e[r++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[n++],s=t[n++],o=t[n++],u=((a&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],s=t[n++];e[r++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},ZN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,o=s?t[a+1]:0,u=a+2<t.length,d=u?t[a+2]:0,h=i>>2,f=(i&3)<<4|o>>4;let p=(o&15)<<2|d>>6,y=d&63;u||(y=64,s||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):f3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const i=n[t.charAt(a++)],o=a<t.length?n[t.charAt(a)]:0;++a;const d=a<t.length?n[t.charAt(a)]:64;++a;const f=a<t.length?n[t.charAt(a)]:64;if(++a,i==null||o==null||d==null||f==null)throw new m3;const p=i<<2|o>>4;if(r.push(p),d!==64){const y=o<<4&240|d>>2;if(r.push(y),f!==64){const w=d<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class m3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p3=function(t){const e=JN(t);return ZN.encodeByteArray(e,!0)},jh=function(t){return p3(t).replace(/\./g,"")},eA=function(t){try{return ZN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=()=>g3().__FIREBASE_DEFAULTS__,v3=()=>{if(typeof process>"u"||typeof Ux>"u")return;const t=Ux.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eA(t[1]);return e&&JSON.parse(e)},Vf=()=>{try{return h3()||y3()||v3()||_3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tA=t=>{var e,n;return(n=(e=Vf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},nA=t=>{const e=tA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rA=()=>{var t;return(t=Vf())==null?void 0:t.config},aA=t=>{var e;return(e=Vf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jh(JSON.stringify(n)),jh(JSON.stringify(s)),""].join(".")}const wc={};function x3(){const t={prod:[],emulator:[]};for(const e of Object.keys(wc))wc[e]?t.emulator.push(e):t.prod.push(e);return t}function w3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Bx=!1;function wv(t,e){if(typeof window>"u"||typeof document>"u"||!ps(window.location.host)||wc[t]===e||wc[t]||Bx)return;wc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=x3().prod.length>0;function s(){const p=document.getElementById(r);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Bx=!0,s()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=w3(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),A=document.getElementById(N)||document.createElement("a"),_=n("preprendIcon"),x=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;o(E),h(A,N);const I=d();u(x,_),E.append(x,w,A,I),document.body.appendChild(E)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function T3(){var e;const t=(e=Vf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function N3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A3(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C3(){return!T3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function lA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function R3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="FirebaseError";class Bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=D3,Object.setPrototypeOf(this,Bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gs.prototype.create)}}class gs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?I3(i,r):"Error",o=`${this.serviceName}: ${s} (${a}).`;return new Bn(a,o,r)}}function I3(t,e){return t.replace(O3,(n,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const O3=/\{\$([^}]+)}/g;function j3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const a of n){if(!r.includes(a))return!1;const i=t[a],s=e[a];if(zx(i)&&zx(s)){if(!Zr(i,s))return!1}else if(i!==s)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function zx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,i]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(i)}}),e}function nc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function k3(t,e){const n=new M3(t,e);return n.subscribe.bind(n)}class M3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let a;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P3(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:r},a.next===void 0&&(a.next=kp),a.error===void 0&&(a.error=kp),a.complete===void 0&&(a.complete=kp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=1e3,V3=2,U3=4*60*60*1e3,B3=.5;function Fx(t,e=L3,n=V3){const r=e*Math.pow(n,t),a=Math.round(B3*r*(Math.random()-.5)*2);return Math.min(U3,r+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class Un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new b3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($3(e))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:a});r.resolve(i)}catch{}}}}clearInstance(e=Li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Li){return this.instances.has(e)}getOptions(e=Li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&s.resolve(a)}return a}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const i=this.instances.get(r);return i&&e(i,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:F3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Li){return this.component?this.component.multipleInstances?e:Li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F3(t){return t===Li?void 0:t}function $3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const H3={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},G3=ye.INFO,Y3={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},W3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=Y3[e];if(a)console[a](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uf{constructor(e){this.name=e,this._logLevel=G3,this._logHandler=W3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const K3=(t,e)=>e.some(n=>t instanceof n);let $x,qx;function Q3(){return $x||($x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X3(){return qx||(qx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cA=new WeakMap,yy=new WeakMap,uA=new WeakMap,Mp=new WeakMap,Ev=new WeakMap;function J3(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{n(Ya(t.result)),a()},s=()=>{r(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&cA.set(n,t)}).catch(()=>{}),Ev.set(e,t),e}function Z3(t){if(yy.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{n(),a()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});yy.set(t,e)}let vy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ya(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function e6(t){vy=t(vy)}function t6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pp(this),e,...n);return uA.set(r,e.sort?e.sort():[e]),Ya(r)}:X3().includes(t)?function(...e){return t.apply(Pp(this),e),Ya(cA.get(this))}:function(...e){return Ya(t.apply(Pp(this),e))}}function n6(t){return typeof t=="function"?t6(t):(t instanceof IDBTransaction&&Z3(t),K3(t,Q3())?new Proxy(t,vy):t)}function Ya(t){if(t instanceof IDBRequest)return J3(t);if(Mp.has(t))return Mp.get(t);const e=n6(t);return e!==t&&(Mp.set(t,e),Ev.set(e,t)),e}const Pp=t=>Ev.get(t);function dA(t,e,{blocked:n,upgrade:r,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),o=Ya(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Ya(s.result),u.oldVersion,u.newVersion,Ya(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),o.then(u=>{i&&u.addEventListener("close",()=>i()),a&&u.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const r6=["get","getKey","getAll","getAllKeys","count"],a6=["put","add","delete","clear"],Lp=new Map;function Hx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=a6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||r6.includes(n)))return;const i=async function(s,...o){const u=this.transaction(s,a?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(o.shift())),(await Promise.all([d[n](...o),a&&u.done]))[0]};return Lp.set(e,i),i}e6(t=>({...t,get:(e,n,r)=>Hx(e,n)||t.get(e,n,r),has:(e,n)=>!!Hx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(s6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function s6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _y="@firebase/app",Gx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Uf("@firebase/app"),o6="@firebase/app-compat",l6="@firebase/analytics-compat",c6="@firebase/analytics",u6="@firebase/app-check-compat",d6="@firebase/app-check",h6="@firebase/auth",f6="@firebase/auth-compat",m6="@firebase/database",p6="@firebase/data-connect",g6="@firebase/database-compat",y6="@firebase/functions",v6="@firebase/functions-compat",_6="@firebase/installations",b6="@firebase/installations-compat",x6="@firebase/messaging",w6="@firebase/messaging-compat",E6="@firebase/performance",T6="@firebase/performance-compat",S6="@firebase/remote-config",N6="@firebase/remote-config-compat",A6="@firebase/storage",C6="@firebase/storage-compat",R6="@firebase/firestore",D6="@firebase/ai",I6="@firebase/firestore-compat",O6="firebase",j6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="[DEFAULT]",k6={[_y]:"fire-core",[o6]:"fire-core-compat",[c6]:"fire-analytics",[l6]:"fire-analytics-compat",[d6]:"fire-app-check",[u6]:"fire-app-check-compat",[h6]:"fire-auth",[f6]:"fire-auth-compat",[m6]:"fire-rtdb",[p6]:"fire-data-connect",[g6]:"fire-rtdb-compat",[y6]:"fire-fn",[v6]:"fire-fn-compat",[_6]:"fire-iid",[b6]:"fire-iid-compat",[x6]:"fire-fcm",[w6]:"fire-fcm-compat",[E6]:"fire-perf",[T6]:"fire-perf-compat",[S6]:"fire-rc",[N6]:"fire-rc-compat",[A6]:"fire-gcs",[C6]:"fire-gcs-compat",[R6]:"fire-fst",[I6]:"fire-fst-compat",[D6]:"fire-vertex","fire-js":"fire-js",[O6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Map,M6=new Map,xy=new Map;function Yx(t,e){try{t.container.addComponent(e)}catch(n){ea.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kn(t){const e=t.name;if(xy.has(e))return ea.debug(`There were multiple attempts to register component ${e}.`),!1;xy.set(e,t);for(const n of kh.values())Yx(n,t);for(const n of M6.values())Yx(n,t);return!0}function mi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wa=new gs("app","Firebase",P6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=j6;function hA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:by,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Wa.create("bad-app-name",{appName:String(a)});if(n||(n=rA()),!n)throw Wa.create("no-options");const i=kh.get(a);if(i){if(Zr(n,i.options)&&Zr(r,i.config))return i;throw Wa.create("duplicate-app",{appName:a})}const s=new q3(a);for(const u of xy.values())s.addComponent(u);const o=new L6(n,r,s);return kh.set(a,o),o}function Bf(t=by){const e=kh.get(t);if(!e&&t===by&&rA())return hA();if(!e)throw Wa.create("no-app",{appName:t});return e}function tn(t,e,n){let r=k6[t]??t;n&&(r+=`-${n}`);const a=r.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const s=[`Unable to register library "${r}" with version "${e}":`];a&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ea.warn(s.join(" "));return}Kn(new Un(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="firebase-heartbeat-database",U6=1,Hc="firebase-heartbeat-store";let Vp=null;function fA(){return Vp||(Vp=dA(V6,U6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wa.create("idb-open",{originalErrorMessage:t.message})})),Vp}async function B6(t){try{const n=(await fA()).transaction(Hc),r=await n.objectStore(Hc).get(mA(t));return await n.done,r}catch(e){if(e instanceof Bn)ea.warn(e.message);else{const n=Wa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ea.warn(n.message)}}}async function Wx(t,e){try{const r=(await fA()).transaction(Hc,"readwrite");await r.objectStore(Hc).put(e,mA(t)),await r.done}catch(n){if(n instanceof Bn)ea.warn(n.message);else{const r=Wa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ea.warn(r.message)}}}function mA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=1024,F6=30;class $6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new H6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Kx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>F6){const s=G6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ea.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kx(),{heartbeatsToSend:r,unsentEntries:a}=q6(this._heartbeatsCache.heartbeats),i=jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ea.warn(n),""}}}function Kx(){return new Date().toISOString().substring(0,10)}function q6(t,e=z6){const n=[];let r=t.slice();for(const a of t){const i=n.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),Qx(n)>e){i.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Qx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class H6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?lA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qx(t){return jh(JSON.stringify({version:2,heartbeats:t})).length}function G6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t){Kn(new Un("platform-logger",e=>new i6(e),"PRIVATE")),Kn(new Un("heartbeat",e=>new $6(e),"PRIVATE")),tn(_y,Gx,t),tn(_y,Gx,"esm2020"),tn("fire-js","")}Y6("");var Xx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ka,pA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,v){function b(){}b.prototype=v.prototype,S.F=v.prototype,S.prototype=new b,S.prototype.constructor=S,S.D=function(C,O,j){for(var D=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)D[ie-2]=arguments[ie];return v.prototype[O].apply(C,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,v,b){b||(b=0);const C=Array(16);if(typeof v=="string")for(var O=0;O<16;++O)C[O]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(O=0;O<16;++O)C[O]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=S.g[0],b=S.g[1],O=S.g[2];let j=S.g[3],D;D=v+(j^b&(O^j))+C[0]+3614090360&4294967295,v=b+(D<<7&4294967295|D>>>25),D=j+(O^v&(b^O))+C[1]+3905402710&4294967295,j=v+(D<<12&4294967295|D>>>20),D=O+(b^j&(v^b))+C[2]+606105819&4294967295,O=j+(D<<17&4294967295|D>>>15),D=b+(v^O&(j^v))+C[3]+3250441966&4294967295,b=O+(D<<22&4294967295|D>>>10),D=v+(j^b&(O^j))+C[4]+4118548399&4294967295,v=b+(D<<7&4294967295|D>>>25),D=j+(O^v&(b^O))+C[5]+1200080426&4294967295,j=v+(D<<12&4294967295|D>>>20),D=O+(b^j&(v^b))+C[6]+2821735955&4294967295,O=j+(D<<17&4294967295|D>>>15),D=b+(v^O&(j^v))+C[7]+4249261313&4294967295,b=O+(D<<22&4294967295|D>>>10),D=v+(j^b&(O^j))+C[8]+1770035416&4294967295,v=b+(D<<7&4294967295|D>>>25),D=j+(O^v&(b^O))+C[9]+2336552879&4294967295,j=v+(D<<12&4294967295|D>>>20),D=O+(b^j&(v^b))+C[10]+4294925233&4294967295,O=j+(D<<17&4294967295|D>>>15),D=b+(v^O&(j^v))+C[11]+2304563134&4294967295,b=O+(D<<22&4294967295|D>>>10),D=v+(j^b&(O^j))+C[12]+1804603682&4294967295,v=b+(D<<7&4294967295|D>>>25),D=j+(O^v&(b^O))+C[13]+4254626195&4294967295,j=v+(D<<12&4294967295|D>>>20),D=O+(b^j&(v^b))+C[14]+2792965006&4294967295,O=j+(D<<17&4294967295|D>>>15),D=b+(v^O&(j^v))+C[15]+1236535329&4294967295,b=O+(D<<22&4294967295|D>>>10),D=v+(O^j&(b^O))+C[1]+4129170786&4294967295,v=b+(D<<5&4294967295|D>>>27),D=j+(b^O&(v^b))+C[6]+3225465664&4294967295,j=v+(D<<9&4294967295|D>>>23),D=O+(v^b&(j^v))+C[11]+643717713&4294967295,O=j+(D<<14&4294967295|D>>>18),D=b+(j^v&(O^j))+C[0]+3921069994&4294967295,b=O+(D<<20&4294967295|D>>>12),D=v+(O^j&(b^O))+C[5]+3593408605&4294967295,v=b+(D<<5&4294967295|D>>>27),D=j+(b^O&(v^b))+C[10]+38016083&4294967295,j=v+(D<<9&4294967295|D>>>23),D=O+(v^b&(j^v))+C[15]+3634488961&4294967295,O=j+(D<<14&4294967295|D>>>18),D=b+(j^v&(O^j))+C[4]+3889429448&4294967295,b=O+(D<<20&4294967295|D>>>12),D=v+(O^j&(b^O))+C[9]+568446438&4294967295,v=b+(D<<5&4294967295|D>>>27),D=j+(b^O&(v^b))+C[14]+3275163606&4294967295,j=v+(D<<9&4294967295|D>>>23),D=O+(v^b&(j^v))+C[3]+4107603335&4294967295,O=j+(D<<14&4294967295|D>>>18),D=b+(j^v&(O^j))+C[8]+1163531501&4294967295,b=O+(D<<20&4294967295|D>>>12),D=v+(O^j&(b^O))+C[13]+2850285829&4294967295,v=b+(D<<5&4294967295|D>>>27),D=j+(b^O&(v^b))+C[2]+4243563512&4294967295,j=v+(D<<9&4294967295|D>>>23),D=O+(v^b&(j^v))+C[7]+1735328473&4294967295,O=j+(D<<14&4294967295|D>>>18),D=b+(j^v&(O^j))+C[12]+2368359562&4294967295,b=O+(D<<20&4294967295|D>>>12),D=v+(b^O^j)+C[5]+4294588738&4294967295,v=b+(D<<4&4294967295|D>>>28),D=j+(v^b^O)+C[8]+2272392833&4294967295,j=v+(D<<11&4294967295|D>>>21),D=O+(j^v^b)+C[11]+1839030562&4294967295,O=j+(D<<16&4294967295|D>>>16),D=b+(O^j^v)+C[14]+4259657740&4294967295,b=O+(D<<23&4294967295|D>>>9),D=v+(b^O^j)+C[1]+2763975236&4294967295,v=b+(D<<4&4294967295|D>>>28),D=j+(v^b^O)+C[4]+1272893353&4294967295,j=v+(D<<11&4294967295|D>>>21),D=O+(j^v^b)+C[7]+4139469664&4294967295,O=j+(D<<16&4294967295|D>>>16),D=b+(O^j^v)+C[10]+3200236656&4294967295,b=O+(D<<23&4294967295|D>>>9),D=v+(b^O^j)+C[13]+681279174&4294967295,v=b+(D<<4&4294967295|D>>>28),D=j+(v^b^O)+C[0]+3936430074&4294967295,j=v+(D<<11&4294967295|D>>>21),D=O+(j^v^b)+C[3]+3572445317&4294967295,O=j+(D<<16&4294967295|D>>>16),D=b+(O^j^v)+C[6]+76029189&4294967295,b=O+(D<<23&4294967295|D>>>9),D=v+(b^O^j)+C[9]+3654602809&4294967295,v=b+(D<<4&4294967295|D>>>28),D=j+(v^b^O)+C[12]+3873151461&4294967295,j=v+(D<<11&4294967295|D>>>21),D=O+(j^v^b)+C[15]+530742520&4294967295,O=j+(D<<16&4294967295|D>>>16),D=b+(O^j^v)+C[2]+3299628645&4294967295,b=O+(D<<23&4294967295|D>>>9),D=v+(O^(b|~j))+C[0]+4096336452&4294967295,v=b+(D<<6&4294967295|D>>>26),D=j+(b^(v|~O))+C[7]+1126891415&4294967295,j=v+(D<<10&4294967295|D>>>22),D=O+(v^(j|~b))+C[14]+2878612391&4294967295,O=j+(D<<15&4294967295|D>>>17),D=b+(j^(O|~v))+C[5]+4237533241&4294967295,b=O+(D<<21&4294967295|D>>>11),D=v+(O^(b|~j))+C[12]+1700485571&4294967295,v=b+(D<<6&4294967295|D>>>26),D=j+(b^(v|~O))+C[3]+2399980690&4294967295,j=v+(D<<10&4294967295|D>>>22),D=O+(v^(j|~b))+C[10]+4293915773&4294967295,O=j+(D<<15&4294967295|D>>>17),D=b+(j^(O|~v))+C[1]+2240044497&4294967295,b=O+(D<<21&4294967295|D>>>11),D=v+(O^(b|~j))+C[8]+1873313359&4294967295,v=b+(D<<6&4294967295|D>>>26),D=j+(b^(v|~O))+C[15]+4264355552&4294967295,j=v+(D<<10&4294967295|D>>>22),D=O+(v^(j|~b))+C[6]+2734768916&4294967295,O=j+(D<<15&4294967295|D>>>17),D=b+(j^(O|~v))+C[13]+1309151649&4294967295,b=O+(D<<21&4294967295|D>>>11),D=v+(O^(b|~j))+C[4]+4149444226&4294967295,v=b+(D<<6&4294967295|D>>>26),D=j+(b^(v|~O))+C[11]+3174756917&4294967295,j=v+(D<<10&4294967295|D>>>22),D=O+(v^(j|~b))+C[2]+718787259&4294967295,O=j+(D<<15&4294967295|D>>>17),D=b+(j^(O|~v))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+j&4294967295}r.prototype.v=function(S,v){v===void 0&&(v=S.length);const b=v-this.blockSize,C=this.C;let O=this.h,j=0;for(;j<v;){if(O==0)for(;j<=b;)a(this,S,j),j+=this.blockSize;if(typeof S=="string"){for(;j<v;)if(C[O++]=S.charCodeAt(j++),O==this.blockSize){a(this,C),O=0;break}}else for(;j<v;)if(C[O++]=S[j++],O==this.blockSize){a(this,C),O=0;break}}this.h=O,this.o+=v},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;v=this.o*8;for(var b=S.length-8;b<S.length;++b)S[b]=v&255,v/=256;for(this.v(S),S=Array(16),v=0,b=0;b<4;++b)for(let C=0;C<32;C+=8)S[v++]=this.g[b]>>>C&255;return S};function i(S,v){var b=o;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=v(S)}function s(S,v){this.h=v;const b=[];let C=!0;for(let O=S.length-1;O>=0;O--){const j=S[O]|0;C&&j==v||(b[O]=j,C=!1)}this.g=b}var o={};function u(S){return-128<=S&&S<128?i(S,function(v){return new s([v|0],v<0?-1:0)}):new s([S|0],S<0?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return A(d(-S));const v=[];let b=1;for(let C=0;S>=b;C++)v[C]=S/b|0,b*=4294967296;return new s(v,0)}function h(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return A(h(S.substring(1),v));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=d(Math.pow(v,8));let C=f;for(let j=0;j<S.length;j+=8){var O=Math.min(8,S.length-j);const D=parseInt(S.substring(j,j+O),v);O<8?(O=d(Math.pow(v,O)),C=C.j(O).add(d(D))):(C=C.j(b),C=C.add(d(D)))}return C}var f=u(0),p=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-A(this).m();let S=0,v=1;for(let b=0;b<this.g.length;b++){const C=this.i(b);S+=(C>=0?C:4294967296+C)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(N(this))return"-"+A(this).toString(S);const v=d(Math.pow(S,6));var b=this;let C="";for(;;){const O=I(b,v).g;b=_(b,O.j(v));let j=((b.g.length>0?b.g[0]:b.h)>>>0).toString(S);if(b=O,w(b))return j+C;for(;j.length<6;)j="0"+j;C=j+C}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(let v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function N(S){return S.h==-1}t.l=function(S){return S=_(this,S),N(S)?-1:w(S)?0:1};function A(S){const v=S.g.length,b=[];for(let C=0;C<v;C++)b[C]=~S.g[C];return new s(b,~S.h).add(p)}t.abs=function(){return N(this)?A(this):this},t.add=function(S){const v=Math.max(this.g.length,S.g.length),b=[];let C=0;for(let O=0;O<=v;O++){let j=C+(this.i(O)&65535)+(S.i(O)&65535),D=(j>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);C=D>>>16,j&=65535,D&=65535,b[O]=D<<16|j}return new s(b,b[b.length-1]&-2147483648?-1:0)};function _(S,v){return S.add(A(v))}t.j=function(S){if(w(this)||w(S))return f;if(N(this))return N(S)?A(this).j(A(S)):A(A(this).j(S));if(N(S))return A(this.j(A(S)));if(this.l(y)<0&&S.l(y)<0)return d(this.m()*S.m());const v=this.g.length+S.g.length,b=[];for(var C=0;C<2*v;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(let O=0;O<S.g.length;O++){const j=this.i(C)>>>16,D=this.i(C)&65535,ie=S.i(O)>>>16,Y=S.i(O)&65535;b[2*C+2*O]+=D*Y,x(b,2*C+2*O),b[2*C+2*O+1]+=j*Y,x(b,2*C+2*O+1),b[2*C+2*O+1]+=D*ie,x(b,2*C+2*O+1),b[2*C+2*O+2]+=j*ie,x(b,2*C+2*O+2)}for(S=0;S<v;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=v;S<2*v;S++)b[S]=0;return new s(b,0)};function x(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function E(S,v){this.g=S,this.h=v}function I(S,v){if(w(v))throw Error("division by zero");if(w(S))return new E(f,f);if(N(S))return v=I(A(S),v),new E(A(v.g),A(v.h));if(N(v))return v=I(S,A(v)),new E(A(v.g),v.h);if(S.g.length>30){if(N(S)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var b=p,C=v;C.l(S)<=0;)b=V(b),C=V(C);var O=q(b,1),j=q(C,1);for(C=q(C,2),b=q(b,2);!w(C);){var D=j.add(C);D.l(S)<=0&&(O=O.add(b),j=D),C=q(C,1),b=q(b,1)}return v=_(S,O.j(v)),new E(O,v)}for(O=f;S.l(v)>=0;){for(b=Math.max(1,Math.floor(S.m()/v.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),j=d(b),D=j.j(v);N(D)||D.l(S)>0;)b-=C,j=d(b),D=j.j(v);w(j)&&(j=p),O=O.add(j),S=_(S,D)}return new E(O,S)}t.B=function(S){return I(this,S).h},t.and=function(S){const v=Math.max(this.g.length,S.g.length),b=[];for(let C=0;C<v;C++)b[C]=this.i(C)&S.i(C);return new s(b,this.h&S.h)},t.or=function(S){const v=Math.max(this.g.length,S.g.length),b=[];for(let C=0;C<v;C++)b[C]=this.i(C)|S.i(C);return new s(b,this.h|S.h)},t.xor=function(S){const v=Math.max(this.g.length,S.g.length),b=[];for(let C=0;C<v;C++)b[C]=this.i(C)^S.i(C);return new s(b,this.h^S.h)};function V(S){const v=S.g.length+1,b=[];for(let C=0;C<v;C++)b[C]=S.i(C)<<1|S.i(C-1)>>>31;return new s(b,S.h)}function q(S,v){const b=v>>5;v%=32;const C=S.g.length-b,O=[];for(let j=0;j<C;j++)O[j]=v>0?S.i(j+b)>>>v|S.i(j+b+1)<<32-v:S.i(j+b);return new s(O,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pA=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,Ka=s}).apply(typeof Xx<"u"?Xx:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gA,rc,yA,Hd,wy,vA,_A,bA;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function a(c,m){if(m)e:{var g=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var M=c[T];if(!(M in g))break e;g=g[M]}c=c[c.length-1],T=g[c],m=m(T),m!=T&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}a("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(c){return c||function(m){var g=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&g.push([T,m[T]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},s=this||self;function o(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function u(c,m,g){return c.call.apply(c.bind,arguments)}function d(c,m,g){return d=u,d.apply(null,arguments)}function h(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function f(c,m){function g(){}g.prototype=m.prototype,c.Z=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(T,M,L){for(var W=Array(arguments.length-2),de=2;de<arguments.length;de++)W[de-2]=arguments[de];return m.prototype[M].apply(T,W)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){const m=c.length;if(m>0){const g=Array(m);for(let T=0;T<m;T++)g[T]=c[T];return g}return[]}function w(c,m){for(let T=1;T<arguments.length;T++){const M=arguments[T];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=c.length||0;const L=M.length||0;c.length=g+L;for(let W=0;W<L;W++)c[g+W]=M[W]}else c.push(M)}}class N{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function A(c){s.setTimeout(()=>{throw c},0)}function _(){var c=S;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class x{constructor(){this.h=this.g=null}add(m,g){const T=E.get();T.set(m,g),this.h?this.h.next=T:this.g=T,this.h=T}}var E=new N(()=>new I,c=>c.reset());class I{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,q=!1,S=new x,v=()=>{const c=Promise.resolve(void 0);V=()=>{c.then(b)}};function b(){for(var c;c=_();){try{c.h.call(c.g)}catch(g){A(g)}var m=E;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}q=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};s.addEventListener("test",g,m),s.removeEventListener("test",g,m)}catch{}return c}();function D(c){return/^[\s\xa0]*$/.test(c)}function ie(c,m){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}f(ie,O),ie.prototype.init=function(c,m){const g=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ie.Z.h.call(this)},ie.prototype.h=function(){ie.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),k=0;function U(c,m,g,T,M){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!T,this.ha=M,this.key=++k,this.da=this.fa=!1}function H(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function G(c,m,g){for(const T in c)m.call(g,c[T],T,c)}function K(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function ee(c){const m={};for(const g in c)m[g]=c[g];return m}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(c,m){let g,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(g in T)c[g]=T[g];for(let L=0;L<z.length;L++)g=z[L],Object.prototype.hasOwnProperty.call(T,g)&&(c[g]=T[g])}}function ue(c){this.src=c,this.g={},this.h=0}ue.prototype.add=function(c,m,g,T,M){const L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);const W=Tt(c,m,T,M);return W>-1?(m=c[W],g||(m.fa=!1)):(m=new U(m,this.src,L,!!T,M),m.fa=g,c.push(m)),m};function me(c,m){const g=m.type;if(g in c.g){var T=c.g[g],M=Array.prototype.indexOf.call(T,m,void 0),L;(L=M>=0)&&Array.prototype.splice.call(T,M,1),L&&(H(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Tt(c,m,g,T){for(let M=0;M<c.length;++M){const L=c[M];if(!L.da&&L.listener==m&&L.capture==!!g&&L.ha==T)return M}return-1}var er="closure_lm_"+(Math.random()*1e6|0),tr={};function Fn(c,m,g,T,M){if(Array.isArray(m)){for(let L=0;L<m.length;L++)Fn(c,m[L],g,T,M);return null}return g=pl(g),c&&c[Y]?c.J(m,g,o(T)?!!T.capture:!1,M):fl(c,m,g,!1,T,M)}function fl(c,m,g,T,M,L){if(!m)throw Error("Invalid event type");const W=o(M)?!!M.capture:!!M;let de=Pt(c);if(de||(c[er]=de=new ue(c)),g=de.add(m,g,T,W,L),g.proxy)return g;if(T=ml(),g.proxy=T,T.src=c,T.listener=g,c.addEventListener)j||(M=W),M===void 0&&(M=!1),c.addEventListener(m.toString(),T,M);else if(c.attachEvent)c.attachEvent(Qe(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ml(){function c(g){return m.call(c.src,c.listener,g)}const m=wi;return c}function bi(c,m,g,T,M){if(Array.isArray(m))for(var L=0;L<m.length;L++)bi(c,m[L],g,T,M);else T=o(T)?!!T.capture:!!T,g=pl(g),c&&c[Y]?(c=c.i,L=String(m).toString(),L in c.g&&(m=c.g[L],g=Tt(m,g,T,M),g>-1&&(H(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete c.g[L],c.h--)))):c&&(c=Pt(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Tt(m,g,T,M)),(g=c>-1?m[c]:null)&&xi(g))}function xi(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Y])me(m.i,c);else{var g=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(g,T,c.capture):m.detachEvent?m.detachEvent(Qe(g),T):m.addListener&&m.removeListener&&m.removeListener(T),(g=Pt(m))?(me(g,c),g.h==0&&(g.src=null,m[er]=null)):H(c)}}}function Qe(c){return c in tr?tr[c]:tr[c]="on"+c}function wi(c,m){if(c.da)c=!0;else{m=new ie(m,this);const g=c.listener,T=c.ha||c.src;c.fa&&xi(c),c=g.call(T,m)}return c}function Pt(c){return c=c[er],c instanceof ue?c:null}var ca="__closure_events_fn_"+(Math.random()*1e9>>>0);function pl(c){return typeof c=="function"?c:(c[ca]||(c[ca]=function(m){return c.handleEvent(m)}),c[ca])}function ht(){C.call(this),this.i=new ue(this),this.M=this,this.G=null}f(ht,C),ht.prototype[Y]=!0,ht.prototype.removeEventListener=function(c,m,g,T){bi(this,c,m,g,T)};function St(c,m){var g,T=c.G;if(T)for(g=[];T;T=T.G)g.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new O(m,c);else if(m instanceof O)m.target=m.target||c;else{var M=m;m=new O(T,c),J(m,M)}M=!0;let L,W;if(g)for(W=g.length-1;W>=0;W--)L=m.g=g[W],M=Ts(L,T,!0,m)&&M;if(L=m.g=c,M=Ts(L,T,!0,m)&&M,M=Ts(L,T,!1,m)&&M,g)for(W=0;W<g.length;W++)L=m.g=g[W],M=Ts(L,T,!1,m)&&M}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const g=c.g[m];for(let T=0;T<g.length;T++)H(g[T]);delete c.g[m],c.h--}}this.G=null},ht.prototype.J=function(c,m,g,T){return this.i.add(String(c),m,!1,g,T)},ht.prototype.K=function(c,m,g,T){return this.i.add(String(c),m,!0,g,T)};function Ts(c,m,g,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let L=0;L<m.length;++L){const W=m[L];if(W&&!W.da&&W.capture==g){const de=W.listener,ft=W.ha||W.src;W.fa&&me(c.i,W),M=de.call(ft,T)!==!1&&M}}return M&&!T.defaultPrevented}function Im(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:s.setTimeout(c,m||0)}function gl(c){c.g=Im(()=>{c.g=null,c.i&&(c.i=!1,gl(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Om extends C{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:gl(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ei(c){C.call(this),this.h=c,this.g={}}f(Ei,C);var ju=[];function ku(c){G(c.g,function(m,g){this.g.hasOwnProperty(g)&&xi(m)},c),c.g={}}Ei.prototype.N=function(){Ei.Z.N.call(this),ku(this)},Ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yl=s.JSON.stringify,vl=s.JSON.parse,Mu=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function _l(){}function Pu(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ss(){O.call(this,"d")}f(Ss,O);function bl(){O.call(this,"c")}f(bl,O);var rr={},xl=null;function ua(){return xl=xl||new ht}rr.Ia="serverreachability";function Lu(c){O.call(this,rr.Ia,c)}f(Lu,O);function da(c){const m=ua();St(m,new Lu(m))}rr.STAT_EVENT="statevent";function Vu(c,m){O.call(this,rr.STAT_EVENT,c),this.stat=m}f(Vu,O);function yt(c){const m=ua();St(m,new Vu(m,c))}rr.Ja="timingevent";function Nt(c,m){O.call(this,rr.Ja,c),this.size=m}f(Nt,O);function at(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},m)}function ar(){this.g=!0}ar.prototype.ua=function(){this.g=!1};function Me(c,m,g,T,M,L){c.info(function(){if(c.g)if(L){var W="",de=L.split("&");for(let De=0;De<de.length;De++){var ft=de[De].split("=");if(ft.length>1){const vt=ft[0];ft=ft[1];const or=vt.split("_");W=or.length>=2&&or[1]=="type"?W+(vt+"="+ft+"&"):W+(vt+"=redacted&")}}}else W=null;else W=L;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+m+`
`+g+`
`+W})}function En(c,m,g,T,M,L,W){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+m+`
`+g+`
`+L+" "+W})}function ha(c,m,g,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Uu(c,g)+(T?" "+T:"")})}function wl(c,m){c.info(function(){return"TIMEOUT: "+m})}ar.prototype.info=function(){};function Uu(c,m){if(!c.g)return m;if(!m)return null;try{const L=JSON.parse(m);if(L){for(c=0;c<L.length;c++)if(Array.isArray(L[c])){var g=L[c];if(!(g.length<2)){var T=g[1];if(Array.isArray(T)&&!(T.length<1)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(let W=1;W<T.length;W++)T[W]=""}}}}return yl(L)}catch{return m}}var Ti={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ns={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Si;function Ni(){}f(Ni,_l),Ni.prototype.g=function(){return new XMLHttpRequest},Si=new Ni;function Ar(c){return encodeURIComponent(String(c))}function El(c){var m=1;c=c.split(":");const g=[];for(;m>0&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function ir(c,m,g,T){this.j=c,this.i=m,this.l=g,this.S=T||1,this.V=new Ei(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new As}function As(){this.i=null,this.g="",this.h=!1}var Tl={},Sl={};function Nl(c,m,g){c.M=1,c.A=Bu(sr(m)),c.u=g,c.R=!0,he(c,null)}function he(c,m){c.F=Date.now(),Lt(c),c.B=sr(c.A);var g=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),y1(g.i,"t",T),c.C=0,g=c.j.L,c.h=new As,c.g=M1(c.j,g?m:null,!c.u),c.P>0&&(c.O=new Om(d(c.Y,c,c.g),c.P)),m=c.V,g=c.g,T=c.ba;var M="readystatechange";Array.isArray(M)||(M&&(ju[0]=M.toString()),M=ju);for(let L=0;L<M.length;L++){const W=Fn(g,M[L],T||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=c.J?ee(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),da(),Me(c.i,c.v,c.B,c.l,c.S,c.u)}ir.prototype.ba=function(c){c=c.target;const m=this.O;m&&pa(c)==3?m.j():this.Y(c)},ir.prototype.Y=function(c){try{if(c==this.g)e:{const de=pa(this.g),ft=this.g.ya(),De=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||T1(this.g)))){this.K||de!=4||ft==7||(ft==8||De<=0?da(3):da(2)),Al(this);var m=this.g.ca();this.X=m;var g=Fe(this);if(this.o=m==200,En(this.i,this.v,this.B,this.l,this.S,de,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,M=this.g;if((T=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(T)){var L=T;break t}}L=null}if(c=L)ha(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jm(this,c);else{this.o=!1,this.m=3,yt(12),Ci(this),Ai(this);break e}}if(this.R){c=!0;let vt;for(;!this.K&&this.C<g.length;)if(vt=an(this,g),vt==Sl){de==4&&(this.m=4,yt(14),c=!1),ha(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Tl){this.m=4,yt(15),ha(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else ha(this.i,this.l,vt,null),jm(this,vt);if(Ge(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||g.length!=0||this.h.h||(this.m=1,yt(16),c=!1),this.o=this.o&&c,!c)ha(this.i,this.l,g,"[Invalid Chunked Response]"),Ci(this),Ai(this);else if(g.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),zm(W),W.P=!0,yt(11))}}else ha(this.i,this.l,g,null),jm(this,g);de==4&&Ci(this),this.o&&!this.K&&(de==4?I1(this.j,this):(this.o=!1,Lt(this)))}else GD(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),Ci(this),Ai(this)}}}catch{}finally{}};function Fe(c){if(!Ge(c))return c.g.la();const m=T1(c.g);if(m==="")return"";let g="";const T=m.length,M=pa(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ci(c),Ai(c),"";c.h.i=new s.TextDecoder}for(let L=0;L<T;L++)c.h.h=!0,g+=c.h.i.decode(m[L],{stream:!(M&&L==T-1)});return m.length=0,c.h.g+=g,c.C=0,c.h.g}function Ge(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function an(c,m){var g=c.C,T=m.indexOf(`
`,g);return T==-1?Sl:(g=Number(m.substring(g,T)),isNaN(g)?Tl:(T+=1,T+g>m.length?Sl:(m=m.slice(T,T+g),c.C=T+g,m)))}ir.prototype.cancel=function(){this.K=!0,Ci(this)};function Lt(c){c.T=Date.now()+c.H,Cs(c,c.H)}function Cs(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=at(d(c.aa,c),m)}function Al(c){c.D&&(s.clearTimeout(c.D),c.D=null)}ir.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(wl(this.i,this.B),this.M!=2&&(da(),yt(17)),Ci(this),this.m=2,Ai(this)):Cs(this,this.T-c)};function Ai(c){c.j.I==0||c.K||I1(c.j,c)}function Ci(c){Al(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,ku(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function jm(c,m){try{var g=c.j;if(g.I!=0&&(g.g==c||km(g.h,c))){if(!c.L&&km(g.h,c)&&g.I==3){try{var T=g.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)Hu(g),$u(g);else break e;Bm(g),yt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=at(d(g.Va,g),6e3));c1(g.h)<=1&&g.ta&&(g.ta=void 0)}else Di(g,11)}else if((c.L||g.g==c)&&Hu(g),!D(m))for(M=g.Ba.g.parse(m),m=0;m<M.length;m++){let De=M[m];const vt=De[0];if(!(vt<=g.K))if(g.K=vt,De=De[1],g.I==2)if(De[0]=="c"){g.M=De[1],g.ba=De[2];const or=De[3];or!=null&&(g.ka=or,g.j.info("VER="+g.ka));const Ii=De[4];Ii!=null&&(g.za=Ii,g.j.info("SVER="+g.za));const ga=De[5];ga!=null&&typeof ga=="number"&&ga>0&&(T=1.5*ga,g.O=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const ya=c.g;if(ya){const Yu=ya.g?ya.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yu){var L=T.h;L.g||Yu.indexOf("spdy")==-1&&Yu.indexOf("quic")==-1&&Yu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Mm(L,L.h),L.h=null))}if(T.G){const Fm=ya.g?ya.g.getResponseHeader("X-HTTP-Session-Id"):null;Fm&&(T.wa=Fm,Pe(T.J,T.G,Fm))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),T=g;var W=c;if(T.na=k1(T,T.L?T.ba:null,T.W),W.L){u1(T.h,W);var de=W,ft=T.O;ft&&(de.H=ft),de.D&&(Al(de),Lt(de)),T.g=W}else R1(T);g.i.length>0&&qu(g)}else De[0]!="stop"&&De[0]!="close"||Di(g,7);else g.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Di(g,7):Um(g):De[0]!="noop"&&g.l&&g.l.qa(De),g.A=0)}}da(4)}catch{}}var jD=class{constructor(c,m){this.g=c,this.map=m}};function o1(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function l1(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function c1(c){return c.h?1:c.g?c.g.size:0}function km(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Mm(c,m){c.g?c.g.add(m):c.h=m}function u1(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}o1.prototype.cancel=function(){if(this.i=d1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function d1(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.G);return m}return y(c.i)}var h1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kD(c,m){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const T=c[g].indexOf("=");let M,L=null;T>=0?(M=c[g].substring(0,T),L=c[g].substring(T+1)):M=c[g],m(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function fa(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof fa?(this.l=c.l,Cl(this,c.j),this.o=c.o,this.g=c.g,Rl(this,c.u),this.h=c.h,Pm(this,v1(c.i)),this.m=c.m):c&&(m=String(c).match(h1))?(this.l=!1,Cl(this,m[1]||"",!0),this.o=Dl(m[2]||""),this.g=Dl(m[3]||"",!0),Rl(this,m[4]),this.h=Dl(m[5]||"",!0),Pm(this,m[6]||"",!0),this.m=Dl(m[7]||"")):(this.l=!1,this.i=new Ol(null,this.l))}fa.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Il(m,f1,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Il(m,f1,!0),"@"),c.push(Ar(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Il(g,g.charAt(0)=="/"?LD:PD,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Il(g,UD)),c.join("")},fa.prototype.resolve=function(c){const m=sr(this);let g=!!c.j;g?Cl(m,c.j):g=!!c.o,g?m.o=c.o:g=!!c.g,g?m.g=c.g:g=c.u!=null;var T=c.h;if(g)Rl(m,c.u);else if(g=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var M=m.h.lastIndexOf("/");M!=-1&&(T=m.h.slice(0,M+1)+T)}if(M=T,M==".."||M==".")T="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){T=M.lastIndexOf("/",0)==0,M=M.split("/");const L=[];for(let W=0;W<M.length;){const de=M[W++];de=="."?T&&W==M.length&&L.push(""):de==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),T&&W==M.length&&L.push("")):(L.push(de),T=!0)}T=L.join("/")}else T=M}return g?m.h=T:g=c.i.toString()!=="",g?Pm(m,v1(c.i)):g=!!c.m,g&&(m.m=c.m),m};function sr(c){return new fa(c)}function Cl(c,m,g){c.j=g?Dl(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Rl(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Pm(c,m,g){m instanceof Ol?(c.i=m,BD(c.i,c.l)):(g||(m=Il(m,VD)),c.i=new Ol(m,c.l))}function Pe(c,m,g){c.i.set(m,g)}function Bu(c){return Pe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Dl(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Il(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,MD),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function MD(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var f1=/[#\/\?@]/g,PD=/[#\?:]/g,LD=/[#\?]/g,VD=/[#\?@]/g,UD=/#/g;function Ol(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Ri(c){c.g||(c.g=new Map,c.h=0,c.i&&kD(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Ol.prototype,t.add=function(c,m){Ri(this),this.i=null,c=Rs(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function m1(c,m){Ri(c),m=Rs(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function p1(c,m){return Ri(c),m=Rs(c,m),c.g.has(m)}t.forEach=function(c,m){Ri(this),this.g.forEach(function(g,T){g.forEach(function(M){c.call(m,M,T,this)},this)},this)};function g1(c,m){Ri(c);let g=[];if(typeof m=="string")p1(c,m)&&(g=g.concat(c.g.get(Rs(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)g=g.concat(c[m]);return g}t.set=function(c,m){return Ri(this),this.i=null,c=Rs(this,c),p1(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=g1(this,c),c.length>0?String(c[0]):m):m};function y1(c,m,g){m1(c,m),g.length>0&&(c.i=null,c.g.set(Rs(c,m),y(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var g=m[T];const M=Ar(g);g=g1(this,g);for(let L=0;L<g.length;L++){let W=M;g[L]!==""&&(W+="="+Ar(g[L])),c.push(W)}}return this.i=c.join("&")};function v1(c){const m=new Ol;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Rs(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function BD(c,m){m&&!c.j&&(Ri(c),c.i=null,c.g.forEach(function(g,T){const M=T.toLowerCase();T!=M&&(m1(this,T),y1(this,M,g))},c)),c.j=m}function zD(c,m){const g=new ar;if(s.Image){const T=new Image;T.onload=h(ma,g,"TestLoadImage: loaded",!0,m,T),T.onerror=h(ma,g,"TestLoadImage: error",!1,m,T),T.onabort=h(ma,g,"TestLoadImage: abort",!1,m,T),T.ontimeout=h(ma,g,"TestLoadImage: timeout",!1,m,T),s.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function FD(c,m){const g=new ar,T=new AbortController,M=setTimeout(()=>{T.abort(),ma(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(L=>{clearTimeout(M),L.ok?ma(g,"TestPingServer: ok",!0,m):ma(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),ma(g,"TestPingServer: error",!1,m)})}function ma(c,m,g,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(g)}catch{}}function $D(){this.g=new Mu}function Lm(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Lm,_l),Lm.prototype.g=function(){return new zu(this.i,this.h)};function zu(c,m){ht.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(zu,ht),t=zu.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,kl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||s).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jl(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,kl(this)),this.g&&(this.readyState=3,kl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_1(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function _1(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?jl(this):kl(this),this.readyState==3&&_1(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,jl(this))},t.Na=function(c){this.g&&(this.response=c,jl(this))},t.ga=function(){this.g&&jl(this)};function jl(c){c.readyState=4,c.l=null,c.j=null,c.B=null,kl(c)}t.setRequestHeader=function(c,m){this.A.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function kl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function b1(c){let m="";return G(c,function(g,T){m+=T,m+=":",m+=g,m+=`\r
`}),m}function Vm(c,m,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=b1(g),typeof c=="string"?g!=null&&Ar(g):Pe(c,m,g))}function Xe(c){ht.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Xe,ht);var qD=/^https?$/i,HD=["POST","PUT"];t=Xe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,m,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Si.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(L){x1(this,L);return}if(c=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)g.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())g.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),M=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(HD,m,void 0)>=0)||T||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of g)this.g.setRequestHeader(L,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(L){x1(this,L)}};function x1(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,w1(c),Fu(c)}function w1(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,St(this,"complete"),St(this,"abort"),Fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fu(this,!0)),Xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?E1(this):this.Xa())},t.Xa=function(){E1(this)};function E1(c){if(c.h&&typeof i<"u"){if(c.v&&pa(c)==4)setTimeout(c.Ca.bind(c),0);else if(St(c,"readystatechange"),pa(c)==4){c.h=!1;try{const L=c.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var T;if(T=L===0){let W=String(c.D).match(h1)[1]||null;!W&&s.self&&s.self.location&&(W=s.self.location.protocol.slice(0,-1)),T=!qD.test(W?W.toLowerCase():"")}g=T}if(g)St(c,"complete"),St(c,"success");else{c.o=6;try{var M=pa(c)>2?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.ca()+"]",w1(c)}}finally{Fu(c)}}}}function Fu(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,m||St(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function pa(c){return c.g?c.g.readyState:0}t.ca=function(){try{return pa(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),vl(m)}};function T1(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function GD(c){const m={};c=(c.g&&pa(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(D(c[T]))continue;var g=El(c[T]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=m[M]||[];m[M]=L,L.push(g)}K(m,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ml(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function S1(c){this.za=0,this.i=[],this.j=new ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ml("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ml("baseRetryDelayMs",5e3,c),this.Za=Ml("retryDelaySeedMs",1e4,c),this.Ta=Ml("forwardChannelMaxRetries",2,c),this.va=Ml("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new o1(c&&c.concurrentRequestLimit),this.Ba=new $D,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=S1.prototype,t.ka=8,t.I=1,t.connect=function(c,m,g,T){yt(0),this.W=c,this.H=m||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.J=k1(this,null,this.W),qu(this)};function Um(c){if(N1(c),c.I==3){var m=c.V++,g=sr(c.J);if(Pe(g,"SID",c.M),Pe(g,"RID",m),Pe(g,"TYPE","terminate"),Pl(c,g),m=new ir(c,c.j,m),m.M=2,m.A=Bu(sr(g)),g=!1,s.navigator&&s.navigator.sendBeacon)try{g=s.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&s.Image&&(new Image().src=m.A,g=!0),g||(m.g=M1(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Lt(m)}j1(c)}function $u(c){c.g&&(zm(c),c.g.cancel(),c.g=null)}function N1(c){$u(c),c.v&&(s.clearTimeout(c.v),c.v=null),Hu(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function qu(c){if(!l1(c.h)&&!c.m){c.m=!0;var m=c.Ea;V||v(),q||(V(),q=!0),S.add(m,c),c.D=0}}function YD(c,m){return c1(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=at(d(c.Ea,c,m),O1(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const M=new ir(this,this.j,c);let L=this.o;if(this.U&&(L?(L=ee(L),J(L,this.U)):L=this.U),this.u!==null||this.R||(M.J=L,L=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=C1(this,M,m),g=sr(this.J),Pe(g,"RID",c),Pe(g,"CVER",22),this.G&&Pe(g,"X-HTTP-Session-Id",this.G),Pl(this,g),L&&(this.R?m="headers="+Ar(b1(L))+"&"+m:this.u&&Vm(g,this.u,L)),Mm(this.h,M),this.Ra&&Pe(g,"TYPE","init"),this.S?(Pe(g,"$req",m),Pe(g,"SID","null"),M.U=!0,Nl(M,g,null)):Nl(M,g,m),this.I=2}}else this.I==3&&(c?A1(this,c):this.i.length==0||l1(this.h)||A1(this))};function A1(c,m){var g;m?g=m.l:g=c.V++;const T=sr(c.J);Pe(T,"SID",c.M),Pe(T,"RID",g),Pe(T,"AID",c.K),Pl(c,T),c.u&&c.o&&Vm(T,c.u,c.o),g=new ir(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),m&&(c.i=m.G.concat(c.i)),m=C1(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Mm(c.h,g),Nl(g,T,m)}function Pl(c,m){c.H&&G(c.H,function(g,T){Pe(m,T,g)}),c.l&&G({},function(g,T){Pe(m,T,g)})}function C1(c,m,g){g=Math.min(c.i.length,g);const T=c.l?d(c.l.Ka,c.l,c):null;e:{var M=c.i;let de=-1;for(;;){const ft=["count="+g];de==-1?g>0?(de=M[0].g,ft.push("ofs="+de)):de=0:ft.push("ofs="+de);let De=!0;for(let vt=0;vt<g;vt++){var L=M[vt].g;const or=M[vt].map;if(L-=de,L<0)de=Math.max(0,M[vt].g-100),De=!1;else try{L="req"+L+"_"||"";try{var W=or instanceof Map?or:Object.entries(or);for(const[Ii,ga]of W){let ya=ga;o(ga)&&(ya=yl(ga)),ft.push(L+Ii+"="+encodeURIComponent(ya))}}catch(Ii){throw ft.push(L+"type="+encodeURIComponent("_badmap")),Ii}}catch{T&&T(or)}}if(De){W=ft.join("&");break e}}W=void 0}return c=c.i.splice(0,g),m.G=c,W}function R1(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;V||v(),q||(V(),q=!0),S.add(m,c),c.A=0}}function Bm(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=at(d(c.Da,c),O1(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,D1(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=at(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),$u(this),D1(this))};function zm(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function D1(c){c.g=new ir(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=sr(c.na);Pe(m,"RID","rpc"),Pe(m,"SID",c.M),Pe(m,"AID",c.K),Pe(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Pe(m,"TO",c.ia),Pe(m,"TYPE","xmlhttp"),Pl(c,m),c.u&&c.o&&Vm(m,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=Bu(sr(m)),g.u=null,g.R=!0,he(g,c)}t.Va=function(){this.C!=null&&(this.C=null,$u(this),Bm(this),yt(19))};function Hu(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function I1(c,m){var g=null;if(c.g==m){Hu(c),zm(c),c.g=null;var T=2}else if(km(c.h,m))g=m.G,u1(c.h,m),T=1;else return;if(c.I!=0){if(m.o)if(T==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var M=c.D;T=ua(),St(T,new Nt(T,g)),qu(c)}else R1(c);else if(M=m.m,M==3||M==0&&m.X>0||!(T==1&&YD(c,m)||T==2&&Bm(c)))switch(g&&g.length>0&&(m=c.h,m.i=m.i.concat(g)),M){case 1:Di(c,5);break;case 4:Di(c,10);break;case 3:Di(c,6);break;default:Di(c,2)}}}function O1(c,m){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*m}function Di(c,m){if(c.j.info("Error code "+m),m==2){var g=d(c.bb,c),T=c.Ua;const M=!T;T=new fa(T||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Cl(T,"https"),Bu(T),M?zD(T.toString(),g):FD(T.toString(),g)}else yt(2);c.I=0,c.l&&c.l.pa(m),j1(c),N1(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function j1(c){if(c.I=0,c.ja=[],c.l){const m=d1(c.h);(m.length!=0||c.i.length!=0)&&(w(c.ja,m),w(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function k1(c,m,g){var T=g instanceof fa?sr(g):new fa(g);if(T.g!="")m&&(T.g=m+"."+T.g),Rl(T,T.u);else{var M=s.location;T=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const L=new fa(null);T&&Cl(L,T),m&&(L.g=m),M&&Rl(L,M),g&&(L.h=g),T=L}return g=c.G,m=c.wa,g&&m&&Pe(T,g,m),Pe(T,"VER",c.ka),Pl(c,T),T}function M1(c,m,g){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new Xe(new Lm({ab:g})):new Xe(c.ma),m.Fa(c.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function P1(){}t=P1.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gu(){}Gu.prototype.g=function(c,m){return new sn(c,m)};function sn(c,m){ht.call(this),this.g=new S1(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!D(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!D(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ds(this)}f(sn,ht),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Um(this.g)},sn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=yl(c),c=g);m.i.push(new jD(m.Ya++,c)),m.I==3&&qu(m)},sn.prototype.N=function(){this.g.l=null,delete this.j,Um(this.g),delete this.g,sn.Z.N.call(this)};function L1(c){Ss.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}f(L1,Ss);function V1(){bl.call(this),this.status=1}f(V1,bl);function Ds(c){this.g=c}f(Ds,P1),Ds.prototype.ra=function(){St(this.g,"a")},Ds.prototype.qa=function(c){St(this.g,new L1(c))},Ds.prototype.pa=function(c){St(this.g,new V1)},Ds.prototype.oa=function(){St(this.g,"b")},Gu.prototype.createWebChannel=Gu.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,bA=function(){return new Gu},_A=function(){return ua()},vA=rr,wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ti.NO_ERROR=0,Ti.TIMEOUT=8,Ti.HTTP_ERROR=6,Hd=Ti,Ns.COMPLETE="complete",yA=Ns,Pu.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",ht.prototype.listen=ht.prototype.J,rc=Pu,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,gA=Xe}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const Jx="@firebase/firestore",Zx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new Uf("@firebase/firestore");function Us(){return es.logLevel}function X(t,...e){if(es.logLevel<=ye.DEBUG){const n=e.map(Tv);es.debug(`Firestore (${el}): ${t}`,...n)}}function ta(t,...e){if(es.logLevel<=ye.ERROR){const n=e.map(Tv);es.error(`Firestore (${el}): ${t}`,...n)}}function Io(t,...e){if(es.logLevel<=ye.WARN){const n=e.map(Tv);es.warn(`Firestore (${el}): ${t}`,...n)}}function Tv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xA(t,r,n)}function xA(t,e,n){let r=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ta(r),new Error(r)}function Se(t,e,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,t||xA(e,a,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class K6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Q6{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const a=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hr,e.enqueueRetryable(()=>a(this.currentUser))};const s=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await a(this.currentUser)})},o=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>o(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?o(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new wA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class X6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class J6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new X6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Z6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,In(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const a=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ew(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ew(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=e5(40);for(let i=0;i<a.length;++i)r.length<20&&a[i]<n&&(r+=e.charAt(a[i]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Ey(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const a=t.charAt(r),i=e.charAt(r);if(a!==i)return Up(a)===Up(i)?ve(a,i):Up(a)?1:-1}return ve(t.length,e.length)}const t5=55296,n5=57343;function Up(t){const e=t.charCodeAt(0);return e>=t5&&e<=n5}function Oo(t,e,n){return t.length===e.length&&t.every((r,a)=>n(r,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="__name__";class cr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let a=0;a<r;a++){const i=cr.compareSegments(e.get(a),n.get(a));if(i!==0)return i}return ve(e.length,n.length)}static compareSegments(e,n){const r=cr.isNumericId(e),a=cr.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?cr.extractNumericId(e).compare(cr.extractNumericId(n)):Ey(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ka.fromString(e.substring(4,e.length-2))}}class je extends cr{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new je(n)}static emptyPath(){return new je([])}}const r5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends cr{construct(e,n,r){return new Ot(e,n,r)}static isValidIdentifier(e){return r5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tw}static keyField(){return new Ot([tw])}static fromServerFormat(e){const n=[];let r="",a=0;const i=()=>{if(r.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new Q(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[a+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else o==="`"?(s=!s,a++):o!=="."||s?(r+=o,a++):(i(),a++)}if(i(),s)throw new Q(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(je.fromString(e))}static fromName(e){return new Z(je.fromString(e).popFirst(5))}static empty(){return new Z(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e,n){if(!n)throw new Q(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a5(t,e,n,r){if(e===!0&&r===!0)throw new Q(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nw(t){if(!Z.isDocumentKey(t))throw new Q(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rw(t){if(Z.isDocumentKey(t))throw new Q(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(t);throw new Q(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t,e){const n={typeString:t};return e&&(n.value=e),n}function bu(t,e){if(!TA(t))throw new Q(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const a=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(a&&typeof s!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(i!==void 0&&s!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=-62135596800,iw=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(e){return fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*iw);return new fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<aw)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iw}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,fe._jsonSchema))return new fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:dt("string",fe._jsonSchemaVersion),seconds:dt("number"),nanoseconds:dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new fe(0,0))}static max(){return new ae(new fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function i5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=ae.fromTimestamp(r===1e9?new fe(n+1,0):new fe(n,r));return new ri(a,Z.empty(),e)}function s5(t){return new ri(t.readTime,t.key,Gc)}class ri{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ri(ae.min(),Z.empty(),Gc)}static max(){return new ri(ae.max(),Z.empty(),Gc)}}function o5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==l5)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,a)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let a=0,i=0,s=!1;e.forEach(o=>{++a,o.next(()=>{++i,s&&i===a&&n()},u=>r(u))}),s=!0,i===a&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(a=>a?$.resolve(a):r());return n}static forEach(e,n){const r=[];return e.forEach((a,i)=>{r.push(n.call(this,a,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,a)=>{const i=e.length,s=new Array(i);let o=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{s[d]=h,++o,o===i&&r(s)},h=>a(h))}})}static doWhile(e,n){return new $((r,a)=>{const i=()=>{e()===!0?n().next(()=>{i()},a):r()};i()})}}function u5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ff.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=-1;function $f(t){return t==null}function Mh(t){return t===0&&1/t==-1/0}function d5(t){return typeof t=="number"&&Number.isInteger(t)&&!Mh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="";function h5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sw(e)),e=f5(t.get(n),e);return sw(e)}function f5(t,e){let n=e;const r=t.length;for(let a=0;a<r;a++){const i=t.charAt(a);switch(i){case"\0":n+="";break;case SA:n+="";break;default:n+=i}}return n}function sw(t){return t+SA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gd(this.root,e,this.comparator,!1)}getReverseIterator(){return new gd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gd(this.root,e,this.comparator,!0)}}class gd{constructor(e,n,r,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,a,i){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=a??Ct.EMPTY,this.right=i??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,a,i){return new Ct(e??this.key,n??this.value,r??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let a=this;const i=r(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,n,r),null):i===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Ct.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,a,i){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lw(this.data.getIterator())}getIteratorFrom(e){return new lw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=r.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class lw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new mn([])}unionWith(e){let n=new pt(Ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AA("Invalid base64 string: "+i):i}}(e);return new Mt(n)}static fromUint8Array(e){const n=function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i}(e);return new Mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const m5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=m5.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ii(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="server_timestamp",RA="__type__",DA="__previous_value__",IA="__local_write_time__";function Av(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RA])==null?void 0:r.stringValue)===CA}function qf(t){const e=t.mapValue.fields[DA];return Av(e)?qf(e):e}function Yc(t){const e=ai(t.mapValue.fields[IA].timestampValue);return new fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n,r,a,i,s,o,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Ph="(default)";class Wc{constructor(e,n){this.projectId=e,this.database=n||Ph}static empty(){return new Wc("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="__type__",g5="__max__",yd={mapValue:{}},jA="__vector__",Lh="value";function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Av(t)?4:v5(t)?9007199254740991:y5(t)?10:11:ne(28295,{value:t})}function xr(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yc(t).isEqual(Yc(e));case 3:return function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=ai(a.timestampValue),o=ai(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,i){return ii(a.bytesValue).isEqual(ii(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,i){return et(a.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(a.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(a,i){if("integerValue"in a&&"integerValue"in i)return et(a.integerValue)===et(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=et(a.doubleValue),o=et(i.doubleValue);return s===o?Mh(s)===Mh(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Oo(t.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return function(a,i){const s=a.mapValue.fields||{},o=i.mapValue.fields||{};if(ow(s)!==ow(o))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(o[u]===void 0||!xr(s[u],o[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Kc(t,e){return(t.values||[]).find(n=>xr(n,e))!==void 0}function jo(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=et(i.integerValue||i.doubleValue),u=et(s.integerValue||s.doubleValue);return o<u?-1:o>u?1:o===u?0:isNaN(o)?isNaN(u)?0:-1:1}(t,e);case 3:return cw(t.timestampValue,e.timestampValue);case 4:return cw(Yc(t),Yc(e));case 5:return Ey(t.stringValue,e.stringValue);case 6:return function(i,s){const o=ii(i),u=ii(s);return o.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),u=s.split("/");for(let d=0;d<o.length&&d<u.length;d++){const h=ve(o[d],u[d]);if(h!==0)return h}return ve(o.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ve(et(i.latitude),et(s.latitude));return o!==0?o:ve(et(i.longitude),et(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uw(t.arrayValue,e.arrayValue);case 10:return function(i,s){var p,y,w,N;const o=i.fields||{},u=s.fields||{},d=(p=o[Lh])==null?void 0:p.arrayValue,h=(y=u[Lh])==null?void 0:y.arrayValue,f=ve(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((N=h==null?void 0:h.values)==null?void 0:N.length)||0);return f!==0?f:uw(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,s){if(i===yd.mapValue&&s===yd.mapValue)return 0;if(i===yd.mapValue)return 1;if(s===yd.mapValue)return-1;const o=i.fields||{},u=Object.keys(o),d=s.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Ey(u[f],h[f]);if(p!==0)return p;const y=jo(o[u[f]],d[h[f]]);if(y!==0)return y}return ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function cw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=ai(t),r=ai(e),a=ve(n.seconds,r.seconds);return a!==0?a:ve(n.nanos,r.nanos)}function uw(t,e){const n=t.values||[],r=e.values||[];for(let a=0;a<n.length&&a<r.length;++a){const i=jo(n[a],r[a]);if(i)return i}return ve(n.length,r.length)}function ko(t){return Ty(t)}function Ty(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",a=!0;for(const i of n.values||[])a?a=!1:r+=",",r+=Ty(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",i=!0;for(const s of r)i?i=!1:a+=",",a+=`${s}:${Ty(n.fields[s])}`;return a+"}"}(t.mapValue):ne(61005,{value:t})}function Gd(t){switch(si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qf(t);return e?16+Gd(e):16;case 5:return 2*t.stringValue.length;case 6:return ii(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,i)=>a+Gd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let a=0;return pi(r.fields,(i,s)=>{a+=i.length+Gd(s)}),a}(t.mapValue);default:throw ne(13486,{value:t})}}function dw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sy(t){return!!t&&"integerValue"in t}function Cv(t){return!!t&&"arrayValue"in t}function hw(t){return!!t&&"nullValue"in t}function fw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yd(t){return!!t&&"mapValue"in t}function y5(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[OA])==null?void 0:r.stringValue)===jA}function Ec(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ec(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ec(t.arrayValue.values[n]);return e}return{...t}}function v5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===g5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(n)}setAll(e){let n=Ot.emptyPath(),r={},a=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const u=this.getFieldsMap(n);this.applyChanges(u,r,a),r={},a=[],n=o.popLast()}s?r[o.lastSegment()]=Ec(s):a.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,a)}delete(e){const n=this.field(e.popLast());Yd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=n.mapValue.fields[e.get(r)];Yd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(a,i)=>e[a]=i);for(const a of r)delete e[a]}clone(){return new Zt(Ec(this.value))}}function kA(t){const e=[];return pi(t.fields,(n,r)=>{const a=new Ot([n]);if(Yd(r)){const i=kA(r.mapValue).fields;if(i.length===0)e.push(a);else for(const s of i)e.push(a.child(s))}else e.push(a)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,a,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=a,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Bt(e,0,ae.min(),ae.min(),ae.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,a){return new Bt(e,1,n,ae.min(),r,a,0)}static newNoDocument(e,n){return new Bt(e,2,n,ae.min(),ae.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,ae.min(),ae.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.position=e,this.inclusive=n}}function mw(t,e,n){let r=0;for(let a=0;a<t.position.length;a++){const i=e[a],s=t.position[a];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(s.referenceValue),n.key):r=jo(s,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function pw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function _5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class ct extends MA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new x5(e,n,r):n==="array-contains"?new T5(e,r):n==="in"?new S5(e,r):n==="not-in"?new N5(e,r):n==="array-contains-any"?new A5(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new w5(e,r):new E5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jo(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends MA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qn(e,n)}matches(e){return PA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PA(t){return t.op==="and"}function LA(t){return b5(t)&&PA(t)}function b5(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function Ny(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+ko(t.value);if(LA(t))return t.filters.map(e=>Ny(e)).join(",");{const e=t.filters.map(n=>Ny(n)).join(",");return`${t.op}(${e})`}}function VA(t,e){return t instanceof ct?function(r,a){return a instanceof ct&&r.op===a.op&&r.field.isEqual(a.field)&&xr(r.value,a.value)}(t,e):t instanceof Qn?function(r,a){return a instanceof Qn&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((i,s,o)=>i&&VA(s,a.filters[o]),!0):!1}(t,e):void ne(19439)}function UA(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${ko(n.value)}`}(t):t instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(UA).join(" ,")+"}"}(t):"Filter"}class x5 extends ct{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class w5 extends ct{constructor(e,n){super(e,"in",n),this.keys=BA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class E5 extends ct{constructor(e,n){super(e,"not-in",n),this.keys=BA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class T5 extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cv(n)&&Kc(n.arrayValue,this.value)}}class S5 extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kc(this.value.arrayValue,n)}}class N5 extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kc(this.value.arrayValue,n)}}class A5 extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,n=null,r=[],a=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function gw(t,e=null,n=[],r=[],a=null,i=null,s=null){return new C5(t,e,n,r,a,i,s)}function Rv(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),$f(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ko(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ko(r)).join(",")),e.Te=n}return e.Te}function Dv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pw(t.startAt,e.startAt)&&pw(t.endAt,e.endAt)}function Ay(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n=null,r=[],a=[],i=null,s="F",o=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function R5(t,e,n,r,a,i,s,o){return new rl(t,e,n,r,a,i,s,o)}function Hf(t){return new rl(t)}function yw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zA(t){return t.collectionGroup!==null}function Tc(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new pt(Ot.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(o=o.add(d.field))})}),o})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Qc(i,r))}),n.has(Ot.keyField().canonicalString())||e.Ie.push(new Qc(Ot.keyField(),r))}return e.Ie}function pr(t){const e=se(t);return e.Ee||(e.Ee=D5(e,Tc(t))),e.Ee}function D5(t,e){if(t.limitType==="F")return gw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const i=a.dir==="desc"?"asc":"desc";return new Qc(a.field,i)});const n=t.endAt?new Vh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vh(t.startAt.position,t.startAt.inclusive):null;return gw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cy(t,e){const n=t.filters.concat([e]);return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ry(t,e,n){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gf(t,e){return Dv(pr(t),pr(e))&&t.limitType===e.limitType}function FA(t){return`${Rv(pr(t))}|lt:${t.limitType}`}function Bs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>UA(a)).join(", ")}]`),$f(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>ko(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>ko(a)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function Yf(t,e){return e.isFoundDocument()&&function(r,a){const i=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,a){for(const i of Tc(r))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,a){for(const i of r.filters)if(!i.matches(a))return!1;return!0}(t,e)&&function(r,a){return!(r.startAt&&!function(s,o,u){const d=mw(s,o,u);return s.inclusive?d<=0:d<0}(r.startAt,Tc(r),a)||r.endAt&&!function(s,o,u){const d=mw(s,o,u);return s.inclusive?d>=0:d>0}(r.endAt,Tc(r),a))}(t,e)}function I5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $A(t){return(e,n)=>{let r=!1;for(const a of Tc(t)){const i=O5(a,e,n);if(i!==0)return i;r=r||a.field.isKeyField()}return 0}}function O5(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,s,o){const u=s.data.field(i),d=o.data.field(i);return u!==null&&d!==null?jo(u,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[a,i]of r)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(const[a,i]of r)e(a,i)})}isEmpty(){return NA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=new Ke(Z.comparator);function na(){return j5}const qA=new Ke(Z.comparator);function ac(...t){let e=qA;for(const n of t)e=e.insert(n.key,n);return e}function HA(t){let e=qA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vi(){return Sc()}function GA(){return Sc()}function Sc(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const k5=new Ke(Z.comparator),M5=new pt(Z.comparator);function _e(...t){let e=M5;for(const n of t)e=e.add(n);return e}const P5=new pt(ve);function L5(){return P5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function YA(t){return{integerValue:""+t}}function V5(t,e){return d5(e)?YA(e):Iv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this._=void 0}}function U5(t,e,n){return t instanceof Uh?function(a,i){const s={fields:{[RA]:{stringValue:CA},[IA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&Av(i)&&(i=qf(i)),i&&(s.fields[DA]=i),{mapValue:s}}(n,e):t instanceof Mo?KA(t,e):t instanceof Xc?QA(t,e):function(a,i){const s=WA(a,i),o=vw(s)+vw(a.Ae);return Sy(s)&&Sy(a.Ae)?YA(o):Iv(a.serializer,o)}(t,e)}function B5(t,e,n){return t instanceof Mo?KA(t,e):t instanceof Xc?QA(t,e):n}function WA(t,e){return t instanceof Bh?function(r){return Sy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Uh extends Wf{}class Mo extends Wf{constructor(e){super(),this.elements=e}}function KA(t,e){const n=XA(e);for(const r of t.elements)n.some(a=>xr(a,r))||n.push(r);return{arrayValue:{values:n}}}class Xc extends Wf{constructor(e){super(),this.elements=e}}function QA(t,e){let n=XA(e);for(const r of t.elements)n=n.filter(a=>!xr(a,r));return{arrayValue:{values:n}}}class Bh extends Wf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function vw(t){return et(t.integerValue||t.doubleValue)}function XA(t){return Cv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n){this.field=e,this.transform=n}}function F5(t,e){return t.field.isEqual(e.field)&&function(r,a){return r instanceof Mo&&a instanceof Mo||r instanceof Xc&&a instanceof Xc?Oo(r.elements,a.elements,xr):r instanceof Bh&&a instanceof Bh?xr(r.Ae,a.Ae):r instanceof Uh&&a instanceof Uh}(t.transform,e.transform)}class $5{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kf{}function JA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ov(t.key,Wn.none()):new xu(t.key,t.data,Wn.none());{const n=t.data,r=Zt.empty();let a=new pt(Ot.comparator);for(let i of e.fields)if(!a.has(i)){let s=n.field(i);s===null&&i.length>1&&(i=i.popLast(),s=n.field(i)),s===null?r.delete(i):r.set(i,s),a=a.add(i)}return new gi(t.key,r,new mn(a.toArray()),Wn.none())}}function q5(t,e,n){t instanceof xu?function(a,i,s){const o=a.value.clone(),u=bw(a.fieldTransforms,i,s.transformResults);o.setAll(u),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof gi?function(a,i,s){if(!Wd(a.precondition,i))return void i.convertToUnknownDocument(s.version);const o=bw(a.fieldTransforms,i,s.transformResults),u=i.data;u.setAll(ZA(a)),u.setAll(o),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Nc(t,e,n,r){return t instanceof xu?function(i,s,o,u){if(!Wd(i.precondition,s))return o;const d=i.value.clone(),h=xw(i.fieldTransforms,u,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof gi?function(i,s,o,u){if(!Wd(i.precondition,s))return o;const d=xw(i.fieldTransforms,u,s),h=s.data;return h.setAll(ZA(i)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,s,o){return Wd(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function H5(t,e){let n=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),i=WA(r.transform,a||null);i!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,i))}return n||null}function _w(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Oo(r,a,(i,s)=>F5(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xu extends Kf{constructor(e,n,r,a=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class gi extends Kf{constructor(e,n,r,a,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ZA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function bw(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let a=0;a<n.length;a++){const i=t[a],s=i.transform,o=e.data.field(i.field);r.set(i.field,B5(s,o,n[a]))}return r}function xw(t,e,n){const r=new Map;for(const a of t){const i=a.transform,s=n.data.field(a.field);r.set(a.field,U5(i,s,e))}return r}class Ov extends Kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G5 extends Kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n,r,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&q5(i,e,r[a])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GA();return this.mutations.forEach(a=>{const i=e.get(a.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=n.has(a.key)?null:o;const u=JA(s,o);u!==null&&r.set(a.key,u),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,r)=>_w(n,r))&&Oo(this.baseMutations,e.baseMutations,(n,r)=>_w(n,r))}}class jv{constructor(e,n,r,a){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=function(){return k5}();const i=e.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,r[s].version);return new jv(e,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,we;function Q5(t){switch(t){case B.OK:return ne(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function eC(t){if(t===void 0)return ta("GRPC error has no .code"),B.UNKNOWN;switch(t){case it.OK:return B.OK;case it.CANCELLED:return B.CANCELLED;case it.UNKNOWN:return B.UNKNOWN;case it.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case it.INTERNAL:return B.INTERNAL;case it.UNAVAILABLE:return B.UNAVAILABLE;case it.UNAUTHENTICATED:return B.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case it.NOT_FOUND:return B.NOT_FOUND;case it.ALREADY_EXISTS:return B.ALREADY_EXISTS;case it.PERMISSION_DENIED:return B.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case it.ABORTED:return B.ABORTED;case it.OUT_OF_RANGE:return B.OUT_OF_RANGE;case it.UNIMPLEMENTED:return B.UNIMPLEMENTED;case it.DATA_LOSS:return B.DATA_LOSS;default:return ne(39323,{code:t})}}(we=it||(it={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new Ka([4294967295,4294967295],0);function ww(t){const e=X5().encode(t),n=new pA;return n.update(e),new Uint8Array(n.digest())}function Ew(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ka([n,r],0),new Ka([a,i],0)]}class kv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ic(`Invalid padding: ${n}`);if(r<0)throw new ic(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ic(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ka.fromNumber(this.ge)}ye(e,n,r){let a=e.add(n.multiply(Ka.fromNumber(r)));return a.compare(J5)===1&&(a=new Ka([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ww(e),[r,a]=Ew(n);for(let i=0;i<this.hashCount;i++){const s=this.ye(r,a,i);if(!this.we(s))return!1}return!0}static create(e,n,r){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new kv(i,a,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.ge===0)return;const n=ww(e),[r,a]=Ew(n);for(let i=0;i<this.hashCount;i++){const s=this.ye(r,a,i);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n,r,a,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const a=new Map;return a.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qf(ae.min(),a,new Ke(ve),na(),_e())}}class wu{constructor(e,n,r,a,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wu(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,a){this.be=e,this.removedTargetIds=n,this.key=r,this.De=a}}class tC{constructor(e,n){this.targetId=e,this.Ce=n}}class nC{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=a}}class Tw{constructor(){this.ve=0,this.Fe=Sw(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:ne(38017,{changeType:i})}}),new wu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Sw()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z5{constructor(e){this.Ge=e,this.ze=new Map,this.je=na(),this.Je=vd(),this.He=vd(),this.Ye=new Ke(ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,a)=>{this.rt(a)&&n(a)})}st(e){const n=e.targetId,r=e.Ce.count,a=this.ot(n);if(a){const i=a.target;if(Ay(i))if(r===0){const s=new Z(i.path);this.et(n,s,Bt.newNoDocument(s,ae.min()))}else Se(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),u=o?this.ct(o,e,s):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:i=0}=n;let s,o;try{s=ii(r).toUint8Array()}catch(u){if(u instanceof AA)return Io("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{o=new kv(s,a,i)}catch(u){return Io(u instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let a=0;return r.forEach(i=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.et(n,i,null),a++)}),a}Tt(e){const n=new Map;this.ze.forEach((i,s)=>{const o=this.ot(s);if(o){if(i.current&&Ay(o.target)){const u=new Z(o.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Bt.newNoDocument(u,e))}i.Be&&(n.set(s,i.ke()),i.qe())}});let r=_e();this.He.forEach((i,s)=>{let o=!0;s.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(i))}),this.je.forEach((i,s)=>s.setReadTime(e));const a=new Qf(e,n,this.Ye,this.je,r);return this.je=na(),this.Je=vd(),this.He=vd(),this.Ye=new Ke(ve),a}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Tw,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vd(){return new Ke(Z.comparator)}function Sw(){return new Ke(Z.comparator)}const eL={asc:"ASCENDING",desc:"DESCENDING"},tL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nL={and:"AND",or:"OR"};class rL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dy(t,e){return t.useProto3Json||$f(e)?e:{value:e}}function zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aL(t,e){return zh(t,e.toTimestamp())}function gr(t){return Se(!!t,49232),ae.fromTimestamp(function(n){const r=ai(n);return new fe(r.seconds,r.nanos)}(t))}function Mv(t,e){return Iy(t,e).canonicalString()}function Iy(t,e){const n=function(a){return new je(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aC(t){const e=je.fromString(t);return Se(cC(e),10190,{key:e.toString()}),e}function Oy(t,e){return Mv(t.databaseId,e.path)}function Bp(t,e){const n=aC(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(sC(n))}function iC(t,e){return Mv(t.databaseId,e)}function iL(t){const e=aC(t);return e.length===4?je.emptyPath():sC(e)}function jy(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sC(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Nw(t,e,n){return{name:Oy(t,e),fields:n.value.mapValue.fields}}function sL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Se(h===void 0||typeof h=="string",58123),Mt.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(d){const h=d.code===void 0?B.UNKNOWN:eC(d.code);return new Q(h,d.message||"")}(s);n=new nC(r,a,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Bp(t,r.document.name),i=gr(r.document.updateTime),s=r.document.createTime?gr(r.document.createTime):ae.min(),o=new Zt({mapValue:{fields:r.document.fields}}),u=Bt.newFoundDocument(a,i,s,o),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Kd(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Bp(t,r.document),i=r.readTime?gr(r.readTime):ae.min(),s=Bt.newNoDocument(a,i),o=r.removedTargetIds||[];n=new Kd([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Bp(t,r.document),i=r.removedTargetIds||[];n=new Kd([],i,a,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:i}=r,s=new K5(a,i),o=r.targetId;n=new tC(o,s)}}return n}function oL(t,e){let n;if(e instanceof xu)n={update:Nw(t,e.key,e.value)};else if(e instanceof Ov)n={delete:Oy(t,e.key)};else if(e instanceof gi)n={update:Nw(t,e.key,e.data),updateMask:gL(e.fieldMask)};else{if(!(e instanceof G5))return ne(16599,{Vt:e.type});n={verify:Oy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Uh)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Mo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Xc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Bh)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw ne(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(a,i){return i.updateTime!==void 0?{updateTime:aL(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function lL(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(a,i){let s=a.updateTime?gr(a.updateTime):gr(i);return s.isEqual(ae.min())&&(s=gr(i)),new $5(s,a.transformResults||[])}(n,e))):[]}function cL(t,e){return{documents:[iC(t,e.path)]}}function uL(t,e){const n={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iC(t,a);const i=function(d){if(d.length!==0)return lC(Qn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:zs(p.field),direction:fL(p.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Dy(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:a}}function dL(t){let e=iL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){Se(r===1,65062);const h=n.from[0];h.allDescendants?a=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=oC(f);return p instanceof Qn&&LA(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(p=>function(w){return new Qc(Fs(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let o=null;n.limit&&(o=function(f){let p;return p=typeof f=="object"?f.value:f,$f(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,y=f.values||[];return new Vh(y,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,y=f.values||[];return new Vh(y,p)}(n.endAt)),R5(e,a,s,i,o,"F",u,d)}function hL(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fs(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Fs(n.unaryFilter.field);return ct.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fs(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fs(n.unaryFilter.field);return ct.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(Fs(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(r=>oC(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function fL(t){return eL[t]}function mL(t){return tL[t]}function pL(t){return nL[t]}function zs(t){return{fieldPath:t.canonicalString()}}function Fs(t){return Ot.fromServerFormat(t.fieldPath)}function lC(t){return t instanceof ct?function(n){if(n.op==="=="){if(fw(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NAN"}};if(hw(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fw(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NAN"}};if(hw(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(n.field),op:mL(n.op),value:n.value}}}(t):t instanceof Qn?function(n){const r=n.getFilters().map(a=>lC(a));return r.length===1?r[0]:{compositeFilter:{op:pL(n.op),filters:r}}}(t):ne(54877,{filter:t})}function gL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r,a,i=ae.min(),s=ae.min(),o=Mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=u}withSequenceNumber(e){return new La(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.yt=e}}function vL(t){const e=dL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ry(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.Cn=new bL}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(ri.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(ri.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class bL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n]||new pt(je.comparator),i=!a.has(r);return this.index[n]=a.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(e){return(this.index[e]||new pt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uC=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(uC,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="LruGarbageCollector",xL=1048576;function Rw([t,e],[n,r]){const a=ve(t,n);return a===0?ve(e,r):a}class wL{constructor(e){this.Ir=e,this.buffer=new pt(Rw),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Rw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(Cw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nl(n)?X(Cw,"Ignoring IndexedDB error during garbage collection: ",n):await tl(n)}await this.Vr(3e5)})}}class TL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Ff.ce);const r=new wL(n);return this.mr.forEachTarget(e,a=>r.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>r.Ar(a))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Aw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Aw):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,a,i,s,o,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,s=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(r=f,o=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Us()<=ye.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${a} in `+(o-s)+`ms
	Removed ${i} targets in `+(u-o)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:f})))}}function SL(t,e){return new TL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,r,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(r!==null&&Nc(r.mutation,a,mn.empty(),fe.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const a=Vi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,r).next(i=>{let s=ac();return i.forEach((o,u)=>{s=s.insert(o,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const a=[];return r.forEach(i=>{n.has(i)||a.push(i)}),this.documentOverlayCache.getOverlays(e,a).next(i=>{i.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,a){let i=na();const s=Sc(),o=function(){return Sc()}();return n.forEach((u,d)=>{const h=r.get(d.key);a.has(d.key)&&(h===void 0||h.mutation instanceof gi)?i=i.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Nc(h.mutation,d,h.mutation.getFieldMask(),fe.now())):s.set(d.key,mn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>s.set(d,h)),n.forEach((d,h)=>o.set(d,new AL(h,s.get(d)??null))),o))}recalculateAndSaveOverlays(e,n){const r=Sc();let a=new Ke((s,o)=>s-o),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||mn.empty();h=o.applyToLocalView(d,h),r.set(u,h);const f=(a.get(o.batchId)||_e()).add(u);a=a.insert(o.batchId,f)})}).next(()=>{const s=[],o=a.getReverseIterator();for(;o.hasNext();){const u=o.getNext(),d=u.key,h=u.value,f=GA();h.forEach(p=>{if(!i.has(p)){const y=JA(n.get(p),r.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,f))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,a){return function(s){return Z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,a):this.getDocumentsMatchingCollectionQuery(e,n,r,a)}getNextDocuments(e,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,a).next(i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,a-i.size):$.resolve(Vi());let o=Gc,u=i;return s.next(d=>$.forEach(d,(h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,_e())).next(h=>({batchId:o,changes:HA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let a=ac();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,r,a){const i=n.collectionGroup;let s=ac();return this.indexManager.getCollectionParents(e,i).next(o=>$.forEach(o,u=>{const d=function(f,p){return new rl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,a).next(h=>{h.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,a))).next(s=>{i.forEach((u,d)=>{const h=d.getKey();s.get(h)===null&&(s=s.insert(h,Bt.newInvalidDocument(h)))});let o=ac();return s.forEach((u,d)=>{const h=i.get(u);h!==void 0&&Nc(h.mutation,d,mn.empty(),fe.now()),Yf(n,d)&&(o=o.insert(u,d))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:gr(a.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(a){return{name:a.name,query:vL(a.bundledQuery),readTime:gr(a.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.overlays=new Ke(Z.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vi();return $.forEach(n,a=>this.getOverlay(e,a).next(i=>{i!==null&&r.set(a,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((a,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const a=Vi(),i=n.length+1,s=new Z(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const u=o.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&a.set(u.getKey(),u)}return $.resolve(a)}getOverlaysForCollectionGroup(e,n,r,a){let i=new Ke((d,h)=>d-h);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Vi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const o=Vi(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>o.set(d,h)),!(o.size()>=a)););return $.resolve(o)}St(e,n,r){const a=this.overlays.get(r.key);if(a!==null){const s=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new W5(n,r));let i=this.qr.get(n);i===void 0&&(i=_e(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.Qr=new pt(_t.$r),this.Ur=new pt(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new _t(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Z(new je([])),r=new _t(n,e),a=new _t(n,e+1),i=[];return this.Ur.forEachInRange([r,a],s=>{this.Gr(s),i.push(s.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Z(new je([])),r=new _t(n,e),a=new _t(n,e+1);let i=_e();return this.Ur.forEachInRange([r,a],s=>{i=i.add(s.key)}),i}containsKey(e){const n=new _t(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Z.comparator(e.key,n.key)||ve(e.Yr,n.Yr)}static Kr(e,n){return ve(e.Yr,n.Yr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(_t.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,a){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Y5(i,n,r,a);this.mutationQueue.push(s);for(const o of a)this.Zr=this.Zr.add(new _t(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,a=this.ei(r),i=a<0?0:a;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Nv:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),a=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,a],s=>{const o=this.Xr(s.Yr);i.push(o)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(ve);return n.forEach(a=>{const i=new _t(a,0),s=new _t(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,s],o=>{r=r.add(o.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,a=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const s=new _t(new Z(i),0);let o=new pt(ve);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===a&&(o=o.add(u.Yr)),!0)},s),$.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const a=this.Xr(r);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,a=>{const i=new _t(a.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new _t(n,0),a=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.ri=e,this.docs=function(){return new Ke(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,a=this.docs.get(r),i=a?a.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=na();return n.forEach(a=>{const i=this.docs.get(a);r=r.insert(a,i?i.document.mutableCopy():Bt.newInvalidDocument(a))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,a){let i=na();const s=n.path,o=new Z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(o);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||o5(s5(h),r)<=0||(a.has(h.key)||Yf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,a){ne(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kL(this)}getSize(e){return $.resolve(this.size)}}class kL extends NL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.persistence=e,this.si=new vs(n=>Rv(n),Dv),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Pv,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,n){return this.si.forEach((r,a)=>n(a)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Po(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let a=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),a++)}),$.waitFor(i).next(()=>a)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const a=this.persistence.referenceDelegate,i=[];return a&&n.forEach(s=>{i.push(a.markPotentiallyOrphaned(e,s))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ff(0),this.li=!1,this.li=!0,this.hi=new IL,this.referenceDelegate=e(this),this.Pi=new ML(this),this.indexManager=new _L,this.remoteDocumentCache=function(a){return new jL(a)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new yL(n),this.Ii=new RL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new OL(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const a=new PL(this.ci.next());return this.referenceDelegate.Ei(),r(a).next(i=>this.referenceDelegate.di(a).next(()=>i)).toPromise().then(i=>(a.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class PL extends c5{constructor(e){super(),this.currentSequenceNumber=e}}class Lv{constructor(e){this.persistence=e,this.Ri=new Pv,this.Vi=null}static mi(e){return new Lv(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(a=>this.fi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const a=Z.fromPath(r);return this.gi(e,a).next(i=>{i||n.removeEntry(a,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fh{constructor(e,n){this.persistence=e,this.pi=new vs(r=>h5(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=SL(this,n)}static mi(e,n){return new Fh(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(a=>r+a))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,a)=>this.br(e,r,a).next(i=>i?$.resolve():n(a)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),i=a.newChangeBuffer();return a.ii(e,s=>this.br(e,s,n).next(o=>{o||(r++,i.removeEntry(s,ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gd(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return $.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,r,a){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=a}static As(e,n){let r=_e(),a=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new Vv(e,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return C3()?8:u5(zt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,a){const i={result:null};return this.ys(e,n).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ws(e,n,a,r).next(s=>{i.result=s})}).next(()=>{if(i.result)return;const s=new LL;return this.Ss(e,n,s).next(o=>{if(i.result=o,this.Vs)return this.bs(e,n,s,o.size)})}).next(()=>i.result)}bs(e,n,r,a){return r.documentReadCount<this.fs?(Us()<=ye.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Us()<=ye.DEBUG&&X("QueryEngine","Query:",Bs(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Us()<=ye.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):$.resolve())}ys(e,n){if(yw(n))return $.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Ry(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const s=_e(...i);return this.ps.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,o);return this.Cs(n,d,s,u.readTime)?this.ys(e,Ry(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,a){return yw(n)||a.isEqual(ae.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const s=this.Ds(n,i);return this.Cs(n,s,r,a)?$.resolve(null):(Us()<=ye.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bs(n)),this.vs(e,s,n,i5(a,Gc)).next(o=>o))})}Ds(e,n){let r=new pt($A(e));return n.forEach((a,i)=>{Yf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,a){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Ss(e,n,r){return Us()<=ye.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Bs(n)),this.ps.getDocumentsMatchingQuery(e,n,ri.min(),r)}vs(e,n,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next(i=>(n.forEach(s=>{i=i.insert(s.key,s)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="LocalStore",UL=3e8;class BL{constructor(e,n,r,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Ke(ve),this.xs=new vs(i=>Rv(i),Dv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function zL(t,e,n,r){return new BL(t,e,n,r)}async function hC(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(i=>(a=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const s=[],o=[];let u=_e();for(const d of a){s.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:o}))})})}function FL(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,u,d,h){const f=d.batch,p=f.keys();let y=$.resolve();return p.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(N=>{const A=d.docVersions.get(w);Se(A!==null,48541),N.version.compareTo(A)<0&&(f.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),h.addEntry(N)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let u=_e();for(let d=0;d<o.mutationResults.length;++d)o.mutationResults[d].transformResults.length>0&&(u=u.add(o.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,a))})}function fC(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function $L(t,e){const n=se(t),r=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const o=[];e.targetChanges.forEach((h,f)=>{const p=a.get(f);if(!p)return;o.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Mt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),a=a.insert(f,y),function(N,A,_){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=UL?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,y,h)&&o.push(n.Pi.updateTargetData(i,y))});let u=na(),d=_e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(qL(i,s,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!r.isEqual(ae.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));o.push(h)}return $.waitFor(o).next(()=>s.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=a,i))}function qL(t,e,n){let r=_e(),a=_e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let s=na();return n.forEach((o,u)=>{const d=i.get(o);u.isFoundDocument()!==d.isFoundDocument()&&(a=a.add(o)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(o,u.readTime),s=s.insert(o,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(o,u)):X(Uv,"Ignoring outdated watch update for ",o,". Current version:",d.version," Watch version:",u.version)}),{ks:s,qs:a}})}function HL(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Nv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GL(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Pi.getTargetData(r,e).next(i=>i?(a=i,$.resolve(a)):n.Pi.allocateTargetId(r).next(s=>(a=new La(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ky(t,e,n){const r=se(t),a=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,s=>r.persistence.referenceDelegate.removeTarget(s,a))}catch(s){if(!nl(s))throw s;X(Uv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Dw(t,e,n){const r=se(t);let a=ae.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,h){const f=se(u),p=f.xs.get(h);return p!==void 0?$.resolve(f.Ms.get(p)):f.Pi.getTargetData(d,h)}(r,s,pr(e)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?a:ae.min(),n?i:_e())).next(o=>(YL(r,I5(e),o),{documents:o,Qs:i})))}function YL(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((a,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Iw{constructor(){this.activeTargetIds=L5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WL{constructor(){this.Mo=new Iw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Iw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="ConnectivityMonitor";class jw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(Ow,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(Ow,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d=null;function My(){return _d===null?_d=function(){return 268435456+Math.round(2147483648*Math.random())}():_d++,"0x"+_d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="RestConnection",QL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Ph?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,n,r,a,i){const s=My(),o=this.zo(e,n.toUriEncodedString());X(zp,`Sending RPC '${e}' ${s}:`,o,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,a,i);const{host:d}=new URL(o),h=ps(d);return this.Jo(e,o,u,r,h).then(f=>(X(zp,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Io(zp,`RPC '${e}' ${s} failed with error: `,f,"url: ",o,"request:",r),f})}Ho(e,n,r,a,i,s){return this.Go(e,n,r,a,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,i)=>e[i]=a),r&&r.headers.forEach((a,i)=>e[i]=a)}zo(e,n){const r=QL[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class ZL extends XL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,a,i){const s=My();return new Promise((o,u)=>{const d=new gA;d.setWithCredentials(!0),d.listenOnce(yA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Hd.NO_ERROR:const f=d.getResponseJson();X(Vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Hd.TIMEOUT:X(Vt,`RPC '${e}' ${s} timed out`),u(new Q(B.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const p=d.getStatus();if(X(Vt,`RPC '${e}' ${s} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const N=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(x)>=0?x:B.UNKNOWN}(w.status);u(new Q(N,w.message))}else u(new Q(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Q(B.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{X(Vt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(a);X(Vt,`RPC '${e}' ${s} sending request:`,a),d.send(n,"POST",h,r,15)})}T_(e,n,r){const a=My(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=bA(),o=_A(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");X(Vt,`Creating RPC '${e}' stream ${a}: ${h}`,u);const f=s.createWebChannel(h,u);this.I_(f);let p=!1,y=!1;const w=new JL({Yo:A=>{y?X(Vt,`Not sending because RPC '${e}' stream ${a} is closed:`,A):(p||(X(Vt,`Opening RPC '${e}' stream ${a} transport.`),f.open(),p=!0),X(Vt,`RPC '${e}' stream ${a} sending:`,A),f.send(A))},Zo:()=>f.close()}),N=(A,_,x)=>{A.listen(_,E=>{try{x(E)}catch(I){setTimeout(()=>{throw I},0)}})};return N(f,rc.EventType.OPEN,()=>{y||(X(Vt,`RPC '${e}' stream ${a} transport opened.`),w.o_())}),N(f,rc.EventType.CLOSE,()=>{y||(y=!0,X(Vt,`RPC '${e}' stream ${a} transport closed`),w.a_(),this.E_(f))}),N(f,rc.EventType.ERROR,A=>{y||(y=!0,Io(Vt,`RPC '${e}' stream ${a} transport errored. Name:`,A.name,"Message:",A.message),w.a_(new Q(B.UNAVAILABLE,"The operation could not be completed")))}),N(f,rc.EventType.MESSAGE,A=>{var _;if(!y){const x=A.data[0];Se(!!x,16349);const E=x,I=(E==null?void 0:E.error)||((_=E[0])==null?void 0:_.error);if(I){X(Vt,`RPC '${e}' stream ${a} received error:`,I);const V=I.status;let q=function(b){const C=it[b];if(C!==void 0)return eC(C)}(V),S=I.message;q===void 0&&(q=B.INTERNAL,S="Unknown error status: "+V+" with message "+I.message),y=!0,w.a_(new Q(q,S)),f.close()}else X(Vt,`RPC '${e}' stream ${a} received:`,x),w.u_(x)}}),N(o,vA.STAT_EVENT,A=>{A.stat===wy.PROXY?X(Vt,`RPC '${e}' stream ${a} detected buffering proxy`):A.stat===wy.NOPROXY&&X(Vt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){return new rL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,r=1e3,a=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=a,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-r);a>0&&X("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="PersistentStream";class pC{constructor(e,n,r,a,i,s,o,u){this.Mi=e,this.S_=r,this.b_=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(ta(n.toString()),ta("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.D_===n&&this.G_(r,a)},r=>{e(()=>{const a=new Q(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{r(()=>this.z_(a))}),this.stream.onMessage(a=>{r(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(kw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(kw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eV extends pC{constructor(e,n,r,a,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,s),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sL(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?gr(s.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jy(this.serializer),n.addTarget=function(i,s){let o;const u=s.target;if(o=Ay(u)?{documents:cL(i,u)}:{query:uL(i,u).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=rC(i,s.resumeToken);const d=Dy(i,s.expectedCount);d!==null&&(o.expectedCount=d)}else if(s.snapshotVersion.compareTo(ae.min())>0){o.readTime=zh(i,s.snapshotVersion.toTimestamp());const d=Dy(i,s.expectedCount);d!==null&&(o.expectedCount=d)}return o}(this.serializer,e);const r=hL(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jy(this.serializer),n.removeTarget=e,this.q_(n)}}class tV extends pC{constructor(e,n,r,a,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lL(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oL(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{}class rV extends nV{constructor(e,n,r,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,Iy(n,r),a,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(B.UNKNOWN,i.toString())})}Ho(e,n,r,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,Iy(n,r),a,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(B.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ta(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="RemoteStore";class iV{constructor(e,n,r,a,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{_s(this)&&(X(ts,"Restarting streams for network reachability change."),await async function(u){const d=se(u);d.Ea.add(4),await Eu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Jf(d)}(this))})}),this.Ra=new aV(r,a)}}async function Jf(t){if(_s(t))for(const e of t.da)await e(!0)}async function Eu(t){for(const e of t.da)await e(!1)}function gC(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$v(n)?Fv(n):al(n).O_()&&zv(n,e))}function Bv(t,e){const n=se(t),r=al(n);n.Ia.delete(e),r.O_()&&yC(n,e),n.Ia.size===0&&(r.O_()?r.L_():_s(n)&&n.Ra.set("Unknown"))}function zv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(t).Y_(e)}function yC(t,e){t.Va.Ue(e),al(t).Z_(e)}function Fv(t){t.Va=new Z5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),al(t).start(),t.Ra.ua()}function $v(t){return _s(t)&&!al(t).x_()&&t.Ia.size>0}function _s(t){return se(t).Ea.size===0}function vC(t){t.Va=void 0}async function sV(t){t.Ra.set("Online")}async function oV(t){t.Ia.forEach((e,n)=>{zv(t,e)})}async function lV(t,e){vC(t),$v(t)?(t.Ra.ha(e),Fv(t)):t.Ra.set("Unknown")}async function cV(t,e,n){if(t.Ra.set("Online"),e instanceof nC&&e.state===2&&e.cause)try{await async function(a,i){const s=i.cause;for(const o of i.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,s),a.Ia.delete(o),a.Va.removeTarget(o))}(t,e)}catch(r){X(ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $h(t,r)}else if(e instanceof Kd?t.Va.Ze(e):e instanceof tC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await fC(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Va.Tt(s);return o.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(u.resumeToken,s))}}),o.targetMismatches.forEach((u,d)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(Mt.EMPTY_BYTE_STRING,h.snapshotVersion)),yC(i,u);const f=new La(h.target,u,d,h.sequenceNumber);zv(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){X(ts,"Failed to raise snapshot:",r),await $h(t,r)}}async function $h(t,e,n){if(!nl(e))throw e;t.Ea.add(1),await Eu(t),t.Ra.set("Offline"),n||(n=()=>fC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(ts,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Jf(t)})}function _C(t,e){return e().catch(n=>$h(t,n,e))}async function Zf(t){const e=se(t),n=oi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nv;for(;uV(e);)try{const a=await HL(e.localStore,r);if(a===null){e.Ta.length===0&&n.L_();break}r=a.batchId,dV(e,a)}catch(a){await $h(e,a)}bC(e)&&xC(e)}function uV(t){return _s(t)&&t.Ta.length<10}function dV(t,e){t.Ta.push(e);const n=oi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bC(t){return _s(t)&&!oi(t).x_()&&t.Ta.length>0}function xC(t){oi(t).start()}async function hV(t){oi(t).ra()}async function fV(t){const e=oi(t);for(const n of t.Ta)e.ea(n.mutations)}async function mV(t,e,n){const r=t.Ta.shift(),a=jv.from(r,e,n);await _C(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Zf(t)}async function pV(t,e){e&&oi(t).X_&&await async function(r,a){if(function(s){return Q5(s)&&s!==B.ABORTED}(a.code)){const i=r.Ta.shift();oi(r).B_(),await _C(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,a)),await Zf(r)}}(t,e),bC(t)&&xC(t)}async function Mw(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),X(ts,"RemoteStore received new credentials");const r=_s(n);n.Ea.add(3),await Eu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jf(n)}async function gV(t,e){const n=se(t);e?(n.Ea.delete(2),await Jf(n)):e||(n.Ea.add(2),await Eu(n),n.Ra.set("Unknown"))}function al(t){return t.ma||(t.ma=function(n,r,a){const i=se(n);return i.sa(),new eV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:sV.bind(null,t),t_:oV.bind(null,t),r_:lV.bind(null,t),H_:cV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$v(t)?Fv(t):t.Ra.set("Unknown")):(await t.ma.stop(),vC(t))})),t.ma}function oi(t){return t.fa||(t.fa=function(n,r,a){const i=se(n);return i.sa(),new tV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hV.bind(null,t),r_:pV.bind(null,t),ta:fV.bind(null,t),na:mV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zf(t)):(await t.fa.stop(),t.Ta.length>0&&(X(ts,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,r,a,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,a,i){const s=Date.now()+r,o=new qv(e,n,s,a,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hv(t,e){if(ta("AsyncQueue",`${e}: ${t}`),nl(t))return new Q(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=ac(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.ga=new Ke(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Lo{constructor(e,n,r,a,i,s,o,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,a,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Lo(e,n,mo.emptySet(n),s,r,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vV{constructor(){this.queries=Lw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=se(n),i=a.queries;a.queries=Lw(),i.forEach((s,o)=>{for(const u of o.Sa)u.onError(r)})})(this,new Q(B.ABORTED,"Firestore shutting down"))}}function Lw(){return new vs(t=>FA(t),Gf)}async function Gv(t,e){const n=se(t);let r=3;const a=e.query;let i=n.queries.get(a);i?!i.ba()&&e.Da()&&(r=2):(i=new yV,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(a,!0);break;case 1:i.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(s){const o=Hv(s,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(o)}n.queries.set(a,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wv(n)}async function Yv(t,e){const n=se(t),r=e.query;let a=3;const i=n.queries.get(r);if(i){const s=i.Sa.indexOf(e);s>=0&&(i.Sa.splice(s,1),i.Sa.length===0?a=e.Da()?0:1:!i.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _V(t,e){const n=se(t);let r=!1;for(const a of e){const i=a.query,s=n.queries.get(i);if(s){for(const o of s.Sa)o.Fa(a)&&(r=!0);s.wa=a}}r&&Wv(n)}function bV(t,e,n){const r=se(t),a=r.queries.get(e);if(a)for(const i of a.Sa)i.onError(n);r.queries.delete(e)}function Wv(t){t.Ca.forEach(e=>{e.next()})}var Py,Vw;(Vw=Py||(Py={})).Ma="default",Vw.Cache="cache";class Kv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Py.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.key=e}}class EC{constructor(e){this.key=e}}class xV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=$A(e),this.tu=new mo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Pw,a=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,s=a,o=!1;const u=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,d=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((h,f)=>{const p=a.get(h),y=Yf(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;p&&y?p.data.isEqual(y.data)?w!==N&&(r.track({type:3,doc:y}),A=!0):this.su(p,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.eu(y,u)>0||d&&this.eu(y,d)<0)&&(o=!0)):!p&&y?(r.track({type:0,doc:y}),A=!0):p&&!y&&(r.track({type:1,doc:p}),A=!0,(u||d)&&(o=!0)),A&&(y?(s=s.add(y),i=N?i.add(h):i.delete(h)):(s=s.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:o,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,a){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((h,f)=>function(y,w){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:A})}};return N(y)-N(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),a=a??!1;const o=n&&!a?this._u():[],u=this.Xa.size===0&&this.current&&!a?1:0,d=u!==this.Za;return this.Za=u,s.length!==0||d?{snapshot:new Lo(this.query,e.tu,i,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Pw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new EC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new wC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qv="SyncEngine";class wV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class EV{constructor(e){this.key=e,this.hu=!1}}class TV{constructor(e,n,r,a,i,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new vs(o=>FA(o),Gf),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(Z.comparator),this.Au=new Map,this.Ru=new Pv,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SV(t,e,n=!0){const r=RC(t);let a;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await TC(r,e,n,!0),a}async function NV(t,e){const n=RC(t);await TC(n,e,!0,!1)}async function TC(t,e,n,r){const a=await GL(t.localStore,pr(e)),i=a.targetId,s=t.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await AV(t,e,i,s==="current",a.resumeToken)),t.isPrimaryClient&&n&&gC(t.remoteStore,a),o}async function AV(t,e,n,r,a){t.pu=(f,p,y)=>async function(N,A,_,x){let E=A.view.ru(_);E.Cs&&(E=await Dw(N.localStore,A.query,!1).then(({documents:S})=>A.view.ru(S,E)));const I=x&&x.targetChanges.get(A.targetId),V=x&&x.targetMismatches.get(A.targetId)!=null,q=A.view.applyChanges(E,N.isPrimaryClient,I,V);return Bw(N,A.targetId,q.au),q.snapshot}(t,f,p,y);const i=await Dw(t.localStore,e,!0),s=new xV(e,i.Qs),o=s.ru(i.documents),u=wu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",a),d=s.applyChanges(o,t.isPrimaryClient,u);Bw(t,n,d.au);const h=new wV(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function CV(t,e,n){const r=se(t),a=r.Tu.get(e),i=r.Iu.get(a.targetId);if(i.length>1)return r.Iu.set(a.targetId,i.filter(s=>!Gf(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await ky(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Bv(r.remoteStore,a.targetId),Ly(r,a.targetId)}).catch(tl)):(Ly(r,a.targetId),await ky(r.localStore,a.targetId,!0))}async function RV(t,e){const n=se(t),r=n.Tu.get(e),a=n.Iu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bv(n.remoteStore,r.targetId))}async function DV(t,e,n){const r=LV(t);try{const a=await function(s,o){const u=se(s),d=fe.now(),h=o.reduce((y,w)=>y.add(w.key),_e());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=na(),N=_e();return u.Ns.getEntries(y,h).next(A=>{w=A,w.forEach((_,x)=>{x.isValidDocument()||(N=N.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(A=>{f=A;const _=[];for(const x of o){const E=H5(x,f.get(x.key).overlayedDocument);E!=null&&_.push(new gi(x.key,E,kA(E.value.mapValue),Wn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,_,o)}).next(A=>{p=A;const _=A.applyToLocalDocumentSet(f,N);return u.documentOverlayCache.saveOverlays(y,A.batchId,_)})}).then(()=>({batchId:p.batchId,changes:HA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(s,o,u){let d=s.Vu[s.currentUser.toKey()];d||(d=new Ke(ve)),d=d.insert(o,u),s.Vu[s.currentUser.toKey()]=d}(r,a.batchId,n),await Tu(r,a.changes),await Zf(r.remoteStore)}catch(a){const i=Hv(a,"Failed to persist write");n.reject(i)}}async function SC(t,e){const n=se(t);try{const r=await $L(n.localStore,e);e.targetChanges.forEach((a,i)=>{const s=n.Au.get(i);s&&(Se(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?s.hu=!0:a.modifiedDocuments.size>0?Se(s.hu,14607):a.removedDocuments.size>0&&(Se(s.hu,42227),s.hu=!1))}),await Tu(n,r,e)}catch(r){await tl(r)}}function Uw(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Tu.forEach((i,s)=>{const o=s.view.va(e);o.snapshot&&a.push(o.snapshot)}),function(s,o){const u=se(s);u.onlineState=o;let d=!1;u.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(o)&&(d=!0)}),d&&Wv(u)}(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IV(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const a=r.Au.get(e),i=a&&a.key;if(i){let s=new Ke(Z.comparator);s=s.insert(i,Bt.newNoDocument(i,ae.min()));const o=_e().add(i),u=new Qf(ae.min(),new Map,new Ke(ve),s,o);await SC(r,u),r.du=r.du.remove(i),r.Au.delete(e),Xv(r)}else await ky(r.localStore,e,!1).then(()=>Ly(r,e,n)).catch(tl)}async function OV(t,e){const n=se(t),r=e.batch.batchId;try{const a=await FL(n.localStore,e);AC(n,r,null),NC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(n,a)}catch(a){await tl(a)}}async function jV(t,e,n){const r=se(t);try{const a=await function(s,o){const u=se(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,o).next(f=>(Se(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,o)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);AC(r,e,n),NC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tu(r,a)}catch(a){await tl(a)}}function NC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function AC(t,e,n){const r=se(t);let a=r.Vu[r.currentUser.toKey()];if(a){const i=a.get(e);i&&(n?i.reject(n):i.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function Ly(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||CC(t,r)})}function CC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Xv(t))}function Bw(t,e,n){for(const r of n)r instanceof wC?(t.Ru.addReference(r.key,e),kV(t,r)):r instanceof EC?(X(Qv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||CC(t,r.key)):ne(19791,{wu:r})}function kV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(Qv,"New document in limbo: "+n),t.Eu.add(r),Xv(t))}function Xv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(je.fromString(e)),r=t.fu.next();t.Au.set(r,new EV(n)),t.du=t.du.insert(n,r),gC(t.remoteStore,new La(pr(Hf(n.path)),r,"TargetPurposeLimboResolution",Ff.ce))}}async function Tu(t,e,n){const r=se(t),a=[],i=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((o,u)=>{s.push(r.pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){a.push(d);const f=Vv.As(u.targetId,d);i.push(f)}}))}),await Promise.all(s),r.Pu.H_(a),await async function(u,d){const h=se(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(d,p=>$.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>$.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!nl(f))throw f;X(Uv,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),w=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,N)}}}(r.localStore,i))}async function MV(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){X(Qv,"User change. New user:",e.toKey());const r=await hC(n.localStore,e);n.currentUser=e,function(i,s){i.mu.forEach(o=>{o.forEach(u=>{u.reject(new Q(B.CANCELLED,s))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tu(n,r.Ls)}}function PV(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let a=_e();const i=n.Iu.get(e);if(!i)return a;for(const s of i){const o=n.Tu.get(s);a=a.unionWith(o.view.nu)}return a}}function RC(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IV.bind(null,e),e.Pu.H_=_V.bind(null,e.eventManager),e.Pu.yu=bV.bind(null,e.eventManager),e}function LV(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jV.bind(null,e),e}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return zL(this.persistence,new VL,e.initialUser,this.serializer)}Cu(e){return new dC(Lv.mi,this.serializer)}Du(e){return new WL}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class VV extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof Fh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EL(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new dC(r=>Fh.mi(r,n),this.serializer)}}class Vy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Uw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MV.bind(null,this.syncEngine),await gV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vV}()}createDatastore(e){const n=Xf(e.databaseInfo.databaseId),r=function(i){return new ZL(i)}(e.databaseInfo);return function(i,s,o,u){return new rV(i,s,o,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,a,i,s,o){return new iV(r,a,i,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Uw(this.syncEngine,n,0),function(){return jw.v()?new jw:new KL}())}createSyncEngine(e,n){return function(a,i,s,o,u,d,h){const f=new TV(a,i,s,o,u,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const i=se(a);X(ts,"RemoteStore shutting down."),i.Ea.add(5),await Eu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vy.provider={build:()=>new Vy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ta("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="FirestoreClient";class UV{constructor(e,n,r,a,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Ut.UNAUTHENTICATED,this.clientId=Sv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async s=>{X(li,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(X(li,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $p(t,e){t.asyncQueue.verifyOperationInProgress(),X(li,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async a=>{r.isEqual(a)||(await hC(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BV(t);X(li,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Mw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,a)=>Mw(e.remoteStore,a)),t._onlineComponents=e}async function BV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(li,"Using user provided OfflineComponentProvider");try{await $p(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===B.FAILED_PRECONDITION||a.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Io("Error using user provided cache. Falling back to memory cache: "+n),await $p(t,new qh)}}else X(li,"Using default OfflineComponentProvider"),await $p(t,new VV(void 0));return t._offlineComponents}async function DC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(li,"Using user provided OnlineComponentProvider"),await zw(t,t._uninitializedComponentsProvider._online)):(X(li,"Using default OnlineComponentProvider"),await zw(t,new Vy))),t._onlineComponents}function zV(t){return DC(t).then(e=>e.syncEngine)}async function Hh(t){const e=await DC(t),n=e.eventManager;return n.onListen=SV.bind(null,e.syncEngine),n.onUnlisten=CV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RV.bind(null,e.syncEngine),n}function FV(t,e,n={}){const r=new Hr;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,u,d){const h=new Jv({next:p=>{h.Nu(),s.enqueueAndForget(()=>Yv(i,f));const y=p.docs.has(o);!y&&p.fromCache?d.reject(new Q(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new Q(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Kv(Hf(o.path),h,{includeMetadataChanges:!0,qa:!0});return Gv(i,f)}(await Hh(t),t.asyncQueue,e,n,r)),r.promise}function $V(t,e,n={}){const r=new Hr;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,u,d){const h=new Jv({next:p=>{h.Nu(),s.enqueueAndForget(()=>Yv(i,f)),p.fromCache&&u.source==="server"?d.reject(new Q(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Kv(o,h,{includeMetadataChanges:!0,qa:!0});return Gv(i,f)}(await Hh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firestore.googleapis.com",$w=!0;class qw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OC,this.ssl=$w}else this.host=e.host,this.ssl=e.ssl??$w;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xL)throw new Q(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class em{constructor(e,n,r,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new W6;switch(r.type){case"firstParty":return new J6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fw.get(n);r&&(X("ComponentProvider","Removing Datastore"),Fw.delete(n),r.terminate())}(this),Promise.resolve()}}function qV(t,e,n,r={}){var d;t=Pn(t,em);const a=ps(e),i=t._getSettings(),s={...i,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;a&&(xv(`https://${o}`),wv("Firestore",!0)),i.host!==OC&&i.host!==o&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:o,ssl:a,emulatorOptions:r};if(!Zr(u,s)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ut.MOCK_USER;else{h=iA(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Q(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ut(p)}t._authCredentials=new K6(new wA(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nt(this.firestore,e,this._key)}toJSON(){return{type:nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bu(n,nt._jsonSchema))return new nt(e,r||null,new Z(je.fromString(n.referencePath)))}}nt._jsonSchemaVersion="firestore/documentReference/1.0",nt._jsonSchema={type:dt("string",nt._jsonSchemaVersion),referencePath:dt("string")};class Qa extends yi{constructor(e,n,r){super(e,n,Hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new Z(e))}withConverter(e){return new Qa(this.firestore,e,this._path)}}function la(t,e,...n){if(t=We(t),EA("collection","path",e),t instanceof em){const r=je.fromString(e,...n);return rw(r),new Qa(t,null,r)}{if(!(t instanceof nt||t instanceof Qa))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return rw(r),new Qa(t.firestore,null,r)}}function wr(t,e,...n){if(t=We(t),arguments.length===1&&(e=Sv.newId()),EA("doc","path",e),t instanceof em){const r=je.fromString(e,...n);return nw(r),new nt(t,null,new Z(r))}{if(!(t instanceof nt||t instanceof Qa))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return nw(r),new nt(t.firestore,t instanceof Qa?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="AsyncQueue";class Gw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mC(this,"async_queue_retry"),this._c=()=>{const r=Fp();r&&X(Hw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Hr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nl(e))throw e;X(Hw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ta("INTERNAL UNHANDLED ERROR: ",Yw(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=qv.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(a),a}uc(){this.nc&&ne(47125,{Pc:Yw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Yw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const i of r)if(i in a&&typeof a[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ci extends em{constructor(e,n,r,a){super(e,n,r,a),this.type="firestore",this._queue=new Gw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gw(e),this._firestoreClient=void 0,await e}}}function HV(t,e){const n=typeof t=="object"?t:Bf(),r=typeof t=="string"?t:Ph,a=mi(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const i=nA("firestore");i&&qV(a,...i)}return a}function tm(t){if(t._terminated)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GV(t),t._firestoreClient}function GV(t){var r,a,i;const e=t._freezeSettings(),n=function(o,u,d,h){return new p5(o,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,IC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new UV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const u=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Mt.fromBase64String(e))}catch(n){throw new Q(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new On(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:dt("string",On._jsonSchemaVersion),bytes:dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yr._jsonSchemaVersion}}static fromJSON(e){if(bu(e,yr._jsonSchema))return new yr(e.latitude,e.longitude)}}yr._jsonSchemaVersion="firestore/geoPoint/1.0",yr._jsonSchema={type:dt("string",yr._jsonSchemaVersion),latitude:dt("number"),longitude:dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,vr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vr(e.vectorValues);throw new Q(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vr._jsonSchemaVersion="firestore/vectorValue/1.0",vr._jsonSchema={type:dt("string",vr._jsonSchemaVersion),vectorValues:dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=/^__.*__$/;class WV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class jC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class am{constructor(e,n,r,a,i,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new am({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var a;const n=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kC(this.Ac)&&YV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xf(e)}Cc(e,n,r,a=!1){return new am({Ac:e,methodName:n,Dc:r,path:Ot.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zv(t){const e=t._freezeSettings(),n=Xf(t._databaseId);return new KV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function QV(t,e,n,r,a,i={}){const s=t.Cc(i.merge||i.mergeFields?2:0,e,n,a);t_("Data must be an object, but it was:",s,r);const o=MC(r,s);let u,d;if(i.merge)u=new mn(s.fieldMask),d=s.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Uy(e,f,n);if(!s.contains(p))throw new Q(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);LC(h,p)||h.push(p)}u=new mn(h),d=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=s.fieldTransforms;return new WV(new Zt(o),u,d)}class im extends rm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof im}}function XV(t,e,n){return new am({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class e_ extends rm{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=XV(this,e,!0),r=this.vc.map(i=>il(i,n)),a=new Mo(r);return new z5(e.path,a)}isEqual(e){return e instanceof e_&&Zr(this.vc,e.vc)}}function JV(t,e,n,r){const a=t.Cc(1,e,n);t_("Data must be an object, but it was:",a,r);const i=[],s=Zt.empty();pi(r,(u,d)=>{const h=n_(e,u,n);d=We(d);const f=a.yc(h);if(d instanceof im)i.push(h);else{const p=il(d,f);p!=null&&(i.push(h),s.set(h,p))}});const o=new mn(i);return new jC(s,o,a.fieldTransforms)}function ZV(t,e,n,r,a,i){const s=t.Cc(1,e,n),o=[Uy(e,r,n)],u=[a];if(i.length%2!=0)throw new Q(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(Uy(e,i[p])),u.push(i[p+1]);const d=[],h=Zt.empty();for(let p=o.length-1;p>=0;--p)if(!LC(d,o[p])){const y=o[p];let w=u[p];w=We(w);const N=s.yc(y);if(w instanceof im)d.push(y);else{const A=il(w,N);A!=null&&(d.push(y),h.set(y,A))}}const f=new mn(d);return new jC(h,f,s.fieldTransforms)}function e9(t,e,n,r=!1){return il(n,t.Cc(r?4:3,e))}function il(t,e){if(PC(t=We(t)))return t_("Unsupported field value:",e,t),MC(t,e);if(t instanceof rm)return function(r,a){if(!kC(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(a);i&&a.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,a){const i=[];let s=0;for(const o of r){let u=il(o,a.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),s++}return{arrayValue:{values:i}}}(t,e)}return function(r,a){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return V5(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=fe.fromDate(r);return{timestampValue:zh(a.serializer,i)}}if(r instanceof fe){const i=new fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zh(a.serializer,i)}}if(r instanceof yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof On)return{bytesValue:rC(a.serializer,r._byteString)};if(r instanceof nt){const i=a.databaseId,s=r.firestore._databaseId;if(!s.isEqual(i))throw a.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof vr)return function(s,o){return{mapValue:{fields:{[OA]:{stringValue:jA},[Lh]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw o.Sc("VectorValues must only contain numeric values.");return Iv(o.serializer,d)})}}}}}}(r,a);throw a.Sc(`Unsupported field value: ${zf(r)}`)}(t,e)}function MC(t,e){const n={};return NA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,a)=>{const i=il(a,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function PC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fe||t instanceof yr||t instanceof On||t instanceof nt||t instanceof rm||t instanceof vr)}function t_(t,e,n){if(!PC(n)||!TA(n)){const r=zf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Uy(t,e,n){if((e=We(e))instanceof nm)return e._internalPath;if(typeof e=="string")return n_(t,e);throw Gh("Field path arguments must be of type string or ",t,!1,void 0,n)}const t9=new RegExp("[~\\*/\\[\\]]");function n_(t,e,n){if(e.search(t9)>=0)throw Gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nm(...e.split("."))._internalPath}catch{throw Gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gh(t,e,n,r,a){const i=r&&!r.isEmpty(),s=a!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let u="";return(i||s)&&(u+=" (found",i&&(u+=` in field ${r}`),s&&(u+=` in document ${a}`),u+=")"),new Q(B.INVALID_ARGUMENT,o+t+u)}function LC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,r,a,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class n9 extends VC{data(){return super.data()}}function sm(t,e){return typeof e=="string"?n_(t,e):e instanceof nm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class BC extends r_{}function om(t,e,...n){let r=[];e instanceof r_&&r.push(e),r=r.concat(n),function(i){const s=i.filter(u=>u instanceof i_).length,o=i.filter(u=>u instanceof lm).length;if(s>1||s>0&&o>0)throw new Q(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)t=a._apply(t);return t}class lm extends BC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new lm(e,n,r)}_apply(e){const n=this._parse(e);return zC(e._query,n),new yi(e.firestore,e.converter,Cy(e._query,n))}_parse(e){const n=Zv(e.firestore);return function(i,s,o,u,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Qw(f,h);const w=[];for(const N of f)w.push(Kw(u,i,N));p={arrayValue:{values:w}}}else p=Kw(u,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Qw(f,h),p=e9(o,s,f,h==="in"||h==="not-in");return ct.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function a_(t,e,n){const r=e,a=sm("where",t);return lm._create(a,r,n)}class i_ extends r_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new i_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,i){let s=a;const o=i.getFlattenedFilters();for(const u of o)zC(s,u),s=Cy(s,u)}(e._query,n),new yi(e.firestore,e.converter,Cy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class s_ extends BC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new s_(e,n)}_apply(e){const n=function(a,i,s){if(a.startAt!==null)throw new Q(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Q(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qc(i,s)}(e._query,this._field,this._direction);return new yi(e.firestore,e.converter,function(a,i){const s=a.explicitOrderBy.concat([i]);return new rl(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function r9(t,e="asc"){const n=e,r=sm("orderBy",t);return s_._create(r,n)}function Kw(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new Q(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zA(e)&&n.indexOf("/")!==-1)throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!Z.isDocumentKey(r))throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dw(t,new Z(r))}if(n instanceof nt)return dw(t,n._key);throw new Q(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function Qw(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zC(t,e){const n=function(a,i){for(const s of a)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class a9{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pi(e,(a,i)=>{r[a]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,a,i;const n=(i=(a=(r=e.fields)==null?void 0:r[Lh].arrayValue)==null?void 0:a.values)==null?void 0:i.map(s=>et(s.doubleValue));return new vr(n)}convertGeoPoint(e){return new yr(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const n=ai(e);return new fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Se(cC(r),9688,{name:e});const a=new Wc(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return a.isEqual(n)||ta(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class sc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gi extends VC{constructor(e,n,r,a,i,s){super(e,n,r,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gi._jsonSchema={type:dt("string",Gi._jsonSchemaVersion),bundleSource:dt("string","DocumentSnapshot"),bundleName:dt("string"),bundle:dt("string")};class Qd extends Gi{data(e={}){return super.data(e)}}class Yi{constructor(e,n,r,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new sc(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qd(this._firestore,this._userDataWriter,r.key,r,new sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map(o=>{const u=new Qd(a._firestore,a._userDataWriter,o.doc.key,o.doc,new sc(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const u=new Qd(a._firestore,a._userDataWriter,o.doc.key,o.doc,new sc(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let d=-1,h=-1;return o.type!==0&&(d=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:s9(o.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function s9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){t=Pn(t,nt);const e=Pn(t.firestore,ci);return FV(tm(e),t._key).then(n=>qC(e,t,n))}Yi._jsonSchemaVersion="firestore/querySnapshot/1.0",Yi._jsonSchema={type:dt("string",Yi._jsonSchemaVersion),bundleSource:dt("string","QuerySnapshot"),bundleName:dt("string"),bundle:dt("string")};class o_ extends a9{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}}function l_(t){t=Pn(t,yi);const e=Pn(t.firestore,ci),n=tm(e),r=new o_(e);return UC(t._query),$V(n,t._query).then(a=>new Yi(e,r,t,a))}function cm(t,e,n,...r){t=Pn(t,nt);const a=Pn(t.firestore,ci),i=Zv(a);let s;return s=typeof(e=We(e))=="string"||e instanceof nm?ZV(i,"updateDoc",t._key,e,n,r):JV(i,"updateDoc",t._key,e),u_(a,[s.toMutation(t._key,Wn.exists(!0))])}function c_(t){return u_(Pn(t.firestore,ci),[new Ov(t._key,Wn.none())])}function um(t,e){const n=Pn(t.firestore,ci),r=wr(t),a=i9(t.converter,e);return u_(n,[QV(Zv(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,Wn.exists(!1))]).then(()=>r)}function $C(t,...e){var u,d,h;t=We(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ww(e[r])||(n=e[r++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ww(e[r])){const f=e[r];e[r]=(u=f.next)==null?void 0:u.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,s,o;if(t instanceof nt)s=Pn(t.firestore,ci),o=Hf(t._key.path),i={next:f=>{e[r]&&e[r](qC(s,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Pn(t,yi);s=Pn(f.firestore,ci),o=f._query;const p=new o_(s);i={next:y=>{e[r]&&e[r](new Yi(s,p,f,y))},error:e[r+1],complete:e[r+2]},UC(t._query)}return function(p,y,w,N){const A=new Jv(N),_=new Kv(y,A,w);return p.asyncQueue.enqueueAndForget(async()=>Gv(await Hh(p),_)),()=>{A.Nu(),p.asyncQueue.enqueueAndForget(async()=>Yv(await Hh(p),_))}}(tm(s),o,a,i)}function u_(t,e){return function(r,a){const i=new Hr;return r.asyncQueue.enqueueAndForget(async()=>DV(await zV(r),a,i)),i.promise}(tm(t),e)}function qC(t,e,n){const r=n.docs.get(e._key),a=new o_(t);return new Gi(t,a,e._key,r,new sc(n.hasPendingWrites,n.fromCache),e.converter)}function o9(...t){return new e_("arrayUnion",t)}(function(e,n=!0){(function(a){el=a})(ys),Kn(new Un("firestore",(r,{instanceIdentifier:a,options:i})=>{const s=r.getProvider("app").getImmediate(),o=new ci(new Q6(r.getProvider("auth-internal")),new Z6(s,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(d.options.projectId,h)}(s,a),s);return i={useFetchStreams:n,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),tn(Jx,Zx,e),tn(Jx,Zx,"esm2020")})();var l9="firebase",c9="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn(l9,c9,"app");function HC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u9=HC,GC=new gs("auth","Firebase",HC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Uf("@firebase/auth");function d9(t,...e){Yh.logLevel<=ye.WARN&&Yh.warn(`Auth (${ys}): ${t}`,...e)}function Xd(t,...e){Yh.logLevel<=ye.ERROR&&Yh.error(`Auth (${ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw d_(t,...e)}function _r(t,...e){return d_(t,...e)}function YC(t,e,n){const r={...u9(),[e]:n};return new gs("auth","Firebase",r).create(e,{appName:t.name})}function Xa(t){return YC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GC.create(t,...e)}function te(t,e,...n){if(!t)throw d_(e,...n)}function Ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xd(e),new Error(e)}function ra(t,e){t||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function h9(){return Xw()==="http:"||Xw()==="https:"}function Xw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h9()||sA()||"connection"in navigator)?navigator.onLine:!0}function m9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.shortDelay=e,this.longDelay=n,ra(n>e,"Short delay should be less than long delay!"),this.isMobile=E3()||N3()}get(){return f9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e){ra(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y9=new Su(3e4,6e4);function bs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vi(t,e,n,r,a={}){return KC(t,a,async()=>{let i={},s={};r&&(e==="GET"?s=r:i={body:JSON.stringify(r)});const o=_u({key:t.config.apiKey,...s}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return S3()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ps(t.emulatorConfig.host)&&(d.credentials="include"),WC.fetch()(await QC(t,t.config.apiHost,n,o),d)})}async function KC(t,e,n){t._canInitEmulator=!1;const r={...p9,...e};try{const a=new _9(t),i=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw bd(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const o=i.ok?s.errorMessage:s.error.message,[u,d]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw bd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw bd(t,"user-disabled",s);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw YC(t,h,d);Xn(t,h)}}catch(a){if(a instanceof Bn)throw a;Xn(t,"network-request-failed",{message:String(a)})}}async function dm(t,e,n,r,a={}){const i=await vi(t,e,n,r,a);return"mfaPendingCredential"in i&&Xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function QC(t,e,n,r){const a=`${e}${n}?${r}`,i=t,s=i.config.emulator?h_(t.config,a):`${t.config.apiScheme}://${a}`;return g9.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(s).toString():s}function v9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_r(this.auth,"network-request-failed")),y9.get())})}}function bd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=_r(t,e,r);return a.customData._tokenResponse=n,a}function Jw(t){return t!==void 0&&t.enterprise!==void 0}class b9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return v9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x9(t,e){return vi(t,"GET","/v2/recaptchaConfig",bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(t,e){return vi(t,"POST","/v1/accounts:delete",e)}async function Wh(t,e){return vi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E9(t,e=!1){const n=We(t),r=await n.getIdToken(e),a=f_(r);te(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,s=i==null?void 0:i.sign_in_provider;return{claims:a,token:r,authTime:Ac(qp(a.auth_time)),issuedAtTime:Ac(qp(a.iat)),expirationTime:Ac(qp(a.exp)),signInProvider:s||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function qp(t){return Number(t)*1e3}function f_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const a=eA(n);return a?JSON.parse(a):(Xd("Failed to decode base64 JWT payload"),null)}catch(a){return Xd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Zw(t){const e=f_(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bn&&T9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function T9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Jc(t,Wh(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];t._notifyReloadListener(a);const i=(f=a.providerUserInfo)!=null&&f.length?XC(a.providerUserInfo):[],s=A9(t.providerData,i),o=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(s!=null&&s.length),d=o?u:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new zy(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function N9(t){const e=We(t);await Kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A9(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function XC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(t,e){const n=await KC(t,{},async()=>{const r=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,s=await QC(t,a,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:o,body:r};return t.emulatorConfig&&ps(t.emulatorConfig.host)&&(u.credentials="include"),WC.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function R9(t,e){return vi(t,"POST","/v2/accounts:revokeToken",bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=Zw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:a,expiresIn:i}=await C9(e,n);this.updateTokensAndExpiration(r,a,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:a,expirationTime:i}=n,s=new po;return r&&(te(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),a&&(te(typeof a=="string","internal-error",{appName:e}),s.accessToken=a),i&&(te(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new po,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor({uid:e,auth:n,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new S9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Jc(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return E9(this,e)}reload(){return N9(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Kh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(Xa(this.auth));const e=await this.getIdToken();return await Jc(this,w9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,a=n.email??void 0,i=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:w,stsTokenManager:N}=n;te(f&&N,e,"internal-error");const A=po.fromJSON(this.name,N);te(typeof f=="string",e,"internal-error"),_a(r,e.name),_a(a,e.name),te(typeof p=="boolean",e,"internal-error"),te(typeof y=="boolean",e,"internal-error"),_a(i,e.name),_a(s,e.name),_a(o,e.name),_a(u,e.name),_a(d,e.name),_a(h,e.name);const _=new Hn({uid:f,auth:e,email:a,emailVerified:p,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:A,createdAt:d,lastLoginAt:h});return w&&Array.isArray(w)&&(_.providerData=w.map(x=>({...x}))),u&&(_._redirectEventId=u),_}static async _fromIdTokenResponse(e,n,r=!1){const a=new po;a.updateFromServerResponse(n);const i=new Hn({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Kh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const a=n.users[0];te(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?XC(a.providerUserInfo):[],s=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),o=new po;o.updateFromIdToken(r);const u=new Hn({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:s}),d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new zy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=new Map;function Br(t){ra(t instanceof Function,"Expected a class definition");let e=eE.get(t);return e?(ra(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JC.type="NONE";const tE=JC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(t,e,n){return`firebase:${t}:${e}:${n}`}class go{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:a,name:i}=this.auth;this.fullUserKey=Jd(this.userKey,a.apiKey,i),this.fullPersistenceKey=Jd("persistence",a.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wh(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new go(Br(tE),e,r);const a=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=a[0]||Br(tE);const s=Jd(r,e.config.apiKey,e.name);let o=null;for(const d of n)try{const h=await d._get(s);if(h){let f;if(typeof h=="string"){const p=await Wh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Hn._fromGetAccountInfoResponse(e,p,h)}else f=Hn._fromJSON(e,h);d!==i&&(o=f),i=d;break}}catch{}const u=a.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new go(i,e,r):(i=u[0],o&&await i._set(s,o.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(s)}catch{}})),new go(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aR(e))return"Blackberry";if(iR(e))return"Webos";if(eR(e))return"Safari";if((e.includes("chrome/")||tR(e))&&!e.includes("edge/"))return"Chrome";if(rR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZC(t=zt()){return/firefox\//i.test(t)}function eR(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tR(t=zt()){return/crios\//i.test(t)}function nR(t=zt()){return/iemobile/i.test(t)}function rR(t=zt()){return/android/i.test(t)}function aR(t=zt()){return/blackberry/i.test(t)}function iR(t=zt()){return/webos/i.test(t)}function m_(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D9(t=zt()){var e;return m_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function I9(){return A3()&&document.documentMode===10}function sR(t=zt()){return m_(t)||rR(t)||iR(t)||aR(t)||/windows phone/i.test(t)||nR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t,e=[]){let n;switch(t){case"Browser":n=nE(zt());break;case"Worker":n=`${nE(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((s,o)=>{try{const u=e(i);s(u)}catch(u){o(u)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j9(t,e={}){return vi(t,"GET","/v2/passwordPolicy",bs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=6;class M9{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??k9,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e,n,r,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rE(this),this.idTokenSubscription=new rE(this),this.beforeStateQueue=new O9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,a,i;if(!this._deleted&&(this.persistenceManager=await go.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wh(this,{idToken:e}),r=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(In(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(i=this.redirectUser)==null?void 0:i._redirectEventId,o=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===o)&&(u!=null&&u.user)&&(r=u.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(Xa(this));const n=e?We(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(Xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(Xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await j9(this),n=new M9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await R9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Br(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,a){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,a);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&d9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function sl(t){return We(t)}class rE{constructor(e){this.auth=e,this.observer=null,this.addObserver=k3(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L9(t){hm=t}function lR(t){return hm.loadJS(t)}function V9(){return hm.recaptchaEnterpriseScript}function U9(){return hm.gapiScript}function B9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class z9{constructor(){this.enterprise=new F9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class F9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $9="recaptcha-enterprise",cR="NO_RECAPTCHA";class q9{constructor(e){this.type=$9,this.auth=sl(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(s,o)=>{x9(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new b9(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,s(d.siteKey)}}).catch(u=>{o(u)})})}function a(i,s,o){const u=window.grecaptcha;Jw(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{s(d)}).catch(()=>{s(cR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z9().execute("siteKey",{action:"verify"}):new Promise((i,s)=>{r(this.auth).then(o=>{if(!n&&Jw(window.grecaptcha))a(o,i,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=V9();u.length!==0&&(u+=o),lR(u).then(()=>{a(o,i,s)}).catch(d=>{s(d)})}}).catch(o=>{s(o)})})}}async function aE(t,e,n,r=!1,a=!1){const i=new q9(t);let s;if(a)s=cR;else try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const u=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const u=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function iE(t,e,n,r,a){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await aE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await aE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t,e){const n=mi(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),i=n.getOptions();if(Zr(i,e??{}))return a;Xn(a,"already-initialized")}return n.initialize({options:e})}function G9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Y9(t,e,n){const r=sl(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,i=uR(e),{host:s,port:o}=W9(e),u=o===null?"":`:${o}`,d={url:`${i}//${s}${u}/`},h=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Zr(d,r.config.emulator)&&Zr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ps(s)?(xv(`${i}//${s}${u}`),wv("Auth",!0)):K9()}function uR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function W9(t){const e=uR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const i=a[1];return{host:i,port:sE(r.substr(i.length+1))}}else{const[i,s]=r.split(":");return{host:i,port:sE(s)}}}function sE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function K9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,n){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function Q9(t,e){return vi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9(t,e){return dm(t,"POST","/v1/accounts:signInWithPassword",bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(t,e){return dm(t,"POST","/v1/accounts:signInWithEmailLink",bs(t,e))}async function Z9(t,e){return dm(t,"POST","/v1/accounts:signInWithEmailLink",bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends p_{constructor(e,n,r,a=null){super("password",r),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Zc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Zc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iE(e,n,"signInWithPassword",X9);case"emailLink":return J9(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iE(e,r,"signUpPassword",Q9);case"emailLink":return Z9(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t,e){return dm(t,"POST","/v1/accounts:signInWithIdp",bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="http://localhost";class ns extends p_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...i}=n;if(!r||!a)return null;const s=new ns(r,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yo(e,n)}buildRequest(){const e={requestUri:eU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nU(t){const e=tc(nc(t)).link,n=e?tc(nc(e)).deep_link_id:null,r=tc(nc(t)).deep_link_id;return(r?tc(nc(r)).link:null)||r||n||e||t}class g_{constructor(e){const n=tc(nc(e)),r=n.apiKey??null,a=n.oobCode??null,i=tU(n.mode??null);te(r&&a&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=a,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nU(e);try{return new g_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.providerId=ol.PROVIDER_ID}static credential(e,n){return Zc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=g_.parseLink(n);return te(r,"argument-error"),Zc._fromEmailAndCode(e,r.code,r.tenantId)}}ol.PROVIDER_ID="password";ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends dR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Nu{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Aa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:Ca.PROVIDER_ID,signInMethod:Ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ca.credentialFromTaggedObject(e)}static credentialFromError(e){return Ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ca.credential(n,r)}catch{return null}}}Ca.GOOGLE_SIGN_IN_METHOD="google.com";Ca.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends Nu{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ra.credential(e.oauthAccessToken)}catch{return null}}}Ra.GITHUB_SIGN_IN_METHOD="github.com";Ra.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Nu{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Da.credentialFromTaggedObject(e)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Da.credential(n,r)}catch{return null}}}Da.TWITTER_SIGN_IN_METHOD="twitter.com";Da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,a=!1){const i=await Hn._fromIdTokenResponse(e,r,a),s=oE(r);return new Vo({user:i,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const a=oE(r);return new Vo({user:e,providerId:a,_tokenResponse:r,operationType:n})}}function oE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Bn{constructor(e,n,r,a){super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Qh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,a){return new Qh(e,n,r,a)}}function hR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qh._fromErrorAndOperation(t,i,e,r):i})}async function rU(t,e,n=!1){const r=await Jc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t,e,n=!1){const{auth:r}=t;if(In(r.app))return Promise.reject(Xa(r));const a="reauthenticate";try{const i=await Jc(t,hR(r,a,e,t),n);te(i.idToken,r,"internal-error");const s=f_(i.idToken);te(s,r,"internal-error");const{sub:o}=s;return te(t.uid===o,r,"user-mismatch"),Vo._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e,n=!1){if(In(t.app))return Promise.reject(Xa(t));const r="signIn",a=await hR(t,r,e),i=await Vo._fromIdTokenResponse(t,r,a);return n||await t._updateCurrentUser(i.user),i}async function iU(t,e){return fR(sl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(t){const e=sl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function oU(t,e,n){return In(t.app)?Promise.reject(Xa(t)):iU(We(t),ol.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sU(t),r})}function lU(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function cU(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function uU(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function dU(t){return We(t).signOut()}const Xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=1e3,fU=10;class pR extends mR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&e(n,a,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,u)=>{this.notifyListeners(s,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},i=this.storage.getItem(r);I9()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,fU):a()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pR.type="LOCAL";const mU=pR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR extends mR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gR.type="SESSION";const yR=gR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const r=new fm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:a,data:i}=n.data,s=this.handlersMap[a];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const o=Array.from(s).map(async d=>d(n.origin,i)),u=await pU(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,s;return new Promise((o,u)=>{const d=y_("",20);a.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:a,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(s),a.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[a.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return window}function yU(t){br().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}async function vU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _U(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function bU(){return vR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="firebaseLocalStorageDb",xU=1,Jh="firebaseLocalStorage",bR="fbase_key";class Au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mm(t,e){return t.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function wU(){const t=indexedDB.deleteDatabase(_R);return new Au(t).toPromise()}function Fy(){const t=indexedDB.open(_R,xU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jh,{keyPath:bR})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jh)?e(r):(r.close(),await wU(),e(await Fy()))})})}async function lE(t,e,n){const r=mm(t,!0).put({[bR]:e,value:n});return new Au(r).toPromise()}async function EU(t,e){const n=mm(t,!1).get(e),r=await new Au(n).toPromise();return r===void 0?null:r.value}function cE(t,e){const n=mm(t,!0).delete(e);return new Au(n).toPromise()}const TU=800,SU=3;class xR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>SU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fm._getInstance(bU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await vU(),!this.activeServiceWorker)return;this.sender=new gU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_U()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fy();return await lE(e,Xh,"1"),await cE(e,Xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>lE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>EU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=mm(a,!1).getAll();return new Au(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xR.type="LOCAL";const NU=xR;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t,e){return e?Br(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends p_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CU(t){return fR(t.auth,new v_(t),t.bypassAuthState)}function RU(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),aU(n,new v_(t),t.bypassAuthState)}async function DU(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),rU(n,new v_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,a,i=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:a,tenantId:i,error:s,type:o}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CU;case"linkViaPopup":case"linkViaRedirect":return DU;case"reauthViaPopup":case"reauthViaRedirect":return RU;default:Xn(this.auth,"internal-error")}}resolve(e){ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=new Su(2e3,1e4);class ao extends wR{constructor(e,n,r,a,i){super(e,n,a,i),this.provider=r,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){ra(this.filter.length===1,"Popup operations only handle one event");const e=y_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IU.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="pendingRedirect",Zd=new Map;class jU extends wR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const r=await kU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kU(t,e){const n=LU(e),r=PU(t);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function MU(t,e){Zd.set(t._key(),e)}function PU(t){return Br(t._redirectPersistence)}function LU(t){return Jd(OU,t.config.apiKey,t.name)}async function VU(t,e,n=!1){if(In(t.app))return Promise.reject(Xa(t));const r=sl(t),a=AU(r,e),s=await new jU(r,a,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=10*60*1e3;class BU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ER(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(_r(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UU&&this.cachedEventUids.clear(),this.cachedEventUids.has(uE(e))}saveEventToCache(e){this.cachedEventUids.add(uE(e)),this.lastProcessedEventTime=Date.now()}}function uE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ER({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ER(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e={}){return vi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qU=/^https?/;async function HU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await FU(t);for(const n of e)try{if(GU(n))return}catch{}Xn(t,"unauthorized-domain")}function GU(t){const e=By(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!qU.test(n))return!1;if($U.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=new Su(3e4,6e4);function dE(){const t=br().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WU(t){return new Promise((e,n)=>{var a,i,s;function r(){dE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dE(),n(_r(t,"network-request-failed"))},timeout:YU.get()})}if((i=(a=br().gapi)==null?void 0:a.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((s=br().gapi)!=null&&s.load)r();else{const o=B9("iframefcb");return br()[o]=()=>{gapi.load?r():n(_r(t,"network-request-failed"))},lR(`${U9()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw eh=null,e})}let eh=null;function KU(t){return eh=eh||WU(t),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=new Su(5e3,15e3),XU="__/auth/iframe",JU="emulator/auth/iframe",ZU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t7(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?h_(e,JU):`https://${t.config.authDomain}/${XU}`,r={apiKey:e.apiKey,appName:t.name,v:ys},a=e7.get(t.config.apiHost);a&&(r.eid=a);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${_u(r).slice(1)}`}async function n7(t){const e=await KU(t),n=br().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:t7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZU,dontclear:!0},r=>new Promise(async(a,i)=>{await r.restyle({setHideOnLeave:!1});const s=_r(t,"network-request-failed"),o=br().setTimeout(()=>{i(s)},QU.get());function u(){br().clearTimeout(o),a(r)}r.ping(u).then(u,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a7=500,i7=600,s7="_blank",o7="http://localhost";class hE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l7(t,e,n,r=a7,a=i7){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const u={...r7,width:r.toString(),height:a.toString(),top:i,left:s},d=zt().toLowerCase();n&&(o=tR(d)?s7:n),ZC(d)&&(e=e||o7,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(D9(d)&&o!=="_self")return c7(e||"",o),new hE(null);const f=window.open(e||"",o,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new hE(f)}function c7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7="__/auth/handler",d7="emulator/auth/handler",h7=encodeURIComponent("fac");async function fE(t,e,n,r,a,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ys,eventId:a};if(e instanceof dR){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",j3(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))s[h]=f}if(e instanceof Nu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const o=s;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const u=await t._getAppCheckToken(),d=u?`#${h7}=${encodeURIComponent(u)}`:"";return`${f7(t)}?${_u(o).slice(1)}${d}`}function f7({config:t}){return t.emulator?h_(t,d7):`https://${t.authDomain}/${u7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="webStorageSupport";class m7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yR,this._completeRedirectFn=VU,this._overrideRedirectResult=MU}async _openPopup(e,n,r,a){var s;ra((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await fE(e,n,r,By(),a);return l7(e,i,y_())}async _openRedirect(e,n,r,a){await this._originValidation(e);const i=await fE(e,n,r,By(),a);return yU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:i}=this.eventManagers[n];return a?Promise.resolve(a):(ra(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await n7(e),r=new BU(e);return n.register("authEvent",a=>(te(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},a=>{var s;const i=(s=a==null?void 0:a[0])==null?void 0:s[Hp];i!==void 0&&n(!!i),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sR()||eR()||m_()}}const p7=m7;var mE="@firebase/auth",pE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v7(t){Kn(new Un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;te(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oR(t)},d=new P9(r,a,i,u);return G9(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kn(new Un("auth-internal",e=>{const n=sl(e.getProvider("auth").getImmediate());return(r=>new g7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tn(mE,pE,y7(t)),tn(mE,pE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=5*60,b7=aA("authIdTokenMaxAge")||_7;let gE=null;const x7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>b7)return;const a=n==null?void 0:n.token;gE!==a&&(gE=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function w7(t=Bf()){const e=mi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=H9(t,{popupRedirectResolver:p7,persistence:[NU,mU,yR]}),r=aA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const s=x7(i.toString());cU(n,s,()=>s(n.currentUser)),lU(n,o=>s(o))}}const a=tA("auth");return a&&Y9(n,`http://${a}`),n}function E7(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}L9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const i=_r("internal-error");i.customData=a,n(i)},r.type="text/javascript",r.charset="UTF-8",E7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v7("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firebasestorage.googleapis.com",T7="storageBucket",S7=2*60*1e3,N7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Bn{constructor(e,n,r=0){super(Gp(e),`Firebase Storage: ${n} (${Gp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Er;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Er||(Er={}));function Gp(t){return"storage/"+t}function A7(){const t="An unknown error occurred, please check the error payload for server response.";return new Nr(Er.UNKNOWN,t)}function C7(){return new Nr(Er.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function R7(){return new Nr(Er.CANCELED,"User canceled the upload/download.")}function D7(t){return new Nr(Er.INVALID_URL,"Invalid URL '"+t+"'.")}function I7(t){return new Nr(Er.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yE(t){return new Nr(Er.INVALID_ARGUMENT,t)}function SR(){return new Nr(Er.APP_DELETED,"The Firebase app was deleted.")}function O7(t){return new Nr(Er.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw I7(e)}static makeFromUrl(e,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+a+s,"i"),u={bucket:1,path:3};function d(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${a}/o${p}`,"i"),w={bucket:1,path:3},N=n===TR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",_=new RegExp(`^https?://${N}/${a}/${A}`,"i"),E=[{regex:o,indices:u,postModify:i},{regex:y,indices:w,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let I=0;I<E.length;I++){const V=E[I],q=V.regex.exec(e);if(q){const S=q[V.indices.bucket];let v=q[V.indices.path];v||(v=""),r=new Gn(S,v),V.postModify(r);break}}if(r==null)throw D7(e);return r}}class j7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(t,e,n){let r=1,a=null,i=null,s=!1,o=0;function u(){return o===2}let d=!1;function h(...A){d||(d=!0,e.apply(null,A))}function f(A){a=setTimeout(()=>{a=null,t(y,u())},A)}function p(){i&&clearTimeout(i)}function y(A,..._){if(d){p();return}if(A){p(),h.call(null,A,..._);return}if(u()||s){p(),h.call(null,A,..._);return}r<64&&(r*=2);let E;o===1?(o=2,E=0):E=(r+Math.random())*1e3,f(E)}let w=!1;function N(A){w||(w=!0,p(),!d&&(a!==null?(A||(o=2),clearTimeout(a),f(0)):A||(o=1)))}return f(0),i=setTimeout(()=>{s=!0,N(!0)},n),N}function M7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(t){return t!==void 0}function vE(t,e,n,r){if(r<e)throw yE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yE(`Invalid value for '${t}'. Expected ${n} or less.`)}function L7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var Zh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zh||(Zh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t,e){const n=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,n,r,a,i,s,o,u,d,h,f,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,N)=>{this.resolve_=w,this.reject_=N,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new xd(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const s=o=>{const u=o.loaded,d=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(s),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(s),this.pendingConnection_=null;const o=i.getErrorCode()===Zh.NO_ERROR,u=i.getStatus();if(!o||V7(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Zh.ABORT;r(!1,new xd(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new xd(d,i))})},n=(r,a)=>{const i=this.resolve_,s=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const u=this.callback_(o,o.getResponse());P7(u)?i(u):i()}catch(u){s(u)}else if(o!==null){const u=A7();u.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,u)):s(u)}else if(a.canceled){const u=this.appDelete_?SR():R7();s(u)}else{const u=C7();s(u)}};this.canceled_?n(!1,new xd(!1,null,!0)):this.backoffId_=k7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&M7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function B7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function z7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function F7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function q7(t,e,n,r,a,i,s=!0,o=!1){const u=L7(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return F7(h,e),B7(h,n),z7(h,i),$7(h,r),new U7(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function G7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ef(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G7(this._location.path)}get storage(){return this._service}get parent(){const e=H7(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new ef(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw O7(e)}}function _E(t,e){const n=e==null?void 0:e[T7];return n==null?null:Gn.makeFromBucketSpec(n,t)}function Y7(t,e,n,r={}){t.host=`${e}:${n}`;const a=ps(e);a&&(xv(`https://${t.host}/b`),wv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:iA(i,t.app.options.projectId))}class W7{constructor(e,n,r,a,i,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=TR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=S7,this._maxUploadRetryTime=N7,this._requests=new Set,a!=null?this._bucket=Gn.makeFromBucketSpec(a,this._host):this._bucket=_E(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=_E(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ef(this,e)}_makeRequest(e,n,r,a,i=!0){if(this._deleted)return new j7(SR());{const s=q7(e,this._appId,r,a,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,a).getPromise()}}const bE="@firebase/storage",xE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="storage";function K7(t=Bf(),e){t=We(t);const r=mi(t,NR).getImmediate({identifier:e}),a=nA("storage");return a&&Q7(r,...a),r}function Q7(t,e,n,r={}){Y7(t,e,n,r)}function X7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new W7(n,r,a,e,ys)}function J7(){Kn(new Un(NR,X7,"PUBLIC").setMultipleInstances(!0)),tn(bE,xE,""),tn(bE,xE,"esm2020")}J7();const AR="@firebase/installations",__="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=1e4,RR=`w:${__}`,DR="FIS_v2",Z7="https://firebaseinstallations.googleapis.com/v1",e8=60*60*1e3,t8="installations",n8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},rs=new gs(t8,n8,r8);function IR(t){return t instanceof Bn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR({projectId:t}){return`${Z7}/projects/${t}/installations`}function jR(t){return{token:t.token,requestStatus:2,expiresIn:i8(t.expiresIn),creationTime:Date.now()}}async function kR(t,e){const r=(await e.json()).error;return rs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function MR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function a8(t,{refreshToken:e}){const n=MR(t);return n.append("Authorization",s8(e)),n}async function PR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function i8(t){return Number(t.replace("s","000"))}function s8(t){return`${DR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=OR(t),a=MR(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const s={fid:n,authVersion:DR,appId:t.appId,sdkVersion:RR},o={method:"POST",headers:a,body:JSON.stringify(s)},u=await PR(()=>fetch(r,o));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:jR(d.authToken)}}else throw await kR("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=/^[cdef][\w-]{21}$/,$y="";function u8(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=d8(t);return c8.test(n)?n:$y}catch{return $y}}function d8(t){return l8(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Map;function UR(t,e){const n=pm(t);BR(n,e),h8(n,e)}function BR(t,e){const n=VR.get(t);if(n)for(const r of n)r(e)}function h8(t,e){const n=f8();n&&n.postMessage({key:t,fid:e}),m8()}let Ui=null;function f8(){return!Ui&&"BroadcastChannel"in self&&(Ui=new BroadcastChannel("[Firebase] FID Change"),Ui.onmessage=t=>{BR(t.data.key,t.data.fid)}),Ui}function m8(){VR.size===0&&Ui&&(Ui.close(),Ui=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8="firebase-installations-database",g8=1,as="firebase-installations-store";let Yp=null;function b_(){return Yp||(Yp=dA(p8,g8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(as)}}})),Yp}async function tf(t,e){const n=pm(t),a=(await b_()).transaction(as,"readwrite"),i=a.objectStore(as),s=await i.get(n);return await i.put(e,n),await a.done,(!s||s.fid!==e.fid)&&UR(t,e.fid),e}async function zR(t){const e=pm(t),r=(await b_()).transaction(as,"readwrite");await r.objectStore(as).delete(e),await r.done}async function gm(t,e){const n=pm(t),a=(await b_()).transaction(as,"readwrite"),i=a.objectStore(as),s=await i.get(n),o=e(s);return o===void 0?await i.delete(n):await i.put(o,n),await a.done,o&&(!s||s.fid!==o.fid)&&UR(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_(t){let e;const n=await gm(t.appConfig,r=>{const a=y8(r),i=v8(t,a);return e=i.registrationPromise,i.installationEntry});return n.fid===$y?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function y8(t){const e=t||{fid:u8(),registrationStatus:0};return FR(e)}function v8(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(rs.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=_8(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:b8(t)}:{installationEntry:e}}async function _8(t,e){try{const n=await o8(t,e);return tf(t.appConfig,n)}catch(n){throw IR(n)&&n.customData.serverCode===409?await zR(t.appConfig):await tf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function b8(t){let e=await wE(t.appConfig);for(;e.registrationStatus===1;)await LR(100),e=await wE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await x_(t);return r||n}return e}function wE(t){return gm(t,e=>{if(!e)throw rs.create("installation-not-found");return FR(e)})}function FR(t){return x8(t)?{fid:t.fid,registrationStatus:0}:t}function x8(t){return t.registrationStatus===1&&t.registrationTime+CR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8({appConfig:t,heartbeatServiceProvider:e},n){const r=E8(t,n),a=a8(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const s={installation:{sdkVersion:RR,appId:t.appId}},o={method:"POST",headers:a,body:JSON.stringify(s)},u=await PR(()=>fetch(r,o));if(u.ok){const d=await u.json();return jR(d)}else throw await kR("Generate Auth Token",u)}function E8(t,{fid:e}){return`${OR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(t,e=!1){let n;const r=await gm(t.appConfig,i=>{if(!$R(i))throw rs.create("not-registered");const s=i.authToken;if(!e&&N8(s))return i;if(s.requestStatus===1)return n=T8(t,e),i;{if(!navigator.onLine)throw rs.create("app-offline");const o=C8(i);return n=S8(t,o),o}});return n?await n:r.authToken}async function T8(t,e){let n=await EE(t.appConfig);for(;n.authToken.requestStatus===1;)await LR(100),n=await EE(t.appConfig);const r=n.authToken;return r.requestStatus===0?w_(t,e):r}function EE(t){return gm(t,e=>{if(!$R(e))throw rs.create("not-registered");const n=e.authToken;return R8(n)?{...e,authToken:{requestStatus:0}}:e})}async function S8(t,e){try{const n=await w8(t,e),r={...e,authToken:n};return await tf(t.appConfig,r),n}catch(n){if(IR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await zR(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await tf(t.appConfig,r)}throw n}}function $R(t){return t!==void 0&&t.registrationStatus===2}function N8(t){return t.requestStatus===2&&!A8(t)}function A8(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+e8}function C8(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function R8(t){return t.requestStatus===1&&t.requestTime+CR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D8(t){const e=t,{installationEntry:n,registrationPromise:r}=await x_(e);return r?r.catch(console.error):w_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I8(t,e=!1){const n=t;return await O8(n),(await w_(n,e)).token}async function O8(t){const{registrationPromise:e}=await x_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t){if(!t||!t.options)throw Wp("App Configuration");if(!t.name)throw Wp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Wp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Wp(t){return rs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="installations",k8="installations-internal",M8=t=>{const e=t.getProvider("app").getImmediate(),n=j8(e),r=mi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},P8=t=>{const e=t.getProvider("app").getImmediate(),n=mi(e,qR).getImmediate();return{getId:()=>D8(n),getToken:a=>I8(n,a)}};function L8(){Kn(new Un(qR,M8,"PUBLIC")),Kn(new Un(k8,P8,"PRIVATE"))}L8();tn(AR,__);tn(AR,__,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="analytics",V8="firebase_id",U8="origin",B8=60*1e3,z8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",E_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt=new Uf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_n=new gs("analytics","Analytics",F8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t){if(!t.startsWith(E_)){const e=_n.create("invalid-gtag-resource",{gtagURL:t});return qt.warn(e.message),""}return t}function HR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function q8(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function H8(t,e){const n=q8("firebase-js-sdk-policy",{createScriptURL:$8}),r=document.createElement("script"),a=`${E_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function G8(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Y8(t,e,n,r,a,i){const s=r[a];try{if(s)await e[s];else{const u=(await HR(n)).find(d=>d.measurementId===a);u&&await e[u.appId]}}catch(o){qt.error(o)}t("config",a,i)}async function W8(t,e,n,r,a){try{let i=[];if(a&&a.send_to){let s=a.send_to;Array.isArray(s)||(s=[s]);const o=await HR(n);for(const u of s){const d=o.find(f=>f.measurementId===u),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,a||{})}catch(i){qt.error(i)}}function K8(t,e,n,r){async function a(i,...s){try{if(i==="event"){const[o,u]=s;await W8(t,e,n,o,u)}else if(i==="config"){const[o,u]=s;await Y8(t,e,n,r,o,u)}else if(i==="consent"){const[o,u]=s;t("consent",o,u)}else if(i==="get"){const[o,u,d]=s;t("get",o,u,d)}else if(i==="set"){const[o]=s;t("set",o)}else t(i,...s)}catch(o){qt.error(o)}}return a}function Q8(t,e,n,r,a){let i=function(...s){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=K8(i,t,e,n),{gtagCore:i,wrappedGtag:window[a]}}function X8(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(E_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=30,Z8=1e3;class eB{constructor(e={},n=Z8){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const GR=new eB;function tB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function nB(t){var s;const{appId:e,apiKey:n}=t,r={method:"GET",headers:tB(n)},a=z8.replace("{app-id}",e),i=await fetch(a,r);if(i.status!==200&&i.status!==304){let o="";try{const u=await i.json();(s=u.error)!=null&&s.message&&(o=u.error.message)}catch{}throw _n.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function rB(t,e=GR,n){const{appId:r,apiKey:a,measurementId:i}=t.options;if(!r)throw _n.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:r};throw _n.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new sB;return setTimeout(async()=>{o.abort()},B8),YR({appId:r,apiKey:a,measurementId:i},s,o,e)}async function YR(t,{throttleEndTimeMillis:e,backoffCount:n},r,a=GR){var o;const{appId:i,measurementId:s}=t;try{await aB(r,e)}catch(u){if(s)return qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:s};throw u}try{const u=await nB(t);return a.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!iB(d)){if(a.deleteThrottleMetadata(i),s)return qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:s};throw u}const h=Number((o=d==null?void 0:d.customData)==null?void 0:o.httpStatus)===503?Fx(n,a.intervalMillis,J8):Fx(n,a.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return a.setThrottleMetadata(i,f),qt.debug(`Calling attemptFetch again in ${h} millis`),YR(t,f,r,a)}}function aB(t,e){return new Promise((n,r)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(i),r(_n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function iB(t){if(!(t instanceof Bn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sB{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function oB(t,e,n,r,a){if(a&&a.global){t("event",n,r);return}else{const i=await e,s={...r,send_to:i};t("event",n,s)}}async function lB(t,e,n,r){if(r&&r.global){const a={};for(const i of Object.keys(n))a[`user_properties.${i}`]=n[i];return t("set",a),Promise.resolve()}else{const a=await e;t("config",a,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(){if(oA())try{await lA()}catch(t){return qt.warn(_n.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return qt.warn(_n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uB(t,e,n,r,a,i,s){const o=rB(t);o.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&qt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>qt.error(p)),e.push(o);const u=cB().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([o,u]);X8(i)||H8(i,d.measurementId),a("js",new Date);const f=(s==null?void 0:s.config)??{};return f[U8]="firebase",f.update=!0,h!=null&&(f[V8]=h),a("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e){this.app=e}_delete(){return delete vo[this.app.options.appId],Promise.resolve()}}let vo={},TE=[];const SE={};let Kp="dataLayer",hB="gtag",NE,T_,AE=!1;function fB(){const t=[];if(sA()&&t.push("This is a browser extension environment."),R3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,a)=>`(${a+1}) ${r}`).join(" "),n=_n.create("invalid-analytics-context",{errorInfo:e});qt.warn(n.message)}}function mB(t,e,n){fB();const r=t.options.appId;if(!r)throw _n.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _n.create("no-api-key");if(vo[r]!=null)throw _n.create("already-exists",{id:r});if(!AE){G8(Kp);const{wrappedGtag:i,gtagCore:s}=Q8(vo,TE,SE,Kp,hB);T_=i,NE=s,AE=!0}return vo[r]=uB(t,TE,SE,e,NE,Kp,n),new dB(t)}function pB(t=Bf()){t=We(t);const e=mi(t,nf);return e.isInitialized()?e.getImmediate():gB(t)}function gB(t,e={}){const n=mi(t,nf);if(n.isInitialized()){const a=n.getImmediate();if(Zr(e,n.getOptions()))return a;throw _n.create("already-initialized")}return n.initialize({options:e})}function yB(t,e,n){t=We(t),lB(T_,vo[t.app.options.appId],e,n).catch(r=>qt.error(r))}function vB(t,e,n,r){t=We(t),oB(T_,vo[t.app.options.appId],e,n,r).catch(a=>qt.error(a))}const CE="@firebase/analytics",RE="0.10.19";function _B(){Kn(new Un(nf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return mB(r,a,n)},"PUBLIC")),Kn(new Un("analytics-internal",t,"PRIVATE")),tn(CE,RE),tn(CE,RE,"esm2020");function t(e){try{const n=e.getProvider(nf).getImmediate();return{logEvent:(r,a,i)=>vB(n,r,a,i),setUserProperties:(r,a)=>yB(n,r,a)}}catch(n){throw _n.create("interop-component-reg-failed",{reason:n})}}}_B();const bB={apiKey:"AIzaSyAriwME6CybqyDw1e3yNTwF6sHk4NUn7oY",authDomain:"planyourtrip-ed010.firebaseapp.com",databaseURL:"https://planyourtrip-ed010-default-rtdb.firebaseio.com",projectId:"planyourtrip-ed010",storageBucket:"planyourtrip-ed010.firebasestorage.app",messagingSenderId:"889865160214",appId:"1:889865160214:web:3cbe594765950e07609737",measurementId:"G-1TY4MKM2D9"},ym=hA(bB),Et=HV(ym),S_=w7(ym);K7(ym);pB(ym);const xB=async t=>{try{return(await um(la(Et,"trips"),{...t,createdAt:fe.now()})).id}catch(e){throw console.error("Error creating trip:",e),e}},WR=async t=>{try{const e=wr(Et,"trips",t),n=await FC(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){throw console.error("Error getting trip:",e),e}},wB=async()=>{try{return(await l_(la(Et,"trips"))).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error getting all trips:",t),t}},DE=async(t,e)=>{try{const n=wr(Et,"trips",t);await cm(n,e)}catch(n){throw console.error("Error updating trip:",n),n}},EB=async t=>{try{await c_(wr(Et,"trips",t))}catch(e){throw console.error("Error deleting trip:",e),e}},KR=async t=>{try{return(await um(la(Et,"registrations"),{...t,timestamp:fe.now()})).id}catch(e){throw console.error("Error creating registration:",e),e}},TB=async t=>{try{const e=om(la(Et,"registrations"),a_("tripId","==",t));return(await l_(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting registrations:",e),e}},rf=async(t,e)=>{try{const n=wr(Et,"registrations",t);await cm(n,e)}catch(n){throw console.error("Error updating registration:",n),n}},QR=async t=>{try{await c_(wr(Et,"registrations",t))}catch(e){throw console.error("Error deleting registration:",e),e}},SB=({selectedDate:t,onClose:e,onCreate:n})=>{const[r,a]=R.useState({title:"",vehicleLayout:"sprinter_15",driverName:"",whatsappGroupLink:"",status:"planned",date:t,endDate:t,customSeats:[]}),[i,s]=R.useState(!1),[o,u]=R.useState(!1),d=Array.from({length:50},(E,I)=>I+1),h=async E=>{E.preventDefault(),s(!0);try{const I={...r,date:fe.fromDate(r.date),endDate:fe.fromDate(r.endDate)};r.vehicleLayout==="custom"&&r.customSeats.length>0&&(I.vehicleLayout=`custom_${r.customSeats.length}`,I.customSeats=r.customSeats),await n(I)}catch(I){console.error("Error creating trip:",I)}finally{s(!1)}},f=E=>{const I=new Date(E.target.value),V=I>r.endDate?I:r.endDate;a({...r,date:I,endDate:V})},p=E=>{const I=new Date(E.target.value);a({...r,endDate:I})},y=()=>{const E=new Date(r.date),I=new Date(r.endDate);E.setHours(0,0,0,0),I.setHours(0,0,0,0);const V=Math.abs(I-E);return Math.ceil(V/(1e3*60*60*24))+1},w=E=>{const I=E.getFullYear(),V=String(E.getMonth()+1).padStart(2,"0"),q=String(E.getDate()).padStart(2,"0");return`${I}-${V}-${q}`},N=E=>{const I=E.target.value;a({...r,vehicleLayout:I}),u(I==="custom")},A=E=>{const I=[...r.customSeats],V=I.indexOf(E);V>-1?I.splice(V,1):(I.push(E),I.sort((q,S)=>q-S)),a({...r,customSeats:I})},_=()=>{a({...r,customSeats:[...d]})},x=()=>{a({...r,customSeats:[]})};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-15 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full border-4 border-teal-400 max-h-[90vh] overflow-y-auto",onClick:E=>E.stopPropagation(),style:{borderColor:P.primary.teal},children:[l.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white px-6 py-4 rounded-t-xl flex justify-between items-center sticky top-0 z-10",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Create New Trip"}),l.jsx("button",{onClick:e,className:"hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:l.jsx(hs,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Title"}),l.jsx("input",{type:"text",value:r.title,onChange:E=>a({...r,title:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Beach Trip, Museum Visit",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),l.jsx("input",{type:"date",value:w(r.date),onChange:f,className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent hover:border-[#00BCD4] transition-colors cursor-pointer",style:{borderColor:P.primary.teal},required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),l.jsx("input",{type:"date",value:w(r.endDate),onChange:p,min:w(r.date),className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent hover:border-[#00BCD4] transition-colors cursor-pointer",style:{borderColor:P.primary.teal},required:!0})]})]}),l.jsx("div",{className:"bg-teal-50 border-2 border-teal-200 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-gray-700",children:[l.jsx("span",{className:"font-semibold",style:{color:P.primary.teal},children:"Trip Duration:"})," ",l.jsxs("span",{className:"font-medium",children:[y()," ",y()===1?"day":"days"]}),y()===1&&l.jsx("span",{className:"text-xs text-gray-600 ml-2",children:"(Single-day trip)"})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Driver Name"}),l.jsx("input",{type:"text",value:r.driverName,onChange:E=>a({...r,driverName:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",placeholder:"e.g., John Smith",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Type"}),l.jsxs("select",{value:r.vehicleLayout,onChange:N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",children:[l.jsx("option",{value:"sprinter_15",children:"Mercedes Sprinter Black (14 Seats)"}),l.jsx("option",{value:"bus_30",children:"Mercedes Sprinter White (11 Seats)"}),l.jsx("option",{value:"highlander_7",children:"Toyota Highlander (7 Seats)"}),l.jsx("option",{value:"custom",children:"Custom Seat Selection"})]})]}),o&&l.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:P.primary.teal},children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Select Seats (",r.customSeats.length," selected)"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:_,className:"text-xs px-3 py-1 rounded-lg text-white hover:opacity-90 transition-opacity",style:{backgroundColor:P.primary.teal},children:"Select All"}),l.jsx("button",{type:"button",onClick:x,className:"text-xs px-3 py-1 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:"Clear All"})]})]}),l.jsx("div",{className:"grid grid-cols-10 gap-2 max-h-64 overflow-y-auto p-2 bg-gray-50 rounded",children:d.map(E=>{const I=r.customSeats.includes(E);return l.jsxs("button",{type:"button",onClick:()=>A(E),className:`relative h-10 rounded-lg text-sm font-medium transition-all ${I?"text-white shadow-md":"bg-white border-2 border-gray-300 text-gray-700 hover:border-teal-300"}`,style:I?{backgroundColor:P.primary.teal}:{},children:[E,I&&l.jsx(Cf,{className:"w-3 h-3 absolute top-0.5 right-0.5"})]},E)})}),r.customSeats.length===0&&l.jsx("p",{className:"text-xs text-red-600 mt-2",children:"Please select at least one seat"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Group Link (Optional)"}),l.jsx("input",{type:"url",value:r.whatsappGroupLink,onChange:E=>a({...r,whatsappGroupLink:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",placeholder:"https://chat.whatsapp.com/..."}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add a WhatsApp group link for trip participants to join"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Status"}),l.jsxs("select",{value:r.status,onChange:E=>a({...r,status:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",children:[l.jsx("option",{value:"planned",children:"Planned (Yellow)"}),l.jsx("option",{value:"scheduled",children:"Scheduled (Purple)"}),l.jsx("option",{value:"done",children:"Done (Green)"})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:i||o&&r.customSeats.length===0,style:{backgroundColor:P.primary.teal},className:"flex-1 px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Creating...":"Create Trip"})]})]})]})})},NB=({trip:t,onClose:e,onUpdate:n})=>{const r=()=>{var f;return(f=t.date)!=null&&f.toDate?t.date.toDate().toISOString().split("T")[0]:new Date().toISOString().split("T")[0]},a=()=>{var f;return(f=t.endDate)!=null&&f.toDate?t.endDate.toDate().toISOString().split("T")[0]:r()},[i,s]=R.useState({title:t.title||"",date:r(),endDate:a(),vehicleLayout:t.vehicleLayout||"sprinter_15",driverName:t.driverName||"",whatsappGroupLink:t.whatsappGroupLink||"",status:t.status||"planned"}),[o,u]=R.useState(!1),d=async f=>{f.preventDefault(),u(!0);try{const p={...i,date:fe.fromDate(new Date(i.date)),endDate:fe.fromDate(new Date(i.endDate))};await n(t.id,p)}catch(p){console.error("Error updating trip:",p)}finally{u(!1)}},h=()=>{const f=new Date(i.date),p=new Date(i.endDate);f.setHours(0,0,0,0),p.setHours(0,0,0,0);const y=Math.abs(p-f);return Math.ceil(y/(1e3*60*60*24))+1};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-15 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full border-4 border-teal-400",onClick:f=>f.stopPropagation(),style:{borderColor:P.primary.teal},children:[l.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white px-6 py-4 rounded-t-xl flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Edit Trip"}),l.jsx("button",{onClick:e,className:"hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:l.jsx(hs,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Title"}),l.jsx("input",{type:"text",value:i.title,onChange:f=>s({...i,title:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Beach Trip, Museum Visit",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),l.jsx("input",{type:"date",value:i.date,onChange:f=>{const p=f.target.value,y=new Date(p)>new Date(i.endDate)?p:i.endDate;s({...i,date:p,endDate:y})},className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent hover:border-[#00BCD4] transition-colors",style:{borderColor:P.primary.teal},required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),l.jsx("input",{type:"date",value:i.endDate,onChange:f=>s({...i,endDate:f.target.value}),min:i.date,className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent hover:border-[#00BCD4] transition-colors",style:{borderColor:P.primary.teal},required:!0})]})]}),l.jsx("div",{className:"bg-teal-50 border-2 border-teal-200 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-gray-700",children:[l.jsx("span",{className:"font-semibold",style:{color:P.primary.teal},children:"Trip Duration:"})," ",l.jsxs("span",{className:"font-medium",children:[h()," ",h()===1?"day":"days"]}),h()===1&&l.jsx("span",{className:"text-xs text-gray-600 ml-2",children:"(Single-day trip)"})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Driver Name"}),l.jsx("input",{type:"text",value:i.driverName,onChange:f=>s({...i,driverName:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",placeholder:"e.g., John Smith",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Type"}),l.jsxs("select",{value:i.vehicleLayout,onChange:f=>s({...i,vehicleLayout:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",children:[l.jsx("option",{value:"sprinter_15",children:"Mercedes Sprinter Black (14 Seats)"}),l.jsx("option",{value:"bus_30",children:"Mercedes Sprinter White (11 Seats)"}),l.jsx("option",{value:"highlander_7",children:"Toyota Highlander (7 Seats)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Group Link (Optional)"}),l.jsx("input",{type:"url",value:i.whatsappGroupLink,onChange:f=>s({...i,whatsappGroupLink:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",placeholder:"https://chat.whatsapp.com/..."}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add a WhatsApp group link for trip participants to join"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Status"}),l.jsxs("select",{value:i.status,onChange:f=>s({...i,status:f.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",children:[l.jsx("option",{value:"planned",children:"Planned (Yellow)"}),l.jsx("option",{value:"scheduled",children:"Scheduled (Purple)"}),l.jsx("option",{value:"done",children:"Done (Green)"})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o,style:{backgroundColor:P.primary.teal},className:"flex-1 px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Updating...":"Update Trip"})]})]})]})})},IE={sprinter_15:{name:"Mercedes Sprinter Black (13 Seats)",totalSeats:14,hasDriverName:!0,seats:[{id:1,row:1,position:"right",x:250,y:50},{id:2,row:2,position:"left",x:60,y:140},{id:3,row:2,position:"center",x:165,y:140},{id:4,row:2,position:"right",x:270,y:140},{id:5,row:3,position:"left",x:60,y:230},{id:6,row:3,position:"center",x:165,y:230},{id:7,row:3,position:"right",x:270,y:230},{id:8,row:4,position:"left",x:60,y:320},{id:9,row:4,position:"center",x:165,y:320},{id:10,row:4,position:"right",x:270,y:320},{id:11,row:5,position:"left",x:40,y:410},{id:12,row:5,position:"center-left",x:130,y:410},{id:13,row:5,position:"center-right",x:220,y:410},{id:14,row:5,position:"right",x:310,y:410}]},bus_30:{name:"Mercedes Sprinter White (10 Seats)",totalSeats:11,hasDriverName:!0,seats:[{id:1,row:1,position:"right",x:250,y:50},{id:2,row:2,position:"left",x:60,y:140},{id:3,row:2,position:"center",x:165,y:140},{id:4,row:2,position:"right",x:270,y:140},{id:5,row:3,position:"left",x:60,y:230},{id:6,row:3,position:"center",x:165,y:230},{id:7,row:3,position:"right",x:270,y:230},{id:8,row:4,position:"left",x:40,y:320},{id:9,row:4,position:"center-left",x:130,y:320},{id:10,row:4,position:"center-right",x:220,y:320},{id:11,row:4,position:"right",x:310,y:320}]},highlander_7:{name:"Toyota Highlander (7 Seats)",totalSeats:7,hasDriverName:!0,seats:[{id:1,row:1,position:"right",x:250,y:50},{id:2,row:2,position:"left",x:60,y:180},{id:3,row:2,position:"center",x:165,y:180},{id:4,row:2,position:"right",x:270,y:180},{id:5,row:3,position:"left",x:60,y:310},{id:6,row:3,position:"center",x:165,y:310},{id:7,row:3,position:"right",x:270,y:310}]}},XR=t=>IE[t]||IE.sprinter_15,JR=({vehicleType:t,registrations:e,onSeatClick:n,selectedSeat:r,driverName:a,reservedSeats:i=[]})=>{const s=XR(t),o=d=>e==null?void 0:e.find(h=>h.seatNumber===d),u=d=>o(d)||i.includes(d)?P.seat.occupied:r===d?P.seat.selected:P.seat.vacant;return l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-center",style:{color:P.primary.teal},children:s.name}),a&&l.jsxs("div",{className:"text-center mb-4 pb-4 border-b",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Driver: "}),l.jsx("span",{className:"font-semibold",style:{color:P.primary.teal},children:a})]}),l.jsxs("svg",{viewBox:"0 0 400 500",className:"w-full max-w-md mx-auto border-2 rounded-lg",style:{borderColor:P.primary.teal},children:[l.jsx("rect",{x:"10",y:"10",width:"380",height:"480",rx:"20",fill:"none",stroke:P.primary.black,strokeWidth:"3"}),l.jsx("line",{x1:"10",y1:"100",x2:"390",y2:"100",stroke:P.primary.black,strokeWidth:"2",strokeDasharray:"5,5"}),l.jsxs("g",{children:[l.jsx("rect",{x:"30",y:"40",width:"50",height:"50",rx:"5",fill:P.primary.black,stroke:P.primary.teal,strokeWidth:"2"}),l.jsx("text",{x:"55",y:"70",textAnchor:"middle",fontSize:"14",fill:"white",fontWeight:"bold",children:"D"}),a&&l.jsx("text",{x:"55",y:"115",textAnchor:"middle",fontSize:"10",fill:P.primary.teal,fontWeight:"600",children:a.split(" ")[0]})]}),s.seats.map(d=>{const h=o(d.id),f=n;return l.jsxs("g",{onClick:()=>f&&n(d.id,h),className:f?"cursor-pointer hover:opacity-80":"",children:[l.jsx("rect",{x:d.x-25,y:d.y-15,width:"50",height:"35",rx:"5",fill:u(d.id),stroke:"#4b5563",strokeWidth:"2"}),l.jsx("text",{x:d.x,y:d.y+5,textAnchor:"middle",fontSize:"14",fill:h||r===d.id?"white":"#1f2937",fontWeight:"bold",children:d.id})]},d.id)})]}),l.jsxs("div",{className:"flex justify-center gap-6 mt-4 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:P.seat.vacant,border:`2px solid ${P.primary.black}`}}),l.jsx("span",{children:"Vacant"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:P.seat.occupied,border:`2px solid ${P.primary.black}`}}),l.jsx("span",{children:"Occupied"})]}),n&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:P.seat.selected,border:`2px solid ${P.primary.black}`}}),l.jsx("span",{children:"Selected"})]})]})]})},AB=({trip:t,registrations:e,preselectedSeat:n=null,onClose:r,onSuccess:a})=>{const[i,s]=R.useState({firstName:"",lastName:"",email:"",phone:"",seatNumber:n,seatCount:1,paymentMethod:"on-trip",paid:!1}),[o,u]=R.useState(!1),[d,h]=R.useState(""),f=XR(t.vehicleLayout),p=e.map(N=>N.seatNumber),y=Array.from({length:f.totalSeats},(N,A)=>A+1).filter(N=>!p.includes(N)),w=async N=>{if(N.preventDefault(),h(""),!i.seatNumber){h("Please select a seat");return}if(i.seatCount>1){const A=i.seatNumber,_=[];for(let E=0;E<i.seatCount;E++)_.push(A+E);if(_.filter(E=>p.includes(E)||E>f.totalSeats).length>0){h(`Not enough consecutive seats available starting from seat ${A}. Please select a different seat.`);return}}u(!0);try{const A=i.seatNumber,_=[];for(let x=0;x<i.seatCount;x++){const E=A+x;_.push(KR({tripId:t.id,firstName:i.firstName,lastName:i.lastName,email:i.email,phone:i.phone,seatNumber:E,paymentMethod:i.paymentMethod,paid:i.paid,signatureUrl:"",pdfUrl:"",agreedToCancellationPolicy:!0,agreedToWaiver:!0,addedByAdmin:!0,isMultiSeat:i.seatCount>1,seatCount:i.seatCount}))}await Promise.all(_),a(),r()}catch(A){console.error("Error adding participant:",A),h("Failed to add participant. Please try again.")}finally{u(!1)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-15 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:r,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto border-4 border-teal-400",onClick:N=>N.stopPropagation(),style:{borderColor:P.primary.teal},children:[l.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white px-6 py-4 rounded-t-xl flex justify-between items-center sticky top-0 z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(SN,{className:"w-6 h-6"}),l.jsx("h2",{className:"text-xl font-bold",children:"Add Participant"})]}),l.jsx("button",{onClick:r,className:"hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:l.jsx(hs,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),l.jsx("input",{type:"text",value:i.firstName,onChange:N=>s({...i,firstName:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{focusRing:P.primary.teal},required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),l.jsx("input",{type:"text",value:i.lastName,onChange:N=>s({...i,lastName:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),l.jsx("input",{type:"email",value:i.email,onChange:N=>s({...i,email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),l.jsx("input",{type:"tel",value:i.phone,onChange:N=>s({...i,phone:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Seats *"}),l.jsx("select",{value:i.seatCount,onChange:N=>s({...i,seatCount:parseInt(N.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",children:[1,2,3,4,5,6,7,8,9,10].map(N=>l.jsxs("option",{value:N,children:[N," ",N===1?"Seat":"Seats"]},N))}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select how many seats this person needs (consecutive seats starting from the selected seat)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Seat Number *"}),l.jsxs("select",{value:i.seatNumber||"",onChange:N=>s({...i,seatNumber:parseInt(N.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0,children:[l.jsx("option",{value:"",children:"Select starting seat"}),y.map(N=>l.jsxs("option",{value:N,children:["Seat ",N]},N))]}),y.length===0&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:"No available seats"}),i.seatNumber&&i.seatCount>1&&l.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Will book seats ",i.seatNumber," - ",i.seatNumber+i.seatCount-1]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method *"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:i.paymentMethod==="card"?P.primary.teal:"#D1D5DB"},children:[l.jsx("input",{type:"radio",value:"card",checked:i.paymentMethod==="card",onChange:N=>s({...i,paymentMethod:N.target.value}),className:"mr-3",style:{accentColor:P.primary.teal}}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Pay with Card"}),l.jsx("div",{className:"text-sm text-gray-500",children:"Pay now using credit/debit card"})]})]}),l.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:i.paymentMethod==="on-trip"?P.primary.teal:"#D1D5DB"},children:[l.jsx("input",{type:"radio",value:"on-trip",checked:i.paymentMethod==="on-trip",onChange:N=>s({...i,paymentMethod:N.target.value}),className:"mr-3",style:{accentColor:P.primary.teal}}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Pay on Trip"}),l.jsx("div",{className:"text-sm text-gray-500",children:"Pay cash/card on the day of the trip"})]})]})]})]}),l.jsx("div",{children:l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-3 border rounded-lg hover:bg-gray-50 transition-colors",style:{borderColor:i.paid?P.primary.teal:"#D1D5DB"},children:[l.jsx("input",{type:"checkbox",checked:i.paid,onChange:N=>s({...i,paid:N.target.checked}),className:"w-5 h-5 rounded border-gray-300",style:{accentColor:P.primary.teal}}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Mark as Paid"}),l.jsx("div",{className:"text-sm text-gray-500",children:"Check if participant has already paid"})]})]})}),d&&l.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:d}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:o||y.length===0,style:{backgroundColor:P.primary.teal},className:"flex-1 px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Adding...":"Add Participant"})]})]})]})})},ll={en:{dashboard:"Trip Management Dashboard",dashboardShort:"Dashboard",IVRITours:"IVRI Tours",tripManagement:"Trip Management System",adminPortal:"Admin Portal",logout:"Logout",backToDashboard:"Back to dashboard",tripsFor:"Trips for",allTrips:"All Trips",all:"All",currentTrips:"Current Trips",current:"Current",oldTrips:"Old Trips",old:"Old",createTrip:"Create Trip",loadingTrips:"Loading trips...",noUpcomingTrips:"No upcoming trips scheduled.",noPastTrips:"No past trips found.",noTripsForDate:"No trips scheduled for this date.",createFirstTrip:"Create your first trip",whatsapp:"WhatsApp",share:"Share",copied:"Copied!",view:"View",edit:"Edit",delete:"Delete",deleting:"Deleting...",joinWhatsappGroup:"Join WhatsApp Group",linkCopied:"Link copied!",shareTripLink:"Share trip link",viewTripDetails:"View trip details",editTrip:"Edit trip",deleteTrip:"Delete trip",createNewTrip:"Create new trip",showAllTrips:"Show all trips",showCurrentTrips:"Show current trips",showOldTrips:"Show old trips",mercedesSprinterBlack:"Mercedes Sprinter Black (14 Seats)",mercedesSprinterWhite:"Mercedes Sprinter White (11 Seats)",toyotaHighlander:"Toyota Highlander (7 Seats)",driver:"Driver",calendar:"Calendar",createNewTripTitle:"Create New Trip",editTripTitle:"Edit Trip",addParticipant:"Add Participant",participantDetails:"Participant Details",tripTitle:"Trip Title",date:"Date",driverName:"Driver Name",vehicleType:"Vehicle Type",whatsappGroupLink:"WhatsApp Group Link (Optional)",whatsappGroupLinkHelp:"Add a WhatsApp group link for trip participants to join",firstName:"First Name",lastName:"Last Name",email:"Email",phoneNumber:"Phone Number",seatNumber:"Seat Number",selectSeat:"Select a seat",paymentMethod:"Payment Method",payWithCard:"Pay with Card",payWithCardDesc:"Pay now using credit/debit card",payOnTrip:"Pay on Trip",payOnTripDesc:"Pay cash/card on the day of the trip",markAsPaid:"Mark as Paid",markAsPaidDesc:"Check if participant has already paid",cancel:"Cancel",close:"Close",updateTrip:"Update Trip",updating:"Updating...",creating:"Creating...",addParticipantBtn:"Add Participant",adding:"Adding...",completeRegistration:"Complete Registration",submitting:"Submitting...",clearSignature:"Clear Signature",participants:"Participants",add:"Add",noRegistrations:"No registrations yet",name:"Name",phone:"Phone",seat:"Seat Number",paymentStatus:"Payment Status",paid:"Paid",notPaid:"Not Paid",registrationStatus:"Registration Status",complete:"Complete",registered:"Registered",signedAgreements:"Signed Agreements",cancellationPolicy:"Cancellation Policy",liabilityWaiver:"Liability Waiver",markAsNotPaid:"Mark as Not Paid",markAsPaidBtn:"Mark as Paid",selectYourSeat:"Select Your Seat",selectedSeat:"Selected Seat",vacant:"Vacant",occupied:"Occupied",selected:"Selected",noAvailableSeats:"No available seats",personalInformation:"Personal Information",digitalSignature:"Digital Signature",registrationSuccessful:"Registration Successful!",thankYouMessage:"Thank you for registering for",confirmationEmailMessage:"You will receive a confirmation email shortly with your signed waiver.",yourSeat:"Your Seat",loadingTripInfo:"Loading trip information...",tripNotFound:"Trip Not Found",tripNotFoundMessage:"This trip link may be invalid or expired.",tripId:"Trip ID",contactOrganizer:"If you believe this is an error, please contact the trip organizer.",cancellationPolicyTitle:"Cancellation Policy",waiverTitle:"Waiver of Liability",agreeToCancellationPolicy:"I have read and agree to the cancellation policy",agreeToWaiver:"I have read, understand, and agree to the waiver of liability",deleteConfirm:"Are you sure you want to delete this trip? This action cannot be undone.",failedToDelete:"Failed to delete trip. Please try again.",failedToUpdate:"Failed to update trip. Please try again.",failedToAdd:"Failed to add participant. Please try again.",failedToUpdatePayment:"Failed to update payment status",failedToSubmit:"Failed to submit registration. Please try again.",pleasSelectSeat:"Please select a seat",firstNameRequired:"First name is required",lastNameRequired:"Last name is required",emailRequired:"Email is required",emailInvalid:"Email is invalid",phoneRequired:"Phone number is required",seatRequired:"Please select a seat",cancellationPolicyRequired:"You must agree to the cancellation policy",waiverRequired:"You must sign the waiver",signatureRequired:"Signature is required",tripTitlePlaceholder:"e.g., Beach Trip, Museum Visit",driverNamePlaceholder:"e.g., John Smith",whatsappPlaceholder:"https://chat.whatsapp.com/...",copyForWhatsApp:"Copy for WhatsApp",sendToGroup:"Send to Group",copyAllParticipantDetails:"Copy all participant details for WhatsApp",sendToWhatsAppGroup:"Send to WhatsApp group",viewWeather:"View Weather",weather:"Weather",loadingWeather:"Loading weather...",tryAgain:"Try again",popularLocations:"Popular locations:",enterCityName:"Enter city name...",goButton:"Go",wind:"Wind",humidity:"Humidity",forecastDays:"5-Day Forecast",changeLocation:"Change location",loadingTrip:"Loading trip...",tripNotFoundTitle:"Trip not found",returnToDashboard:"Return to Dashboard",noRegistrationsYet:"No registrations yet",participantDetailsTitle:"Participant Details",cardPayment:"Card Payment",payOnTripMethod:"Pay on Trip",paymentMethodLabel:"Payment Method",seatNumberLabel:"Seat Number",status:"Status",planned:"Planned",scheduled:"Scheduled",done:"Done",giftCards:"Gift Cards",giftCardsDesc:"Create and manage gift cards for your trips",createGiftCard:"Create Gift Card",loadingGiftCards:"Loading gift cards...",noGiftCardsYet:"No gift cards created yet",noFilteredGiftCards:"gift cards found",createFirstGiftCard:"Create your first gift card",filterAll:"All",filterActive:"Active",filterViewed:"Viewed",filterUsed:"Used",filterRedeemed:"Redeemed",filterExpired:"Expired",statusFullyUsed:"Fully Used",statusPartiallyUsed:"Partially Used",statusExpired:"Expired",statusViewed:"Viewed",statusActive:"Active",expires:"Expires",from:"From",value:"value",remaining:"remaining",fullyUsedOn:"Fully used",usedTimes:"Used",time:"time",times:"times",viewedOn:"Viewed on",use:"Use",share:"Share",viewCard:"View",deleteGiftCard:"Delete",deleteConfirmGiftCard:"Are you sure you want to delete this gift card? This action cannot be undone.",failedToDeleteGiftCard:"Failed to delete gift card. Please try again.",on:"on"},ru:{dashboard:"  ",dashboardShort:"",IVRITours:"IVRI Tours",tripManagement:"  ",adminPortal:" ",logout:"",backToDashboard:"  ",tripsFor:" ",allTrips:" ",all:"",currentTrips:" ",current:"",oldTrips:" ",old:"",createTrip:" ",loadingTrips:" ...",noUpcomingTrips:"  .",noPastTrips:"   .",noTripsForDate:"    .",createFirstTrip:"   ",whatsapp:"WhatsApp",share:"",copied:"!",view:"",edit:"",delete:"",deleting:"...",joinWhatsappGroup:"   WhatsApp",linkCopied:" !",shareTripLink:"   ",viewTripDetails:"  ",editTrip:" ",deleteTrip:" ",createNewTrip:"  ",showAllTrips:"  ",showCurrentTrips:"  ",showOldTrips:"  ",mercedesSprinterBlack:"Mercedes Sprinter  (14 )",mercedesSprinterWhite:"Mercedes Sprinter  (11 )",toyotaHighlander:"Toyota Highlander (7 )",driver:"",calendar:"",createNewTripTitle:"  ",editTripTitle:" ",addParticipant:" ",participantDetails:" ",tripTitle:" ",date:"",driverName:" ",vehicleType:" ",whatsappGroupLink:"   WhatsApp ()",whatsappGroupLinkHelp:"    WhatsApp   ",firstName:"",lastName:"",email:" ",phoneNumber:" ",seatNumber:" ",selectSeat:" ",paymentMethod:" ",payWithCard:" ",payWithCardDesc:"  / ",payOnTrip:"  ",payOnTripDesc:" /   ",markAsPaid:"  ",markAsPaidDesc:",    ",cancel:"",close:"",updateTrip:" ",updating:"...",creating:"...",addParticipantBtn:" ",adding:"...",completeRegistration:" ",submitting:"...",clearSignature:" ",participants:"",add:"",noRegistrations:"  ",name:"",phone:"",seat:" ",paymentStatus:" ",paid:"",notPaid:" ",registrationStatus:" ",complete:"",registered:"",signedAgreements:" ",cancellationPolicy:" ",liabilityWaiver:"  ",markAsNotPaid:"   ",markAsPaidBtn:"  ",selectYourSeat:"  ",selectedSeat:" ",vacant:"",occupied:"",selected:"",noAvailableSeats:"  ",personalInformation:" ",digitalSignature:" ",registrationSuccessful:" !",thankYouMessage:"   ",confirmationEmailMessage:"         .",yourSeat:" ",loadingTripInfo:"   ...",tripNotFound:"  ",tripNotFoundMessage:"        .",tripId:"ID ",contactOrganizer:"  ,   , ,    .",cancellationPolicyTitle:" ",waiverTitle:"  ",agreeToCancellationPolicy:" ()  ()   ",agreeToWaiver:" (),   ()    ",deleteConfirm:" ,     ?    .",failedToDelete:"   . ,  .",failedToUpdate:"   . ,  .",failedToAdd:"   . ,  .",failedToUpdatePayment:"    ",failedToSubmit:"   . ,  .",pleasSelectSeat:",  ",firstNameRequired:" ",lastNameRequired:" ",emailRequired:"  ",emailInvalid:"   ",phoneRequired:"  ",seatRequired:",  ",cancellationPolicyRequired:"     ",waiverRequired:"     ",signatureRequired:" ",tripTitlePlaceholder:",   ,  ",driverNamePlaceholder:",  ",whatsappPlaceholder:"https://chat.whatsapp.com/...",copyForWhatsApp:"  WhatsApp",sendToGroup:"  ",copyAllParticipantDetails:"     WhatsApp",sendToWhatsAppGroup:"   WhatsApp",viewWeather:" ",weather:"",loadingWeather:" ...",tryAgain:" ",popularLocations:" :",enterCityName:"  ...",goButton:"",wind:"",humidity:"",forecastDays:"5- ",changeLocation:" ",loadingTrip:" ...",tripNotFoundTitle:"  ",returnToDashboard:"  ",noRegistrationsYet:"  ",participantDetailsTitle:" ",cardPayment:" ",payOnTripMethod:"  ",paymentMethodLabel:" ",seatNumberLabel:" ",status:"",planned:"",scheduled:"",done:"",giftCards:" ",giftCardsDesc:"       ",createGiftCard:" ",loadingGiftCards:"  ...",noGiftCardsYet:"   ",noFilteredGiftCards:"   ",createFirstGiftCard:"    ",filterAll:"",filterActive:"",filterViewed:"",filterUsed:"",filterRedeemed:" ",filterExpired:"",statusFullyUsed:" ",statusPartiallyUsed:" ",statusExpired:"",statusViewed:"",statusActive:"",expires:"",from:"",value:"",remaining:"",fullyUsedOn:" ",usedTimes:"",time:"",times:"",viewedOn:"",use:"",share:"",viewCard:"",deleteGiftCard:"",deleteConfirmGiftCard:" ,      ?    .",failedToDeleteGiftCard:"    . ,  .",on:""}},CB=({participant:t,onClose:e,onUpdate:n})=>{const{language:r}=sa(),a=ll[r],[i,s]=R.useState(!1),[o,u]=R.useState({firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone}),[d,h]=R.useState(!1),[f,p]=R.useState(!1),y=async()=>{h(!0);try{await rf(t.id,o),s(!1),n()}catch(A){console.error("Error updating participant:",A),alert("Failed to update participant. Please try again.")}finally{h(!1)}},w=async()=>{h(!0);try{await rf(t.id,{paid:!t.paid}),n()}catch(A){console.error("Error updating payment status:",A),alert(a.failedToUpdatePayment)}finally{h(!1)}},N=async()=>{if(confirm("Are you sure you want to delete this participant? This action cannot be undone.")){p(!0);try{await QR(t.id),e(),n()}catch(A){console.error("Error deleting participant:",A),alert("Failed to delete participant. Please try again.")}finally{p(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",onClick:e,children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto border-4",onClick:A=>A.stopPropagation(),style:{borderColor:P.primary.teal},children:[l.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white px-6 py-4 rounded-t-xl flex justify-between items-center sticky top-0 z-10",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:"Participant Details"}),l.jsxs("p",{className:"text-sm text-teal-100",children:["Seat ",t.seatNumber]})]}),l.jsx("button",{onClick:e,className:"hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:l.jsx(hs,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"p-6 space-y-4",children:i?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),l.jsx("input",{type:"text",value:o.firstName,onChange:A=>u({...o,firstName:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),l.jsx("input",{type:"text",value:o.lastName,onChange:A=>u({...o,lastName:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:o.email,onChange:A=>u({...o,email:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),l.jsx("input",{type:"tel",value:o.phone,onChange:A=>u({...o,phone:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent"})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{onClick:y,disabled:d,style:{backgroundColor:P.success},className:"flex-1 px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity font-medium disabled:opacity-50",children:d?"Saving...":"Save"}),l.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Name"}),l.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[t.firstName," ",t.lastName]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email"}),l.jsx("p",{className:"text-sm text-gray-900",children:t.email})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:a.phone}),l.jsx("p",{className:"text-sm text-gray-900",children:t.phone})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Seat Number"}),l.jsxs("p",{className:"text-sm text-gray-900",children:["Seat ",t.seatNumber]})]}),t.isMultiSeat&&t.seatCount&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Multi-Seat Booking:"})," This person has booked ",t.seatCount," seats"]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:a.paymentMethod}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.paymentMethod==="card"?l.jsxs(l.Fragment,{children:[l.jsx(Rf,{className:"w-4 h-4 text-blue-600"}),l.jsx("span",{className:"text-sm text-gray-900",children:a.payWithCard})]}):l.jsxs(l.Fragment,{children:[l.jsx(_N,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"text-sm text-gray-900",children:a.payOnTrip})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:a.paymentStatus}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.paid?l.jsxs(l.Fragment,{children:[l.jsx(Vr,{className:"w-5 h-5 text-green-500"}),l.jsx("span",{className:"text-sm font-semibold text-green-700",children:a.paid})]}):l.jsxs(l.Fragment,{children:[l.jsx(ty,{className:"w-5 h-5 text-red-500"}),l.jsx("span",{className:"text-sm font-semibold text-red-700",children:a.notPaid})]})})]}),t.registrationDate&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:a.registered}),l.jsx("p",{className:"text-sm text-gray-900",children:new Date(t.registrationDate).toLocaleDateString()})]}),(t.agreedToCancellationPolicy||t.agreedToWaiver)&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:a.signedAgreements}),l.jsxs("div",{className:"space-y-1 mt-1",children:[t.agreedToCancellationPolicy&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vr,{className:"w-3 h-3 text-green-500"}),l.jsx("span",{className:"text-xs text-gray-700",children:a.cancellationPolicy})]}),t.agreedToWaiver&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vr,{className:"w-3 h-3 text-green-500"}),l.jsx("span",{className:"text-xs text-gray-700",children:a.liabilityWaiver})]})]})]}),l.jsxs("div",{className:"space-y-2 pt-2",children:[l.jsx("button",{onClick:w,disabled:d,style:{backgroundColor:t.paid?P.button.danger:P.success},className:"w-full px-4 py-3 text-white rounded-lg hover:opacity-90 transition-opacity font-medium disabled:opacity-50",children:d?"Updating...":t.paid?a.markAsNotPaid:a.markAsPaidBtn}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>s(!0),style:{backgroundColor:P.primary.teal},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 text-white rounded-lg hover:opacity-90 transition-opacity font-medium",children:[l.jsx(EN,{className:"w-4 h-4"}),l.jsx("span",{children:"Edit"})]}),l.jsxs("button",{onClick:N,disabled:f,style:{backgroundColor:P.button.danger},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 text-white rounded-lg hover:opacity-90 transition-opacity font-medium disabled:opacity-50",children:[l.jsx(Df,{className:"w-4 h-4"}),l.jsx("span",{children:f?"Deleting...":"Delete"})]})]})]})]})})]})})},RB=({tripId:t,onClose:e})=>{var ee;const{language:n}=sa(),r=ll[n],[a,i]=R.useState(null),[s,o]=R.useState([]),[u,d]=R.useState(!0),[h,f]=R.useState(!1),[p,y]=R.useState(null),[w,N]=R.useState(null),[A,_]=R.useState(null),[x,E]=R.useState({}),[I,V]=R.useState(null),[q,S]=R.useState(!1),[v,b]=R.useState(null);R.useEffect(()=>{C();const z=O();return()=>z&&z()},[t]);const C=async()=>{try{const z=await WR(t);i(z)}catch(z){console.error("Error loading trip:",z)}finally{d(!1)}},O=()=>{const z=om(la(Et,"registrations"),a_("tripId","==",t));return $C(z,ue=>{const me=ue.docs.map(Tt=>({id:Tt.id,...Tt.data()}));o(me)})},j=()=>{var ue;if(!a||s.length===0)return"";let z=` *${a.title}*
`;return z+=` Date: ${(ue=a.date)==null?void 0:ue.toDate().toLocaleDateString()}
`,a.driverName&&(z+=` Driver: ${a.driverName}
`),z+=`
 *Participants (${s.length})*
`,z+=`${"=".repeat(40)}

`,[...s].sort((me,Tt)=>me.seatNumber-Tt.seatNumber).forEach((me,Tt)=>{z+=`${Tt+1}. *${me.firstName} ${me.lastName}*
`,z+=`    Seat: ${me.seatNumber}
`,z+=`    ${me.email}
`,z+=`    ${me.phone}
`,z+=`    ${me.paid?" Paid":" Not Paid"}
`,z+=`
`}),z+=`${"=".repeat(40)}
`,z+=` Total Participants: ${s.length}
`,z+=` Paid: ${s.filter(me=>me.paid).length}
`,z+=` Pending: ${s.filter(me=>!me.paid).length}
`,z},D=()=>{const z=j();z&&navigator.clipboard.writeText(z).then(()=>{S(!0),setTimeout(()=>S(!1),2e3)}).catch(J=>{console.error("Failed to copy:",J),alert("Failed to copy to clipboard")})},ie=()=>{const z=j();if(z)if(a.whatsappGroupLink){const J=encodeURIComponent(z);window.open(`${a.whatsappGroupLink}?text=${J}`,"_blank")}else{const J=encodeURIComponent(z);window.open(`https://wa.me/?text=${J}`,"_blank")}},Y=async(z,J)=>{try{await rf(z,{paid:!J})}catch(ue){console.error("Error updating payment status:",ue),alert(r.failedToUpdatePayment)}},k=async z=>{if(confirm("Are you sure you want to delete this participant? This action cannot be undone.")){V(z);try{await QR(z),N(null)}catch(J){console.error("Error deleting participant:",J),alert("Failed to delete participant. Please try again.")}finally{V(null)}}},U=z=>{_(z.id),E({firstName:z.firstName,lastName:z.lastName,email:z.email,phone:z.phone})},H=async z=>{try{await rf(z,x),_(null),E({})}catch(J){console.error("Error updating participant:",J),alert("Failed to update participant. Please try again.")}},G=()=>{_(null),E({})};if(u)return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-15 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e,children:l.jsx("div",{className:"bg-white rounded-lg p-8",children:l.jsx("div",{className:"text-lg",children:r.loadingTripInfo})})});if(!a)return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-15 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e,children:l.jsxs("div",{className:"bg-white rounded-lg p-8 text-center",children:[l.jsx("p",{className:"text-lg text-gray-600 mb-4",children:r.tripNotFound}),l.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:r.close})]})});const K=[...s].sort((z,J)=>z.seatNumber-J.seatNumber);return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-15 backdrop-blur-sm flex items-center justify-center p-2 sm:p-4 z-50",onClick:e,children:[l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-7xl max-h-[95vh] overflow-hidden border-4 border-teal-400",onClick:z=>z.stopPropagation(),style:{borderColor:P.primary.teal},children:[l.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white px-4 sm:px-6 py-4 flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold truncate",children:a.title}),l.jsx("p",{className:"text-sm text-teal-100",children:(ee=a.date)==null?void 0:ee.toDate().toLocaleDateString()})]}),l.jsx("button",{onClick:e,className:"flex-shrink-0 ml-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",title:r.close,children:l.jsx(hs,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"overflow-y-auto max-h-[calc(95vh-80px)] p-4 sm:p-6",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsx(JR,{vehicleType:a.vehicleLayout,registrations:s,driverName:a.driverName,onSeatClick:(z,J)=>{J?b(J):(y(z),f(!0))}})}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-gray-50 rounded-lg shadow-lg p-4 sm:p-6 border-2 border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(cv,{className:"w-5 h-5",style:{color:P.primary.teal}}),l.jsxs("h3",{className:"text-lg sm:text-xl font-bold",style:{color:P.primary.black},children:[r.participants," (",s.length,")"]})]}),l.jsxs("button",{onClick:()=>f(!0),style:{backgroundColor:P.primary.teal},className:"flex items-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",title:r.addParticipant,children:[l.jsx(SN,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden sm:inline",children:r.add})]})]}),s.length>0&&l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("button",{onClick:D,style:{backgroundColor:q?P.success:"#25D366"},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 text-white rounded-lg hover:opacity-90 transition-all font-medium",title:r.copyAllParticipantDetails,children:q?l.jsxs(l.Fragment,{children:[l.jsx(Cf,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden sm:inline",children:r.copied})]}):l.jsxs(l.Fragment,{children:[l.jsx(ov,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden sm:inline",children:r.copyForWhatsApp})]})}),l.jsxs("button",{onClick:ie,style:{backgroundColor:"#25D366"},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 text-white rounded-lg hover:opacity-90 transition-all font-medium",title:r.sendToWhatsAppGroup,children:[l.jsx(lv,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden sm:inline",children:r.sendToGroup})]})]}),s.length===0?l.jsx("p",{className:"text-gray-500 text-center py-8",children:r.noRegistrations}):l.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:K.map(z=>l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[l.jsxs("div",{onClick:()=>N(w===z.id?null:z.id),className:"flex items-center gap-3 p-3 hover:bg-gray-50 transition-colors cursor-pointer",children:[l.jsx("div",{className:"flex-shrink-0 w-8 h-8 text-white rounded-full flex items-center justify-center font-bold text-sm",style:{backgroundColor:P.seat.occupied},children:z.seatNumber}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"font-semibold text-gray-900 truncate",children:[z.firstName," ",z.lastName]}),l.jsx("p",{className:"text-sm text-gray-600 truncate",children:z.email})]}),l.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[z.paid?l.jsx(Vr,{className:"w-5 h-5 text-green-500",title:r.paid}):l.jsx(ty,{className:"w-5 h-5 text-red-500",title:r.notPaid}),w===z.id?l.jsx(U4,{className:"w-5 h-5 text-gray-400"}):l.jsx(L4,{className:"w-5 h-5 text-gray-400"})]})]}),w===z.id&&l.jsx("div",{className:"px-3 pb-3 border-t border-gray-200",children:A===z.id?l.jsxs("div",{className:"space-y-3 pt-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:"First Name"}),l.jsx("input",{type:"text",value:x.firstName,onChange:J=>E({...x,firstName:J.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Last Name"}),l.jsx("input",{type:"text",value:x.lastName,onChange:J=>E({...x,lastName:J.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Email"}),l.jsx("input",{type:"email",value:x.email,onChange:J=>E({...x,email:J.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:"Phone"}),l.jsx("input",{type:"tel",value:x.phone,onChange:J=>E({...x,phone:J.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded"})]}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{onClick:()=>H(z.id),style:{backgroundColor:P.success},className:"flex-1 px-3 py-2 text-white text-sm rounded-lg hover:opacity-90 transition-opacity font-medium",children:"Save"}),l.jsx("button",{onClick:G,className:"flex-1 px-3 py-2 bg-gray-300 text-gray-700 text-sm rounded-lg hover:bg-gray-400 transition-colors font-medium",children:"Cancel"})]})]}):l.jsxs("div",{className:"space-y-3 pt-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:r.phone}),l.jsx("p",{className:"text-sm text-gray-900",children:z.phone})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:r.paymentMethod}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:z.paymentMethod==="card"?l.jsxs(l.Fragment,{children:[l.jsx(Rf,{className:"w-4 h-4 text-blue-600"}),l.jsx("span",{className:"text-sm text-gray-900",children:r.payWithCard})]}):l.jsxs(l.Fragment,{children:[l.jsx(_N,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"text-sm text-gray-900",children:r.payOnTrip})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:r.paymentStatus}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[z.paid?l.jsx(Vr,{className:"w-4 h-4 text-green-500"}):l.jsx(ty,{className:"w-4 h-4 text-red-500"}),l.jsx("span",{className:"text-sm text-gray-900 font-semibold",children:z.paid?r.paid:r.notPaid})]})]}),z.registrationDate&&l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:r.registered}),l.jsx("p",{className:"text-sm text-gray-900",children:new Date(z.registrationDate).toLocaleDateString()})]}),(z.agreedToCancellationPolicy||z.agreedToWaiver)&&l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-medium text-gray-500",children:r.signedAgreements}),l.jsxs("div",{className:"space-y-1 mt-1",children:[z.agreedToCancellationPolicy&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vr,{className:"w-3 h-3 text-green-500"}),l.jsx("span",{className:"text-xs text-gray-700",children:r.cancellationPolicy})]}),z.agreedToWaiver&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vr,{className:"w-3 h-3 text-green-500"}),l.jsx("span",{className:"text-xs text-gray-700",children:r.liabilityWaiver})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:J=>{J.stopPropagation(),Y(z.id,z.paid)},style:{backgroundColor:z.paid?P.button.danger:P.success},className:"w-full px-3 py-2 text-white text-sm rounded-lg hover:opacity-90 transition-opacity font-medium",children:z.paid?r.markAsNotPaid:r.markAsPaidBtn}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:J=>{J.stopPropagation(),U(z)},style:{backgroundColor:P.primary.teal},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white text-sm rounded-lg hover:opacity-90 transition-opacity font-medium",children:[l.jsx(EN,{className:"w-4 h-4"}),l.jsx("span",{children:"Edit"})]}),l.jsxs("button",{onClick:J=>{J.stopPropagation(),k(z.id)},disabled:I===z.id,style:{backgroundColor:P.button.danger},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white text-sm rounded-lg hover:opacity-90 transition-opacity font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Df,{className:"w-4 h-4"}),l.jsx("span",{children:I===z.id?"Deleting...":"Delete"})]})]})]})]})})]},z.id))})]})})]})})]}),h&&l.jsx(AB,{trip:a,registrations:s,preselectedSeat:p,onClose:()=>{f(!1),y(null)},onSuccess:()=>{f(!1),y(null)}}),v&&l.jsx(CB,{participant:v,onClose:()=>b(null),onUpdate:()=>{b(null)}})]})},OE=({className:t="",size:e="md"})=>{const n={xs:{width:"50px",fontSize:"10px",subSize:"7px"},sm:{width:"80px",fontSize:"14px",subSize:"10px"},md:{width:"120px",fontSize:"20px",subSize:"12px"},lg:{width:"160px",fontSize:"28px",subSize:"16px"}},r=n[e]||n.md;return l.jsx("div",{className:`flex items-center gap-3 ${t}`,children:l.jsx("div",{style:{backgroundColor:P.primary.teal,width:r.width,aspectRatio:"1",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 188, 212, 0.3)"},children:l.jsxs("div",{style:{textAlign:"center",color:P.primary.white},children:[l.jsx("div",{style:{fontSize:r.fontSize,fontWeight:"bold",letterSpacing:"2px",lineHeight:"1"},children:"IVRI"}),l.jsx("div",{style:{fontSize:r.subSize,letterSpacing:"1px",marginTop:"4px",opacity:.9},children:"TOURS"})]})})})},DB=()=>{const{language:t,setLanguage:e}=sa(),n=[{code:"en",flag:"",name:"English (CA)"},{code:"ru",flag:"",name:""}];return l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("select",{value:t,onChange:r=>e(r.target.value),className:"sm:hidden px-2 py-1.5 border border-gray-300 rounded-lg text-lg focus:ring-2 focus:border-transparent bg-white cursor-pointer hover:bg-gray-50 transition-colors",style:{focusRing:P.primary.teal},children:n.map(r=>l.jsx("option",{value:r.code,children:r.flag},r.code))}),l.jsx("select",{value:t,onChange:r=>e(r.target.value),className:"hidden sm:block px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:border-transparent bg-white cursor-pointer hover:bg-gray-50 transition-colors",style:{focusRing:P.primary.teal},children:n.map(r=>l.jsxs("option",{value:r.code,children:[r.flag," ",r.name]},r.code))})]})})},IB=({compact:t=!1})=>{const{language:e}=sa(),n=ll[e],[r,a]=R.useState("New York"),[i,s]=R.useState(""),[o,u]=R.useState(null),[d,h]=R.useState([]),[f,p]=R.useState(!1),[y,w]=R.useState(null),[N,A]=R.useState(!1),[_,x]=R.useState(!1),E=["Toronto","Ottawa","Barrie","Montreal","mont-tremblant","Chicago","New York","Miami","Boston"];R.useEffect(()=>{I(r)},[r]);const I=async b=>{p(!0),w(null);try{const O=await(await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(b)}&count=1&language=en&format=json`)).json();if(!O.results||O.results.length===0){w("Location not found"),p(!1);return}const{latitude:j,longitude:D,name:ie,country:Y}=O.results[0],U=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${j}&longitude=${D}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min&temperature_unit=celsius&wind_speed_unit=mph&timezone=auto&forecast_days=5`)).json();u({city:ie,country:Y,temperature:Math.round(U.current.temperature_2m),humidity:U.current.relative_humidity_2m,windSpeed:Math.round(U.current.wind_speed_10m),weatherCode:U.current.weather_code});const H=U.daily.time.map((G,K)=>({date:new Date(G).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),maxTemp:Math.round(U.daily.temperature_2m_max[K]),minTemp:Math.round(U.daily.temperature_2m_min[K]),weatherCode:U.daily.weather_code[K]}));h(H)}catch(C){console.error("Error fetching weather:",C),w("Failed to load weather data")}finally{p(!1)}},V=b=>{a(b),A(!1),s("")},q=b=>{b.preventDefault(),i.trim()&&V(i.trim())},S=b=>b===0||b===1?l.jsx(SM,{className:"w-8 h-8",style:{color:"#FCD34D"}}):b===2||b===3?l.jsx(Hl,{className:"w-8 h-8",style:{color:"#9CA3AF"}}):b>=51&&b<=67?l.jsx(dd,{className:"w-8 h-8",style:{color:"#60A5FA"}}):b>=71&&b<=77?l.jsx(Y4,{className:"w-8 h-8",style:{color:"#93C5FD"}}):b>=80?l.jsx(dd,{className:"w-8 h-8",style:{color:"#3B82F6"}}):l.jsx(Hl,{className:"w-8 h-8",style:{color:"#9CA3AF"}}),v=b=>b===0?"Clear sky":b===1?"Mainly clear":b===2?"Partly cloudy":b===3?"Overcast":b>=51&&b<=67?"Rainy":b>=71&&b<=77?"Snowy":b>=80?"Rain showers":"Cloudy";return t?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>x(!0),className:"bg-white rounded-full shadow-lg p-3 hover:shadow-xl transition-all",title:n.viewWeather,children:o&&!f&&!y?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"scale-75",children:S(o.weatherCode)}),l.jsxs("div",{className:"text-sm font-bold text-gray-900",children:[o.temperature,"C"]})]}):l.jsx(Hl,{className:"w-6 h-6",style:{color:P.primary.teal}})}),_&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-end p-4 animate-fadeIn",onClick:()=>x(!1),children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm mt-16 mr-0 animate-slideInRight",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[l.jsx(Hl,{className:"w-5 h-5",style:{color:P.primary.teal}}),n.weather]}),l.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx("span",{className:"text-2xl text-gray-600",children:""})})]}),l.jsxs("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:[f&&l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500 text-sm",children:n.loadingWeather})}),y&&!f&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-red-500 text-sm",children:y}),l.jsx("button",{onClick:()=>I(r),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm",children:n.tryAgain})]}),o&&!f&&!y&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ny,{className:"w-4 h-4",style:{color:P.primary.teal}}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o.city,", ",o.country]})]}),l.jsx("button",{onClick:()=>A(!N),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Change location",children:l.jsx(wx,{className:"w-4 h-4 text-gray-600"})})]}),N&&l.jsxs("div",{className:"mb-4 space-y-3",children:[l.jsxs("form",{onSubmit:q,className:"flex gap-2",children:[l.jsx("input",{type:"text",value:i,onChange:b=>s(b.target.value),placeholder:"Enter city name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),l.jsx("button",{type:"submit",style:{backgroundColor:P.primary.teal},className:"px-4 py-2 text-white rounded-lg text-sm",children:"Go"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Popular locations:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(b=>l.jsx("button",{onClick:()=>V(b),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-xs text-gray-700",children:b},b))})]})]}),l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-4xl font-bold text-gray-900",children:[o.temperature,"C"]}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v(o.weatherCode)})]}),l.jsx("div",{children:S(o.weatherCode)})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Tx,{className:"w-4 h-4 text-gray-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Wind"}),l.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[o.windSpeed," mph"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(dd,{className:"w-4 h-4 text-gray-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Humidity"}),l.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[o.humidity,"%"]})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"5-Day Forecast"}),l.jsx("div",{className:"space-y-2",children:d.map((b,C)=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"scale-75",children:S(b.weatherCode)}),l.jsx("span",{className:"text-xs text-gray-700",children:b.date})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[b.maxTemp,""]}),l.jsxs("span",{className:"text-sm text-gray-500",children:[b.minTemp,""]})]})]},C))})]})]})]})]})}),l.jsx("style",{jsx:!0,children:`
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes slideInRight {
            from {
              transform: translateX(100%);
              opacity: 0;
            }
            to {
              transform: translateX(0);
              opacity: 1;
            }
          }
          .animate-fadeIn {
            animation: fadeIn 0.2s ease-out;
          }
          .animate-slideInRight {
            animation: slideInRight 0.3s ease-out;
          }
        `})]}):l.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[l.jsx(Hl,{className:"w-5 h-5",style:{color:P.primary.teal}}),"Weather"]}),l.jsx("button",{onClick:()=>A(!N),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Change location",children:l.jsx(wx,{className:"w-5 h-5 text-gray-600"})})]}),N&&l.jsxs("div",{className:"mb-4 space-y-3",children:[l.jsxs("form",{onSubmit:q,className:"flex gap-2",children:[l.jsx("input",{type:"text",value:i,onChange:b=>s(b.target.value),placeholder:"Enter city name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),l.jsx("button",{type:"submit",style:{backgroundColor:P.primary.teal},className:"px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",children:"Search"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Popular locations:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(b=>l.jsx("button",{onClick:()=>V(b),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-xs text-gray-700 transition-colors",children:b},b))})]})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(ny,{className:"w-4 h-4",style:{color:P.primary.teal}}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:o?`${o.city}, ${o.country}`:r})]}),f&&l.jsx("div",{className:"text-center py-8",children:l.jsx("div",{className:"text-gray-500 text-sm",children:"Loading weather..."})}),y&&!f&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-red-500 text-sm",children:y}),l.jsx("button",{onClick:()=>I(r),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm",children:"Try again"})]}),o&&!f&&!y&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-4xl font-bold text-gray-900",children:[o.temperature,"C"]}),l.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v(o.weatherCode)})]}),l.jsx("div",{children:S(o.weatherCode)})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Tx,{className:"w-4 h-4 text-gray-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Wind"}),l.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[o.windSpeed," mph"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(dd,{className:"w-4 h-4 text-gray-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Humidity"}),l.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[o.humidity,"%"]})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"5-Day Forecast"}),l.jsx("div",{className:"space-y-2",children:d.map((b,C)=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"scale-75",children:S(b.weatherCode)}),l.jsx("span",{className:"text-xs text-gray-700",children:b.date})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[b.maxTemp,""]}),l.jsxs("span",{className:"text-sm text-gray-500",children:[b.minTemp,""]})]})]},C))})]})]})]})},vm=({showBackButton:t=!1,title:e="",subtitle:n="",showLogout:r=!0})=>{const a=ds(),i=ia(),{language:s}=sa(),o=ll[s],u=async()=>{try{await dU(S_),a("/login")}catch(y){console.error("Error logging out:",y)}},d=()=>{a("/admin")},h=i.pathname==="/admin",f=i.pathname==="/gift-cards",p=i.pathname.includes("/register/");return l.jsx("div",{className:"bg-white shadow",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:l.jsxs("div",{className:"flex justify-between items-center gap-2 sm:gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[t&&l.jsx("button",{onClick:d,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0",title:o.backToDashboard,children:l.jsx(bx,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>a("/admin"),className:"hidden sm:block hover:opacity-80 transition-opacity",title:"Go to Admin Dashboard",children:l.jsx(OE,{size:"md"})}),l.jsx("button",{onClick:()=>a("/admin"),className:"sm:hidden hover:opacity-80 transition-opacity",title:"Go to Admin Dashboard",children:l.jsx(OE,{size:"xs"})}),l.jsx("div",{className:"min-w-0 flex-1",children:h?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(IB,{compact:!0}),l.jsx("a",{href:"https://wa.me/14155238886",target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-full shadow-lg p-2 hover:shadow-xl transition-all hover:scale-105 ml-2",title:"WhatsApp Assistant - Get trip info, check participants, and more!",style:{backgroundColor:"#25D366"},children:l.jsx(lv,{className:"w-5 h-5 text-white"})}),l.jsx("p",{className:"hidden sm:block text-sm text-gray-500",children:o.IVRITours})]})}):e?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-sm sm:text-2xl font-bold text-gray-900 truncate",children:e}),n&&l.jsx("p",{className:"hidden sm:block text-sm text-gray-600",children:n})]}):l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-sm sm:text-2xl font-bold text-gray-900 truncate",children:o.IVRITours}),l.jsx("p",{className:"hidden sm:block text-sm text-gray-500 mt-1",children:o.tripManagement})]})})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx(DB,{}),!p&&l.jsxs(l.Fragment,{children:[h&&l.jsxs("button",{onClick:()=>a("/gift-cards"),className:"flex items-center gap-2 px-3 sm:px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors",style:{color:P.primary.teal},title:"Gift Cards",children:[l.jsx(Yn,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Gift Cards"})]}),f&&l.jsxs("button",{onClick:()=>a("/admin"),className:"flex items-center gap-2 px-3 sm:px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors",style:{color:P.primary.teal},title:"Dashboard",children:[l.jsx(bx,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]})]}),r&&!p&&l.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-3 sm:px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:o.logout,children:[l.jsx(dM,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:o.logout})]})]})]})})})},OB=()=>{const{language:t}=sa(),e=ll[t],[n,r]=R.useState(new Date),[a,i]=R.useState([]),[s,o]=R.useState(!1),[u,d]=R.useState(null),[h,f]=R.useState(!1),[p,y]=R.useState("upcoming"),[w,N]=R.useState("all"),[A,_]=R.useState(null),[x,E]=R.useState(null),[I,V]=R.useState(null);R.useEffect(()=>{q()},[n,p]);const q=async()=>{f(!0);try{const Y=await wB();await S(Y),i(Y)}catch(Y){console.error("Error loading trips:",Y)}finally{f(!1)}},S=async Y=>{var U,H,G,K;const k=new Date;k.setHours(0,0,0,0);for(const ee of Y){let z=!1,J=ee.status||"planned";const ue=((H=(U=ee.endDate)==null?void 0:U.toDate)==null?void 0:H.call(U))||((K=(G=ee.date)==null?void 0:G.toDate)==null?void 0:K.call(G))||new Date(ee.date);if(ue.setHours(0,0,0,0),ue<k&&J!=="done")J="done",z=!0;else if(ue>=k)try{const me=la(Et,"registrations"),Tt=om(me,a_("tripId","==",ee.id));(await l_(Tt)).size>=3&&J==="planned"&&(J="scheduled",z=!0)}catch(me){console.error("Error checking participants for trip:",ee.id,me)}if(z)try{await DE(ee.id,{status:J}),ee.status=J}catch(me){console.error("Error updating trip status:",ee.id,me)}}},v=async Y=>{try{await xB(Y),o(!1),q()}catch(k){console.error("Error creating trip:",k)}},b=Y=>{const k=`${window.location.origin}/PlanYourTripNow/register/${Y}`;navigator.clipboard.writeText(k),d(Y),setTimeout(()=>d(null),2e3)},C=async Y=>{if(confirm(e.deleteConfirm)){_(Y);try{await EB(Y),q()}catch(k){console.error("Error deleting trip:",k),alert(e.failedToDelete)}finally{_(null)}}},O=async(Y,k)=>{try{await DE(Y,k),E(null),q()}catch(U){console.error("Error updating trip:",U),alert(e.failedToUpdate)}},D=(()=>{const Y=new Date;Y.setHours(0,0,0,0);let k=a;return p==="date"?k=a.filter(U=>{var ee,z,J,ue;const H=((z=(ee=U.date)==null?void 0:ee.toDate)==null?void 0:z.call(ee))||new Date(U.date);H.setHours(0,0,0,0);const G=(ue=(J=U.endDate)==null?void 0:J.toDate)!=null&&ue.call(J)?new Date(U.endDate.toDate()):new Date(H);G.setHours(0,0,0,0);const K=new Date(n);return K.setHours(0,0,0,0),K>=H&&K<=G}):p==="upcoming"?k=a.filter(U=>{var G,K;const H=((K=(G=U.date)==null?void 0:G.toDate)==null?void 0:K.call(G))||new Date(U.date);return H.setHours(0,0,0,0),H>=Y}):p==="past"&&(k=a.filter(U=>{var G,K;const H=((K=(G=U.date)==null?void 0:G.toDate)==null?void 0:K.call(G))||new Date(U.date);return H.setHours(0,0,0,0),H<Y})),w!=="all"&&(k=k.filter(U=>(U.status||"planned")===w)),k})(),ie=Y=>{switch(Y||"planned"){case"planned":return{bg:"#FEF3C7",text:"#92400E",label:"Planned"};case"scheduled":return{bg:"#E9D5FF",text:"#6B21A8",label:"Scheduled"};case"done":return{bg:"#D1FAE5",text:"#065F46",label:"Done"};default:return{bg:"#FEF3C7",text:"#92400E",label:"Planned"}}};return l.jsxs("div",{className:"min-h-screen bg-gray-100",children:[l.jsx(vm,{}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[l.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-2",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:p==="date"?`${e.tripsOn||"Trips on"} ${n.toLocaleDateString()}`:p==="all"?e.allTrips:p==="upcoming"?e.currentTrips:e.oldTrips})]}),l.jsxs("button",{onClick:()=>o(!0),style:{backgroundColor:P.primary.teal},className:"flex items-center gap-2 px-3 sm:px-4 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm sm:text-base whitespace-nowrap",title:e.createNewTrip,children:[l.jsx(TN,{className:"w-4 h-4 sm:w-5 sm:h-5"}),l.jsx("span",{className:"hidden sm:inline",children:e.createTrip}),l.jsx("span",{className:"sm:hidden",children:"New"})]})]}),l.jsxs("div",{className:"flex gap-2 mt-3 flex-wrap overflow-x-auto",children:[l.jsxs("button",{onClick:()=>y("all"),className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${p==="all"?"text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,style:p==="all"?{backgroundColor:P.primary.teal}:{},title:e.showAllTrips,children:[l.jsx(Pa,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:e.allTrips}),l.jsx("span",{className:"sm:hidden",children:"All"})]}),l.jsxs("button",{onClick:()=>y("upcoming"),className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${p==="upcoming"?"text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,style:p==="upcoming"?{backgroundColor:P.primary.teal}:{},title:e.showCurrentTrips,children:[l.jsx(Pa,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:e.currentTrips}),l.jsx("span",{className:"sm:hidden",children:"Upcoming"})]}),l.jsxs("button",{onClick:()=>y("past"),className:`flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ${p==="past"?"text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,style:p==="past"?{backgroundColor:P.primary.teal}:{},title:e.showOldTrips,children:[l.jsx(I4,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"hidden sm:inline",children:e.oldTrips}),l.jsx("span",{className:"sm:hidden",children:"Past"})]})]}),l.jsxs("div",{className:"flex gap-2 mt-3 flex-wrap overflow-x-auto",children:[l.jsxs("button",{onClick:()=>N("all"),className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${w==="all"?"text-white":"text-gray-700 hover:opacity-100"}`,style:w==="all"?{backgroundColor:P.primary.teal}:{backgroundColor:P.primary.teal,opacity:.3},title:"Show all statuses",children:[l.jsx(Pa,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"sm:hidden",children:"A"}),l.jsx("span",{className:"hidden sm:inline",children:"All Status"})]}),l.jsxs("button",{onClick:()=>N("planned"),className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${w==="planned"?"text-white":"text-gray-700 hover:opacity-100"}`,style:w==="planned"?{backgroundColor:"#92400E"}:{backgroundColor:"#FEF3C7",color:"#92400E"},title:"Show planned trips",children:[l.jsx(bN,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"sm:hidden",children:"P"}),l.jsx("span",{className:"hidden sm:inline",children:"Planned"})]}),l.jsxs("button",{onClick:()=>N("scheduled"),className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${w==="scheduled"?"text-white":"text-gray-700 hover:opacity-100"}`,style:w==="scheduled"?{backgroundColor:"#6B21A8"}:{backgroundColor:"#E9D5FF",color:"#6B21A8"},title:"Show scheduled trips",children:[l.jsx(Pa,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"sm:hidden",children:"S"}),l.jsx("span",{className:"hidden sm:inline",children:"Scheduled"})]}),l.jsxs("button",{onClick:()=>N("done"),className:`flex items-center gap-1 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${w==="done"?"text-white":"text-gray-700 hover:opacity-100"}`,style:w==="done"?{backgroundColor:"#065F46"}:{backgroundColor:"#D1FAE5",color:"#065F46"},title:"Show completed trips",children:[l.jsx(Vr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),l.jsx("span",{className:"sm:hidden",children:"D"}),l.jsx("span",{className:"hidden sm:inline",children:"Done"})]})]})]})}),h?l.jsx("div",{className:"text-center py-12",children:l.jsx("div",{className:"text-gray-500",children:e.loadingTrips})}):D.length===0?l.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[l.jsxs("p",{className:"text-gray-500",children:[p==="upcoming"&&e.noUpcomingTrips,p==="past"&&e.noPastTrips,p==="all"&&"No trips found"]}),l.jsx("button",{onClick:()=>o(!0),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:e.createFirstTrip})]}):l.jsx("div",{className:"space-y-3",children:D.map(Y=>l.jsx("div",{onClick:()=>V(Y.id),className:"bg-white rounded-lg shadow p-4 hover:shadow-md transition-shadow cursor-pointer",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h3",{className:"text-sm sm:text-lg font-semibold text-gray-900",children:Y.title}),l.jsx("span",{className:"px-2 py-1 rounded-full text-[10px] sm:text-xs font-semibold",style:{backgroundColor:ie(Y.status).bg,color:ie(Y.status).text},children:ie(Y.status).label})]}),l.jsxs("p",{className:"text-[10px] sm:text-sm text-gray-600 mt-1",children:[(()=>{var G,K,ee,z;const k=((K=(G=Y.date)==null?void 0:G.toDate)==null?void 0:K.call(G))||new Date(Y.date),U=(z=(ee=Y.endDate)==null?void 0:ee.toDate)==null?void 0:z.call(ee);return U&&U.getTime()!==k.getTime()?`${k.toLocaleDateString()} - ${U.toLocaleDateString()}`:k.toLocaleDateString()})()," - ",Y.vehicleLayout==="sprinter_15"?e.mercedesSprinterBlack:Y.vehicleLayout==="bus_30"?e.mercedesSprinterWhite:Y.vehicleLayout==="highlander_7"?e.toyotaHighlander:Y.vehicleLayout]}),Y.driverName&&l.jsxs("p",{className:"text-[10px] sm:text-sm mt-1",style:{color:"#00BCD4"},children:[e.driver,": ",Y.driverName]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",onClick:k=>k.stopPropagation(),children:[Y.whatsappGroupLink&&l.jsxs("a",{href:Y.whatsappGroupLink,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:"#25D366"},className:"flex items-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",title:e.joinWhatsappGroup,children:[l.jsx(lv,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:e.whatsapp})]}),l.jsx("button",{onClick:()=>b(Y.id),className:"flex items-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",style:{backgroundColor:u===Y.id?P.success:P.primary.teal},title:u===Y.id?e.linkCopied:e.shareTripLink,children:u===Y.id?l.jsxs(l.Fragment,{children:[l.jsx(Cf,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:e.copied})]}):l.jsxs(l.Fragment,{children:[l.jsx(ov,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:e.share})]})}),l.jsxs("button",{onClick:()=>E(Y),style:{backgroundColor:P.primary.teal},className:"flex items-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",title:e.editTrip,children:[l.jsx(EM,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:e.edit})]}),l.jsxs("button",{onClick:()=>C(Y.id),disabled:A===Y.id,style:{backgroundColor:P.button.danger},className:"flex items-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:e.deleteTrip,children:[l.jsx(Df,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:A===Y.id?e.deleting:e.delete})]})]})]})},Y.id))})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsx("div",{className:"space-y-4 sticky top-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e.calendar}),l.jsx(d3,{onChange:Y=>{r(Y),y("date")},value:n,className:"border-0 w-full",tileClassName:({date:Y,view:k})=>{if(k==="month"){const U=new Date(Y);U.setHours(0,0,0,0);const H=a.filter(G=>{var z,J,ue,me;const K=((J=(z=G.date)==null?void 0:z.toDate)==null?void 0:J.call(z))||new Date(G.date);K.setHours(0,0,0,0);const ee=(me=(ue=G.endDate)==null?void 0:ue.toDate)!=null&&me.call(ue)?new Date(G.endDate.toDate()):new Date(K);return ee.setHours(0,0,0,0),U>=K&&U<=ee});if(H.length>0)return H.length===1?"has-one-trip":H.length===2?"has-two-trips":"has-many-trips"}return null}}),l.jsx("style",{children:`
                  .has-one-trip {
                    background-color: #b2ebf2 !important;
                    color: #006064 !important;
                    font-weight: 600;
                  }
                  .has-one-trip:hover {
                    background-color: #80deea !important;
                  }
                  .has-two-trips {
                    background-color: #4dd0e1 !important;
                    color: #004d56 !important;
                    font-weight: 700;
                  }
                  .has-two-trips:hover {
                    background-color: #26c6da !important;
                  }
                  .has-many-trips {
                    background-color: #00bcd4 !important;
                    color: white !important;
                    font-weight: 800;
                  }
                  .has-many-trips:hover {
                    background-color: #00acc1 !important;
                  }
                `})]})})})]})}),s&&l.jsx(SB,{selectedDate:n,onClose:()=>o(!1),onCreate:v}),x&&l.jsx(NB,{trip:x,onClose:()=>E(null),onUpdate:O}),I&&l.jsx(RB,{tripId:I,onClose:()=>V(null)})]})};function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qy.apply(null,arguments)}function jB(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kB(t,e){if(t==null)return{};var n,r,a=jB(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Hy(t){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(t)}function MB(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function PB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gy(t,e){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Gy(t,e)}function LB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gy(t,e)}function af(t){return af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},af(t)}function ZR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZR=function(){return!!t})()}function VB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UB(t,e){if(e&&(Hy(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VB(t)}function BB(t){var e=ZR();return function(){var n,r=af(t);if(e){var a=af(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return UB(this,n)}}var eD={exports:{}},zB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",FB=zB,$B=FB;function tD(){}function nD(){}nD.resetWarningCache=tD;var qB=function(){function t(r,a,i,s,o,u){if(u!==$B){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:nD,resetWarningCache:tD};return n.PropTypes=n,n};eD.exports=qB();var rD=eD.exports;const on=sf(rD);/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function is(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}is.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};is.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};is.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function N_(t,e,n,r){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=r}N_.prototype.length=function(){for(var t=10,e=0,n=void 0,r=void 0,a=0;a<=t;a+=1){var i=a/t,s=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var u=s-n,d=o-r;e+=Math.sqrt(u*u+d*d)}n=s,r=o}return e};N_.prototype._point=function(t,e,n,r,a){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*r*(1-t)*t*t+a*t*t*t};function HB(t,e,n){var r,a,i,s=null,o=0;n||(n={});var u=function(){o=n.leading===!1?0:Date.now(),s=null,i=t.apply(r,a),s||(r=a=null)};return function(){var d=Date.now();!o&&n.leading===!1&&(o=d);var h=e-(d-o);return r=this,a=arguments,h<=0||h>e?(s&&(clearTimeout(s),s=null),o=d,i=t.apply(r,a),s||(r=a=null)):!s&&n.trailing!==!1&&(s=setTimeout(u,h)),i}}function Oe(t,e){var n=this,r=e||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=HB(Oe.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=Oe.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(a))},this._handleMouseMove=function(a){n._mouseButtonDown&&n._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var i=a.changedTouches[0];n._strokeBegin(i)}},this._handleTouchMove=function(a){a.preventDefault();var i=a.targetTouches[0];n._strokeMoveUpdate(i)},this._handleTouchEnd=function(a){var i=a.target===n._canvas;i&&(a.preventDefault(),n._strokeEnd(a))},this.on()}Oe.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};Oe.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Image,a=n.ratio||window.devicePixelRatio||1,i=n.width||this._canvas.width/a,s=n.height||this._canvas.height/a;this._reset(),r.src=t,r.onload=function(){e._ctx.drawImage(r,0,0,i,s)},this._isEmpty=!1};Oe.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[t].concat(r))}};Oe.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};Oe.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};Oe.prototype.isEmpty=function(){return this._isEmpty};Oe.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};Oe.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,r=this._createPoint(e,n),a=this._data[this._data.length-1],i=a&&a[a.length-1],s=i&&r.distanceTo(i)<this.minDistance;if(!(i&&s)){var o=this._addPoint(r),u=o.curve,d=o.widths;u&&d&&this._drawCurve(u,d.start,d.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}};Oe.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],a=r[r.length-1];n.equals(a)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};Oe.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};Oe.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};Oe.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};Oe.prototype._createPoint=function(t,e,n){var r=this._canvas.getBoundingClientRect();return new is(t-r.left,e-r.top,n||new Date().getTime())};Oe.prototype._addPoint=function(t){var e=this.points,n=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),n=this._calculateCurveControlPoints(e[0],e[1],e[2]);var r=n.c2;n=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=n.c1,i=new N_(e[1],r,a,e[2]),s=this._calculateCurveWidths(i);return e.shift(),{curve:i,widths:s}}return{}};Oe.prototype._calculateCurveControlPoints=function(t,e,n){var r=t.x-e.x,a=t.y-e.y,i=e.x-n.x,s=e.y-n.y,o={x:(t.x+e.x)/2,y:(t.y+e.y)/2},u={x:(e.x+n.x)/2,y:(e.y+n.y)/2},d=Math.sqrt(r*r+a*a),h=Math.sqrt(i*i+s*s),f=o.x-u.x,p=o.y-u.y,y=h/(d+h),w={x:u.x+f*y,y:u.y+p*y},N=e.x-w.x,A=e.y-w.y;return{c1:new is(o.x+N,o.y+A),c2:new is(u.x+N,u.y+A)}};Oe.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,r={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(a);return r.start=this._lastWidth,r.end=i,this._lastVelocity=a,this._lastWidth=i,r};Oe.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};Oe.prototype._drawPoint=function(t,e,n){var r=this._ctx;r.moveTo(t,e),r.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1};Oe.prototype._drawCurve=function(t,e,n){var r=this._ctx,a=n-e,i=Math.floor(t.length());r.beginPath();for(var s=0;s<i;s+=1){var o=s/i,u=o*o,d=u*o,h=1-o,f=h*h,p=f*h,y=p*t.startPoint.x;y+=3*f*o*t.control1.x,y+=3*h*u*t.control2.x,y+=d*t.endPoint.x;var w=p*t.startPoint.y;w+=3*f*o*t.control1.y,w+=3*h*u*t.control2.y,w+=d*t.endPoint.y;var N=e+d*a;this._drawPoint(y,w,N)}r.closePath(),r.fill()};Oe.prototype._drawDot=function(t){var e=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()};Oe.prototype._fromData=function(t,e,n){for(var r=0;r<t.length;r+=1){var a=t[r];if(a.length>1)for(var i=0;i<a.length;i+=1){var s=a[i],o=new is(s.x,s.y,s.time),u=s.color;if(i===0)this.penColor=u,this._reset(),this._addPoint(o);else if(i!==a.length-1){var d=this._addPoint(o),h=d.curve,f=d.widths;h&&f&&e(h,f,u)}}else{this._reset();var p=a[0];n(p)}}};Oe.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),a=0,i=0,s=n.width/r,o=n.height/r,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",n.width),u.setAttributeNS(null,"height",n.height),this._fromData(e,function(_,x,E){var I=document.createElement("path");if(!isNaN(_.control1.x)&&!isNaN(_.control1.y)&&!isNaN(_.control2.x)&&!isNaN(_.control2.y)){var V="M "+_.startPoint.x.toFixed(3)+","+_.startPoint.y.toFixed(3)+" "+("C "+_.control1.x.toFixed(3)+","+_.control1.y.toFixed(3)+" ")+(_.control2.x.toFixed(3)+","+_.control2.y.toFixed(3)+" ")+(_.endPoint.x.toFixed(3)+","+_.endPoint.y.toFixed(3));I.setAttribute("d",V),I.setAttribute("stroke-width",(x.end*2.25).toFixed(3)),I.setAttribute("stroke",E),I.setAttribute("fill","none"),I.setAttribute("stroke-linecap","round"),u.appendChild(I)}},function(_){var x=document.createElement("circle"),E=typeof t.dotSize=="function"?t.dotSize():t.dotSize;x.setAttribute("r",E),x.setAttribute("cx",_.x),x.setAttribute("cy",_.y),x.setAttribute("fill",_.color),u.appendChild(x)});var d="data:image/svg+xml;base64,",h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+i+" "+s+" "+o+'"')+(' width="'+s+'"')+(' height="'+o+'"')+">",f=u.innerHTML;if(f===void 0){var p=document.createElement("dummy"),y=u.childNodes;p.innerHTML="";for(var w=0;w<y.length;w+=1)p.appendChild(y[w].cloneNode(!0));f=p.innerHTML}var N="</svg>",A=h+f+N;return d+btoa(A)};Oe.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(n,r){return e._drawCurve(n,r.start,r.end)},function(n){return e._drawDot(n)}),this._data=t};Oe.prototype.toData=function(){return this._data};var aD={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(WD,function(){return function(n){function r(i){if(a[i])return a[i].exports;var s=a[i]={exports:{},id:i,loaded:!1};return n[i].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}var a={};return r.m=n,r.c=a,r.p="",r(0)}([function(n,r){function a(d){var h=d.getContext("2d"),f=d.width,p=d.height,y=h.getImageData(0,0,f,p).data,w=o(!0,f,p,y),N=o(!1,f,p,y),A=u(!0,f,p,y),_=u(!1,f,p,y),x=_-A+1,E=N-w+1,I=h.getImageData(A,w,x,E);return d.width=x,d.height=E,h.clearRect(0,0,x,E),h.putImageData(I,0,0),d}function i(d,h,f,p){return{red:p[4*(f*h+d)],green:p[4*(f*h+d)+1],blue:p[4*(f*h+d)+2],alpha:p[4*(f*h+d)+3]}}function s(d,h,f,p){return i(d,h,f,p).alpha}function o(d,h,f,p){for(var y=d?1:-1,w=d?0:f-1,N=w;d?N<f:N>-1;N+=y)for(var A=0;A<h;A++)if(s(A,N,h,p))return N;return null}function u(d,h,f,p){for(var y=d?1:-1,w=d?0:h-1,N=w;d?N<h:N>-1;N+=y)for(var A=0;A<f;A++)if(s(N,A,h,p))return N;return null}Object.defineProperty(r,"__esModule",{value:!0}),r.default=a}])})})(aD);var GB=aD.exports;const YB=sf(GB);var WB=["canvasProps","clearOnResize"],_m=function(t){LB(n,t);var e=BB(n);function n(){var r;PB(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.staticThis=r.constructor,r._sigPad=null,r._canvas=null,r.setRef=function(o){r._canvas=o,r._canvas===null&&(r._sigPad=null)},r._excludeOurProps=function(){var o=r.props;o.canvasProps,o.clearOnResize;var u=kB(o,WB);return u},r.componentDidMount=function(){var o=r.getCanvas();r._sigPad=new Oe(o,r._excludeOurProps()),r._resizeCanvas(),r.on()},r.componentWillUnmount=function(){r.off()},r.componentDidUpdate=function(){Object.assign(r._sigPad,r._excludeOurProps())},r.getCanvas=function(){if(r._canvas===null)throw r.staticThis.refNullError;return r._canvas},r.getTrimmedCanvas=function(){var o=r.getCanvas(),u=document.createElement("canvas");return u.width=o.width,u.height=o.height,u.getContext("2d").drawImage(o,0,0),YB(u)},r.getSignaturePad=function(){if(r._sigPad===null)throw r.staticThis.refNullError;return r._sigPad},r._checkClearOnResize=function(){r.props.clearOnResize&&r._resizeCanvas()},r._resizeCanvas=function(){var o,u,d=(o=r.props.canvasProps)!==null&&o!==void 0?o:{},h=d.width,f=d.height;if(!(typeof h<"u"&&typeof f<"u")){var p=r.getCanvas(),y=Math.max((u=window.devicePixelRatio)!==null&&u!==void 0?u:1,1);typeof h>"u"&&(p.width=p.offsetWidth*y),typeof f>"u"&&(p.height=p.offsetHeight*y),p.getContext("2d").scale(y,y),r.clear()}},r.render=function(){var o=r.props.canvasProps;return fI.createElement("canvas",qy({ref:r.setRef},o))},r.on=function(){return window.addEventListener("resize",r._checkClearOnResize),r.getSignaturePad().on()},r.off=function(){return window.removeEventListener("resize",r._checkClearOnResize),r.getSignaturePad().off()},r.clear=function(){return r.getSignaturePad().clear()},r.isEmpty=function(){return r.getSignaturePad().isEmpty()},r.fromDataURL=function(o,u){return r.getSignaturePad().fromDataURL(o,u)},r.toDataURL=function(o,u){return r.getSignaturePad().toDataURL(o,u)},r.fromData=function(o){return r.getSignaturePad().fromData(o)},r.toData=function(){return r.getSignaturePad().toData()},r}return MB(n)}(R.Component);_m.propTypes={velocityFilterWeight:on.number,minWidth:on.number,maxWidth:on.number,minDistance:on.number,dotSize:on.oneOfType([on.number,on.func]),penColor:on.string,throttle:on.number,onEnd:on.func,onBegin:on.func,canvasProps:on.object,clearOnResize:on.bool};_m.defaultProps={clearOnResize:!0};_m.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const KB=`CANCELLATION POLICY

1. Cancellations made 30 days or more before the trip date will receive a full refund.
2. Cancellations made 15-29 days before the trip date will receive a 50% refund.
3. Cancellations made less than 15 days before the trip date are non-refundable.
4. No-shows on the trip date are non-refundable.
5. Trip organizers reserve the right to cancel trips due to weather, safety concerns, or insufficient participation, in which case full refunds will be provided.`,QB=`WAIVER OF LIABILITY AND ASSUMPTION OF RISK

I, the undersigned, hereby acknowledge that I am voluntarily participating in this trip and related activities. I understand that such participation involves inherent risks, including but not limited to personal injury, property damage, or death.

In consideration of being permitted to participate in this trip, I hereby:

1. WAIVE, RELEASE, AND DISCHARGE the trip organizers, their officers, employees, and agents from any and all liability for any loss, damage, injury, or death that may occur during my participation.

2. ASSUME ALL RISKS associated with participation in this trip, whether known or unknown.

3. AGREE TO INDEMNIFY AND HOLD HARMLESS the trip organizers from any claims, actions, or losses arising from my participation.

4. CONSENT to receive emergency medical treatment if necessary.

I have read this waiver, fully understand its terms, and sign it freely and voluntarily.`,XB=()=>{var ie,Y;const{tripId:t}=lN();ds();const e=R.useRef(null),{language:n}=sa(),[r,a]=R.useState(null),[i,s]=R.useState([]),[o,u]=R.useState(!0),[d,h]=R.useState(!1),[f,p]=R.useState(!1),[y,w]=R.useState(1),[N,A]=R.useState([]),[_,x]=R.useState([{firstName:"",lastName:"",email:"",phone:"",seatNumber:null}]),[E,I]=R.useState("on-trip"),[V,q]=R.useState(!1),[S,v]=R.useState({cancellationPolicy:!1,waiver:!1}),[b,C]=R.useState({});R.useEffect(()=>{O()},[t]),R.useEffect(()=>{const k=Array.from({length:y},(U,H)=>_[H]||{firstName:"",lastName:"",email:"",phone:"",seatNumber:null});x(k),A(k.map(U=>U.seatNumber).filter(Boolean))},[y]);const O=async()=>{try{console.log("Loading trip with ID:",t);const[k,U]=await Promise.all([WR(t),TB(t)]);console.log("Trip data loaded:",k),console.log("Registrations loaded:",U),a(k),s(U)}catch(k){console.error("Error loading trip data:",k),alert("Error loading trip: "+k.message)}finally{u(!1)}},j=()=>{var U;const k={};return _.forEach((H,G)=>{H.firstName.trim()||(k[`passenger${G}FirstName`]="First name is required"),H.lastName.trim()||(k[`passenger${G}LastName`]="Last name is required"),H.email.trim()?/\S+@\S+\.\S+/.test(H.email)||(k[`passenger${G}Email`]="Email is invalid"):k[`passenger${G}Email`]="Email is required",H.phone.trim()||(k[`passenger${G}Phone`]="Phone number is required"),H.seatNumber||(k[`passenger${G}Seat`]="Please select a seat")}),S.cancellationPolicy||(k.cancellationPolicy="You must agree to the cancellation policy"),S.waiver||(k.waiver="You must sign the waiver"),(U=e.current)!=null&&U.isEmpty()&&(k.signature="Signature is required"),C(k),Object.keys(k).length===0},D=async k=>{if(k.preventDefault(),!!j()){h(!0);try{const U=e.current.toDataURL();for(const H of _)await KR({tripId:t,firstName:H.firstName,lastName:H.lastName,email:H.email,phone:H.phone,seatNumber:H.seatNumber,paymentMethod:E,paid:!1,signatureData:U,signatureUrl:"",pdfUrl:"",agreedToCancellationPolicy:!0,agreedToWaiver:!0,adminEmail:"barpupco@gmail.com",registrationDate:new Date().toISOString()});p(!0)}catch(U){console.error("Error submitting registration:",U),C({submit:"Failed to submit registration. Please try again."})}finally{h(!1)}}};return o?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"text-lg",children:"Loading trip information..."})}):r?f?l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:"linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%)"},children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx(Vr,{className:"w-16 h-16 mx-auto mb-4",style:{color:P.success}}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Registration Successful!"}),l.jsxs("p",{className:"text-gray-600 mb-4",children:["Thank you for registering for ",l.jsx("span",{className:"font-semibold",children:r.title}),"."]}),l.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Confirmation Email Sent!"}),l.jsx("p",{className:"text-xs text-blue-700",children:"A confirmation email with your trip details and signed waiver has been sent to:"}),l.jsx("p",{className:"text-sm font-semibold text-blue-900 mt-1",children:_[0].email}),_.length>1&&l.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Each passenger will receive their own confirmation email."})]})]})}),l.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#E0F7FA"},children:[l.jsx("p",{className:"font-semibold mb-2",style:{color:P.primary.teal},children:_.length===1?"Your Seat:":"Your Seats:"}),l.jsx("p",{className:"text-lg font-bold",children:_.map(k=>`#${k.seatNumber}`).join(", ")})]}),l.jsxs("div",{className:"mt-6 text-sm text-gray-600",children:[l.jsx("p",{children:"Please check your email inbox and spam folder."}),l.jsx("p",{className:"mt-2",children:"If you don't receive the email within 10 minutes, please contact support."})]})]})}):l.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%)"},children:[l.jsx(vm,{showLogout:!1,title:r.title,subtitle:(ie=r.date)==null?void 0:ie.toDate().toLocaleDateString(n==="ru"?"ru-RU":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),l.jsx("div",{className:"max-w-4xl mx-auto py-8 px-4",children:l.jsxs("form",{onSubmit:D,className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Number of Seats"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How many seats do you need? *"}),l.jsx("select",{value:y,onChange:k=>w(parseInt(k.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[1,2,3,4,5].map(k=>l.jsxs("option",{value:k,children:[k," ",k===1?"seat":"seats"]},k))})]})]}),_.map((k,U)=>l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Passenger ",U+1," Information"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),l.jsx("input",{type:"text",value:k.firstName,onChange:H=>{const G=[..._];G[U].firstName=H.target.value,x(G)},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b[`passenger${U}FirstName`]?"border-red-500":"border-gray-300"}`}),b[`passenger${U}FirstName`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:b[`passenger${U}FirstName`]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),l.jsx("input",{type:"text",value:k.lastName,onChange:H=>{const G=[..._];G[U].lastName=H.target.value,x(G)},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b[`passenger${U}LastName`]?"border-red-500":"border-gray-300"}`}),b[`passenger${U}LastName`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:b[`passenger${U}LastName`]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),l.jsx("input",{type:"email",value:U===0||!V?k.email:_[0].email,onChange:H=>{const G=[..._];G[U].email=H.target.value,x(G),U===0&&V&&(G.forEach((K,ee)=>{ee>0&&(K.email=H.target.value)}),x(G))},disabled:U>0&&V,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b[`passenger${U}Email`]?"border-red-500":"border-gray-300"} ${U>0&&V?"bg-gray-100":""}`}),b[`passenger${U}Email`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:b[`passenger${U}Email`]}),U===0&&y>1&&l.jsxs("label",{className:"flex items-center mt-2 text-sm text-gray-600",children:[l.jsx("input",{type:"checkbox",checked:V,onChange:H=>{if(q(H.target.checked),H.target.checked){const G=[..._],K=_[0].email;G.forEach((ee,z)=>{z>0&&(ee.email=K)}),x(G)}},className:"mr-2",style:{accentColor:P.primary.teal}}),"Use this email for all passengers"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),l.jsx("input",{type:"tel",value:k.phone,onChange:H=>{const G=[..._];G[U].phone=H.target.value,x(G)},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b[`passenger${U}Phone`]?"border-red-500":"border-gray-300"}`}),b[`passenger${U}Phone`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:b[`passenger${U}Phone`]})]})]})]},U)),l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Payment Method"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:E==="card"?P.primary.teal:"#D1D5DB"},children:[l.jsx("input",{type:"radio",value:"card",checked:E==="card",onChange:k=>I(k.target.value),className:"mr-3",style:{accentColor:P.primary.teal}}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Pay with Card"}),l.jsx("div",{className:"text-sm text-gray-500",children:"Pay now using credit/debit card"})]})]}),l.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:E==="on-trip"?P.primary.teal:"#D1D5DB"},children:[l.jsx("input",{type:"radio",value:"on-trip",checked:E==="on-trip",onChange:k=>I(k.target.value),className:"mr-3",style:{accentColor:P.primary.teal}}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Pay on Trip"}),l.jsx("div",{className:"text-sm text-gray-500",children:"Pay cash/card on the day of the trip"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Assign Seats to Passengers *"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select a seat for each passenger from the dropdown below."}),_.map((k,U)=>{const H=r.vehicleLayout,G=H==="sprinter_15"?14:H==="bus_30"?11:7;return l.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Seat for Passenger ",U+1,": ",k.firstName||"(Not entered)"," ",k.lastName||""," *"]}),l.jsxs("select",{value:k.seatNumber||"",onChange:K=>{const ee=[..._];ee[U].seatNumber=K.target.value?parseInt(K.target.value):null,x(ee)},className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${b[`passenger${U}Seat`]?"border-red-500":"border-gray-300"}`,children:[l.jsx("option",{value:"",children:"Select a seat"}),Array.from({length:G},(K,ee)=>ee+1).map(K=>{const ee=i.some(ue=>ue.seatNumber===K),z=_.some((ue,me)=>me!==U&&ue.seatNumber===K),J=ee||z;return l.jsxs("option",{value:K,disabled:J,children:["Seat #",K," ",ee?"(Occupied)":z?"(Selected for another passenger)":""]},K)})]}),b[`passenger${U}Seat`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:b[`passenger${U}Seat`]})]},U)}),l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Seating Map - Click to Select Seats"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Tap on available (gray) seats to assign them to your passengers"}),_.some(k=>!k.seatNumber)&&l.jsx("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:l.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Next: Select seat for Passenger ",_.findIndex(k=>!k.seatNumber)+1,((Y=_[_.findIndex(k=>!k.seatNumber)])==null?void 0:Y.firstName)&&` (${_[_.findIndex(k=>!k.seatNumber)].firstName})`]})}),l.jsx(JR,{vehicleType:r.vehicleLayout,registrations:i,driverName:r.driverName,selectedSeat:null,onSeatClick:k=>{const U=_.findIndex(H=>!H.seatNumber);if(U!==-1){const H=[..._];H[U].seatNumber=k,x(H)}},reservedSeats:_.map(k=>k.seatNumber).filter(Boolean)}),_.some(k=>k.seatNumber)&&l.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Assigned Seats:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:_.map((k,U)=>k.seatNumber&&l.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-300 rounded-full text-sm",children:[l.jsxs("span",{className:"font-semibold",children:["#",k.seatNumber]}),l.jsx("span",{className:"text-gray-600",children:k.firstName||`Passenger ${U+1}`}),l.jsx("button",{type:"button",onClick:()=>{const H=[..._];H[U].seatNumber=null,x(H)},className:"text-red-500 hover:text-red-700",children:""})]},U))})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Cancellation Policy"}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-48 overflow-y-auto mb-4",children:l.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 font-sans",children:KB})}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:S.cancellationPolicy,onChange:k=>v({...S,cancellationPolicy:k.target.checked}),className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:"I have read and agree to the cancellation policy *"})]}),b.cancellationPolicy&&l.jsx("p",{className:"text-red-500 text-sm mt-2",children:b.cancellationPolicy})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Waiver of Liability"}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg max-h-64 overflow-y-auto mb-4",children:l.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 font-sans",children:QB})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Digital Signature *"}),l.jsx("div",{className:`border-2 rounded-lg ${b.signature?"border-red-500":"border-gray-300"}`,children:l.jsx(_m,{ref:e,canvasProps:{className:"w-full h-40 bg-white rounded-lg"}})}),l.jsx("button",{type:"button",onClick:()=>{var k;return(k=e.current)==null?void 0:k.clear()},className:"mt-2 text-sm text-blue-600 hover:text-blue-700",children:"Clear Signature"}),b.signature&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.signature})]}),l.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:S.waiver,onChange:k=>v({...S,waiver:k.target.checked}),className:"mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:"I have read, understand, and agree to the waiver of liability *"})]}),b.waiver&&l.jsx("p",{className:"text-red-500 text-sm mt-2",children:b.waiver})]}),b.submit&&l.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg",children:b.submit}),l.jsx("button",{type:"submit",disabled:d,style:{backgroundColor:P.primary.teal},className:"w-full text-white py-4 rounded-lg font-bold text-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Submitting...":"Complete Registration"})]})})]}):l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx(z4,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Trip Not Found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"This trip link may be invalid or expired."}),l.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg text-left",children:[l.jsxs("p",{className:"text-sm text-gray-700",children:[l.jsx("strong",{children:"Trip ID:"})," ",t]}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"If you believe this is an error, please contact the trip organizer."})]})]})})},JB=()=>{const[t,e]=R.useState(""),[n,r]=R.useState(""),[a,i]=R.useState(""),[s,o]=R.useState(!1),u=ds(),d=async h=>{h.preventDefault(),i(""),o(!0);try{await oU(S_,t,n),u("/admin")}catch(f){i("Invalid email or password"),console.error(f)}finally{o(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:P.gradient.primary},children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[l.jsx("div",{className:"flex items-center justify-center mb-8",children:l.jsx(cM,{className:"w-12 h-12",style:{color:P.primary.teal}})}),l.jsx("h1",{className:"text-3xl font-bold text-center mb-8",style:{color:P.primary.black},children:"Admin Login"}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:t,onChange:h=>e(h.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{type:"password",value:n,onChange:h=>r(h.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),a&&l.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm",children:a}),l.jsx("button",{type:"submit",disabled:s,style:{backgroundColor:P.primary.teal},className:"w-full text-white py-3 rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Signing in...":"Sign In"})]})]})})};var A_={},bm={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});function ZB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ez=function t(e,n){ZB(this,t),this.data=e,this.text=n.text||e,this.options=n};Gt.default=ez;Object.defineProperty(bm,"__esModule",{value:!0});bm.CODE39=void 0;var tz=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),nz=Gt,rz=az(nz);function az(t){return t&&t.__esModule?t:{default:t}}function iz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sz(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function oz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lz=function(t){oz(e,t);function e(n,r){return iz(this,e),n=n.toUpperCase(),r.mod43&&(n+=dz(hz(n))),sz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return tz(e,[{key:"encode",value:function(){for(var r=Qp("*"),a=0;a<this.data.length;a++)r+=Qp(this.data[a])+"0";return r+=Qp("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(rz.default),iD=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],cz=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Qp(t){return uz(sD(t))}function uz(t){return cz[t].toString(2)}function dz(t){return iD[t]}function sD(t){return iD.indexOf(t)}function hz(t){for(var e=0,n=0;n<t.length;n++)e+=sD(t[n]);return e=e%43,e}bm.CODE39=lz;var fr={},C_={},cl={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});var Gl;function Xp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oD=ze.SET_A=0,lD=ze.SET_B=1,cD=ze.SET_C=2;ze.SHIFT=98;var fz=ze.START_A=103,mz=ze.START_B=104,pz=ze.START_C=105;ze.MODULO=103;ze.STOP=106;ze.FNC1=207;ze.SET_BY_CODE=(Gl={},Xp(Gl,fz,oD),Xp(Gl,mz,lD),Xp(Gl,pz,cD),Gl);ze.SWAP={101:oD,100:lD,99:cD};ze.A_START_CHAR="";ze.B_START_CHAR="";ze.C_START_CHAR="";ze.A_CHARS="[\0-_-]";ze.B_CHARS="[ --]";ze.C_CHARS="(*[0-9]{2}*)";ze.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(cl,"__esModule",{value:!0});var gz=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),yz=Gt,vz=_z(yz),ln=ze;function _z(t){return t&&t.__esModule?t:{default:t}}function bz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xz(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function wz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ez=function(t){wz(e,t);function e(n,r){bz(this,e);var a=xz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),r));return a.bytes=n.split("").map(function(i){return i.charCodeAt(0)}),a}return gz(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,a=r.shift()-105,i=ln.SET_BY_CODE[a];if(i===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(ln.FNC1);var s=e.next(r,1,i);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(a)+s.result+e.getBar((s.checksum+a)%ln.MODULO)+e.getBar(ln.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return ln.BARS[r]?ln.BARS[r].toString():""}},{key:"correctIndex",value:function(r,a){if(a===ln.SET_A){var i=r.shift();return i<32?i+64:i-32}else return a===ln.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,a,i){if(!r.length)return{result:"",checksum:0};var s=void 0,o=void 0;if(r[0]>=200){o=r.shift()-105;var u=ln.SWAP[o];u!==void 0?s=e.next(r,a+1,u):((i===ln.SET_A||i===ln.SET_B)&&o===ln.SHIFT&&(r[0]=i===ln.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),s=e.next(r,a+1,i))}else o=e.correctIndex(r,i),s=e.next(r,a+1,i);var d=e.getBar(o),h=o*a;return{result:d+s.result,checksum:h+s.checksum}}}]),e}(vz.default);cl.default=Ez;var R_={};Object.defineProperty(R_,"__esModule",{value:!0});var Ja=ze,uD=function(e){return e.match(new RegExp("^"+Ja.A_CHARS+"*"))[0].length},dD=function(e){return e.match(new RegExp("^"+Ja.B_CHARS+"*"))[0].length},hD=function(e){return e.match(new RegExp("^"+Ja.C_CHARS+"*"))[0]};function D_(t,e){var n=e?Ja.A_CHARS:Ja.B_CHARS,r=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+""+fD(t.substring(r[1].length));var a=t.match(new RegExp("^"+n+"+"))[0];return a.length===t.length?t:a+String.fromCharCode(e?205:206)+D_(t.substring(a.length),!e)}function fD(t){var e=hD(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var r=uD(t)>=dD(t);return e+String.fromCharCode(r?206:205)+D_(t,r)}R_.default=function(t){var e=void 0,n=hD(t).length;if(n>=2)e=Ja.C_START_CHAR+fD(t);else{var r=uD(t)>dD(t);e=(r?Ja.A_START_CHAR:Ja.B_START_CHAR)+D_(t,r)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(a,i){return""+i})};Object.defineProperty(C_,"__esModule",{value:!0});var Tz=cl,Sz=mD(Tz),Nz=R_,Az=mD(Nz);function mD(t){return t&&t.__esModule?t:{default:t}}function Cz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jp(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Rz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Dz=function(t){Rz(e,t);function e(n,r){if(Cz(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var a=Jp(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,Az.default)(n),r));else var a=Jp(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return Jp(a)}return e}(Sz.default);C_.default=Dz;var I_={};Object.defineProperty(I_,"__esModule",{value:!0});var Iz=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Oz=cl,jz=kz(Oz),jE=ze;function kz(t){return t&&t.__esModule?t:{default:t}}function Mz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pz(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Lz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Vz=function(t){Lz(e,t);function e(n,r){return Mz(this,e),Pz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,jE.A_START_CHAR+n,r))}return Iz(e,[{key:"valid",value:function(){return new RegExp("^"+jE.A_CHARS+"+$").test(this.data)}}]),e}(jz.default);I_.default=Vz;var O_={};Object.defineProperty(O_,"__esModule",{value:!0});var Uz=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Bz=cl,zz=Fz(Bz),kE=ze;function Fz(t){return t&&t.__esModule?t:{default:t}}function $z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qz(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Hz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Gz=function(t){Hz(e,t);function e(n,r){return $z(this,e),qz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,kE.B_START_CHAR+n,r))}return Uz(e,[{key:"valid",value:function(){return new RegExp("^"+kE.B_CHARS+"+$").test(this.data)}}]),e}(zz.default);O_.default=Gz;var j_={};Object.defineProperty(j_,"__esModule",{value:!0});var Yz=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Wz=cl,Kz=Qz(Wz),ME=ze;function Qz(t){return t&&t.__esModule?t:{default:t}}function Xz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jz(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Zz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var eF=function(t){Zz(e,t);function e(n,r){return Xz(this,e),Jz(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ME.C_START_CHAR+n,r))}return Yz(e,[{key:"valid",value:function(){return new RegExp("^"+ME.C_CHARS+"+$").test(this.data)}}]),e}(Kz.default);j_.default=eF;Object.defineProperty(fr,"__esModule",{value:!0});fr.CODE128C=fr.CODE128B=fr.CODE128A=fr.CODE128=void 0;var tF=C_,nF=xm(tF),rF=I_,aF=xm(rF),iF=O_,sF=xm(iF),oF=j_,lF=xm(oF);function xm(t){return t&&t.__esModule?t:{default:t}}fr.CODE128=nF.default;fr.CODE128A=aF.default;fr.CODE128B=sF.default;fr.CODE128C=lF.default;var Jt={},k_={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.SIDE_BIN="101";zn.MIDDLE_BIN="01010";zn.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};zn.EAN2_STRUCTURE=["LL","LG","GL","GG"];zn.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];zn.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var wm={},xs={};Object.defineProperty(xs,"__esModule",{value:!0});var cF=zn,uF=function(e,n,r){var a=e.split("").map(function(s,o){return cF.BINARIES[n[o]]}).map(function(s,o){return s?s[e[o]]:""});if(r){var i=e.length-1;a=a.map(function(s,o){return o<i?s+r:s})}return a.join("")};xs.default=uF;Object.defineProperty(wm,"__esModule",{value:!0});var dF=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),js=zn,hF=xs,PE=pD(hF),fF=Gt,mF=pD(fF);function pD(t){return t&&t.__esModule?t:{default:t}}function pF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function yF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vF=function(t){yF(e,t);function e(n,r){pF(this,e);var a=gF(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return a.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,a.guardHeight=r.height+a.fontSize/2+r.textMargin,a}return dF(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,a){return this.text.substr(r,a)}},{key:"leftEncode",value:function(r,a){return(0,PE.default)(r,a)}},{key:"rightText",value:function(r,a){return this.text.substr(r,a)}},{key:"rightEncode",value:function(r,a){return(0,PE.default)(r,a)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},a={height:this.guardHeight};return[{data:js.SIDE_BIN,options:a},{data:this.leftEncode(),text:this.leftText(),options:r},{data:js.MIDDLE_BIN,options:a},{data:this.rightEncode(),text:this.rightText(),options:r},{data:js.SIDE_BIN,options:a}]}},{key:"encodeFlat",value:function(){var r=[js.SIDE_BIN,this.leftEncode(),js.MIDDLE_BIN,this.rightEncode(),js.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),e}(mF.default);wm.default=vF;Object.defineProperty(k_,"__esModule",{value:!0});var _F=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Yl=function t(e,n,r){e===null&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(a===void 0){var i=Object.getPrototypeOf(e);return i===null?void 0:t(i,n,r)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(r)}},bF=zn,xF=wm,wF=EF(xF);function EF(t){return t&&t.__esModule?t:{default:t}}function TF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function NF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var LE=function(e){var n=e.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,a,i){return i%2?r+a*3:r+a},0);return(10-n%10)%10},AF=function(t){NF(e,t);function e(n,r){TF(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=LE(n));var a=SF(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return a.lastChar=r.lastChar,a}return _F(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===LE(this.data)}},{key:"leftText",value:function(){return Yl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),a=bF.EAN13_STRUCTURE[this.data[0]];return Yl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,a)}},{key:"rightText",value:function(){return Yl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return Yl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=Yl(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),e}(wF.default);k_.default=AF;var M_={};Object.defineProperty(M_,"__esModule",{value:!0});var CF=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),wd=function t(e,n,r){e===null&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(a===void 0){var i=Object.getPrototypeOf(e);return i===null?void 0:t(i,n,r)}else{if("value"in a)return a.value;var s=a.get;return s===void 0?void 0:s.call(r)}},RF=wm,DF=IF(RF);function IF(t){return t&&t.__esModule?t:{default:t}}function OF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jF(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function kF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var VE=function(e){var n=e.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,a,i){return i%2?r+a:r+a*3},0);return(10-n%10)%10},MF=function(t){kF(e,t);function e(n,r){return OF(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=VE(n)),jF(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return CF(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===VE(this.data)}},{key:"leftText",value:function(){return wd(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return wd(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return wd(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return wd(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),e}(DF.default);M_.default=MF;var P_={};Object.defineProperty(P_,"__esModule",{value:!0});var PF=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),LF=zn,VF=xs,UF=gD(VF),BF=Gt,zF=gD(BF);function gD(t){return t&&t.__esModule?t:{default:t}}function FF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $F(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function qF(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var HF=function(e){var n=e.split("").map(function(r){return+r}).reduce(function(r,a,i){return i%2?r+a*9:r+a*3},0);return n%10},GF=function(t){qF(e,t);function e(n,r){return FF(this,e),$F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return PF(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=LF.EAN5_STRUCTURE[HF(this.data)];return{data:"1011"+(0,UF.default)(this.data,r,"01"),text:this.text}}}]),e}(zF.default);P_.default=GF;var L_={};Object.defineProperty(L_,"__esModule",{value:!0});var YF=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),WF=zn,KF=xs,QF=yD(KF),XF=Gt,JF=yD(XF);function yD(t){return t&&t.__esModule?t:{default:t}}function ZF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e$(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function t$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n$=function(t){t$(e,t);function e(n,r){return ZF(this,e),e$(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return YF(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=WF.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,QF.default)(this.data,r,"01"),text:this.text}}}]),e}(JF.default);L_.default=n$;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});var r$=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Cu.checksum=Yy;var a$=xs,ks=vD(a$),i$=Gt,s$=vD(i$);function vD(t){return t&&t.__esModule?t:{default:t}}function o$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l$(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function c$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u$=function(t){c$(e,t);function e(n,r){o$(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=Yy(n));var a=l$(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return a.displayValue=r.displayValue,r.fontSize>r.width*10?a.fontSize=r.width*10:a.fontSize=r.fontSize,a.guardHeight=r.height+a.fontSize/2+r.textMargin,a}return r$(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Yy(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,ks.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,ks.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,ks.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,ks.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,ks.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,ks.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),e}(s$.default);function Yy(t){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(t[n]);for(n=0;n<11;n+=2)e+=parseInt(t[n])*3;return(10-e%10)%10}Cu.default=u$;var V_={};Object.defineProperty(V_,"__esModule",{value:!0});var d$=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h$=xs,f$=_D(h$),m$=Gt,p$=_D(m$),g$=Cu;function _D(t){return t&&t.__esModule?t:{default:t}}function y$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zp(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function v$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _$=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],b$=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],x$=function(t){v$(e,t);function e(n,r){y$(this,e);var a=Zp(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));if(a.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)a.middleDigits=n,a.upcA=UE(n,"0"),a.text=r.text||""+a.upcA[0]+n+a.upcA[a.upcA.length-1],a.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(a.middleDigits=n.substring(1,n.length-1),a.upcA=UE(a.middleDigits,n[0]),a.upcA[a.upcA.length-1]===n[n.length-1])a.isValid=!0;else return Zp(a);else return Zp(a);return a.displayValue=r.displayValue,r.fontSize>r.width*10?a.fontSize=r.width*10:a.fontSize=r.fontSize,a.guardHeight=r.height+a.fontSize/2+r.textMargin,a}return d$(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],a=this.upcA[this.upcA.length-1],i=b$[parseInt(a)][parseInt(r)];return(0,f$.default)(this.middleDigits,i)}}]),e}(p$.default);function UE(t,e){for(var n=parseInt(t[t.length-1]),r=_$[n],a="",i=0,s=0;s<r.length;s++){var o=r[s];o==="X"?a+=t[i++]:a+=o}return a=""+e+a,""+a+(0,g$.checksum)(a)}V_.default=x$;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.UPCE=Jt.UPC=Jt.EAN2=Jt.EAN5=Jt.EAN8=Jt.EAN13=void 0;var w$=k_,E$=ul(w$),T$=M_,S$=ul(T$),N$=P_,A$=ul(N$),C$=L_,R$=ul(C$),D$=Cu,I$=ul(D$),O$=V_,j$=ul(O$);function ul(t){return t&&t.__esModule?t:{default:t}}Jt.EAN13=E$.default;Jt.EAN8=S$.default;Jt.EAN5=A$.default;Jt.EAN2=R$.default;Jt.UPC=I$.default;Jt.UPCE=j$.default;var Uo={},Em={},Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.START_BIN="1010";Ru.END_BIN="11101";Ru.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Em,"__esModule",{value:!0});var k$=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ed=Ru,M$=Gt,P$=L$(M$);function L$(t){return t&&t.__esModule?t:{default:t}}function V$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U$(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function B$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var z$=function(t){B$(e,t);function e(){return V$(this,e),U$(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k$(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,a=this.data.match(/.{2}/g).map(function(i){return r.encodePair(i)}).join("");return{data:Ed.START_BIN+a+Ed.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var a=Ed.BINARIES[r[1]];return Ed.BINARIES[r[0]].split("").map(function(i,s){return(i==="1"?"111":"1")+(a[s]==="1"?"000":"0")}).join("")}}]),e}(P$.default);Em.default=z$;var U_={};Object.defineProperty(U_,"__esModule",{value:!0});var F$=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),$$=Em,q$=H$($$);function H$(t){return t&&t.__esModule?t:{default:t}}function G$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y$(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function W$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var BE=function(e){var n=e.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,a,i){return r+a*(3-i%2*2)},0);return Math.ceil(n/10)*10-n},K$=function(t){W$(e,t);function e(n,r){return G$(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=BE(n)),Y$(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return F$(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===BE(this.data)}}]),e}(q$.default);U_.default=K$;Object.defineProperty(Uo,"__esModule",{value:!0});Uo.ITF14=Uo.ITF=void 0;var Q$=Em,X$=bD(Q$),J$=U_,Z$=bD(J$);function bD(t){return t&&t.__esModule?t:{default:t}}Uo.ITF=X$.default;Uo.ITF14=Z$.default;var jn={},ws={};Object.defineProperty(ws,"__esModule",{value:!0});var eq=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),tq=Gt,nq=rq(tq);function rq(t){return t&&t.__esModule?t:{default:t}}function aq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iq(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oq=function(t){sq(e,t);function e(n,r){return aq(this,e),iq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return eq(e,[{key:"encode",value:function(){for(var r="110",a=0;a<this.data.length;a++){var i=parseInt(this.data[a]),s=i.toString(2);s=lq(s,4-s.length);for(var o=0;o<s.length;o++)r+=s[o]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(nq.default);function lq(t,e){for(var n=0;n<e;n++)t="0"+t;return t}ws.default=oq;var B_={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.mod10=cq;Es.mod11=uq;function cq(t){for(var e=0,n=0;n<t.length;n++){var r=parseInt(t[n]);(n+t.length)%2===0?e+=r:e+=r*2%10+Math.floor(r*2/10)}return(10-e%10)%10}function uq(t){for(var e=0,n=[2,3,4,5,6,7],r=0;r<t.length;r++){var a=parseInt(t[t.length-1-r]);e+=n[r%n.length]*a}return(11-e%11)%11}Object.defineProperty(B_,"__esModule",{value:!0});var dq=ws,hq=mq(dq),fq=Es;function mq(t){return t&&t.__esModule?t:{default:t}}function pq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gq(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function yq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vq=function(t){yq(e,t);function e(n,r){return pq(this,e),gq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,fq.mod10)(n),r))}return e}(hq.default);B_.default=vq;var z_={};Object.defineProperty(z_,"__esModule",{value:!0});var _q=ws,bq=wq(_q),xq=Es;function wq(t){return t&&t.__esModule?t:{default:t}}function Eq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tq(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Sq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Nq=function(t){Sq(e,t);function e(n,r){return Eq(this,e),Tq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,xq.mod11)(n),r))}return e}(bq.default);z_.default=Nq;var F_={};Object.defineProperty(F_,"__esModule",{value:!0});var Aq=ws,Cq=Rq(Aq),zE=Es;function Rq(t){return t&&t.__esModule?t:{default:t}}function Dq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Iq(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Oq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jq=function(t){Oq(e,t);function e(n,r){return Dq(this,e),n+=(0,zE.mod10)(n),n+=(0,zE.mod10)(n),Iq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return e}(Cq.default);F_.default=jq;var $_={};Object.defineProperty($_,"__esModule",{value:!0});var kq=ws,Mq=Pq(kq),FE=Es;function Pq(t){return t&&t.__esModule?t:{default:t}}function Lq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vq(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Uq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Bq=function(t){Uq(e,t);function e(n,r){return Lq(this,e),n+=(0,FE.mod11)(n),n+=(0,FE.mod10)(n),Vq(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return e}(Mq.default);$_.default=Bq;Object.defineProperty(jn,"__esModule",{value:!0});jn.MSI1110=jn.MSI1010=jn.MSI11=jn.MSI10=jn.MSI=void 0;var zq=ws,Fq=Du(zq),$q=B_,qq=Du($q),Hq=z_,Gq=Du(Hq),Yq=F_,Wq=Du(Yq),Kq=$_,Qq=Du(Kq);function Du(t){return t&&t.__esModule?t:{default:t}}jn.MSI=Fq.default;jn.MSI10=qq.default;jn.MSI11=Gq.default;jn.MSI1010=Wq.default;jn.MSI1110=Qq.default;var Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});Tm.pharmacode=void 0;var Xq=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Jq=Gt,Zq=eH(Jq);function eH(t){return t&&t.__esModule?t:{default:t}}function tH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nH(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function rH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var aH=function(t){rH(e,t);function e(n,r){tH(this,e);var a=nH(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return a.number=parseInt(n,10),a}return Xq(e,[{key:"encode",value:function(){for(var r=this.number,a="";!isNaN(r)&&r!=0;)r%2===0?(a="11100"+a,r=(r-2)/2):(a="100"+a,r=(r-1)/2);return a=a.slice(0,-2),{data:a,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(Zq.default);Tm.pharmacode=aH;var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.codabar=void 0;var iH=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),sH=Gt,oH=lH(sH);function lH(t){return t&&t.__esModule?t:{default:t}}function cH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uH(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function dH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var hH=function(t){dH(e,t);function e(n,r){cH(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var a=uH(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),r));return a.text=a.options.text||a.text.replace(/[A-D]/g,""),a}return iH(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],a=this.getEncodings(),i=0;i<this.data.length;i++)r.push(a[this.data.charAt(i)]),i!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(oH.default);Sm.codabar=hH;var Bo={},Nm={},Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""];Iu.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Iu.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(Nm,"__esModule",{value:!0});var fH=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Td=Iu,mH=Gt,pH=gH(mH);function gH(t){return t&&t.__esModule?t:{default:t}}function yH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vH(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _H(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bH=function(t){_H(e,t);function e(n,r){return yH(this,e),vH(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return fH(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.data.split("").flatMap(function(o){return Td.MULTI_SYMBOLS[o]||o}),a=r.map(function(o){return e.getEncoding(o)}).join(""),i=e.checksum(r,20),s=e.checksum(r.concat(i),15);return{text:this.text,data:e.getEncoding("")+a+e.getEncoding(i)+e.getEncoding(s)+e.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(r){return Td.BINARIES[e.symbolValue(r)]}},{key:"getSymbol",value:function(r){return Td.SYMBOLS[r]}},{key:"symbolValue",value:function(r){return Td.SYMBOLS.indexOf(r)}},{key:"checksum",value:function(r,a){var i=r.slice().reverse().reduce(function(s,o,u){var d=u%a+1;return s+e.symbolValue(o)*d},0);return e.getSymbol(i%47)}}]),e}(pH.default);Nm.default=bH;var q_={};Object.defineProperty(q_,"__esModule",{value:!0});var xH=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),wH=Nm,EH=TH(wH);function TH(t){return t&&t.__esModule?t:{default:t}}function SH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NH(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function AH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var CH=function(t){AH(e,t);function e(n,r){return SH(this,e),NH(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return xH(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(EH.default);q_.default=CH;Object.defineProperty(Bo,"__esModule",{value:!0});Bo.CODE93FullASCII=Bo.CODE93=void 0;var RH=Nm,DH=xD(RH),IH=q_,OH=xD(IH);function xD(t){return t&&t.__esModule?t:{default:t}}Bo.CODE93=DH.default;Bo.CODE93FullASCII=OH.default;var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.GenericBarcode=void 0;var jH=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),kH=Gt,MH=PH(kH);function PH(t){return t&&t.__esModule?t:{default:t}}function LH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VH(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function UH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var BH=function(t){UH(e,t);function e(n,r){return LH(this,e),VH(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r))}return jH(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(MH.default);Am.GenericBarcode=BH;Object.defineProperty(A_,"__esModule",{value:!0});var zH=bm,Sd=fr,Ms=Jt,$E=Uo,Wl=jn,FH=Tm,$H=Sm,qE=Bo,qH=Am;A_.default={CODE39:zH.CODE39,CODE128:Sd.CODE128,CODE128A:Sd.CODE128A,CODE128B:Sd.CODE128B,CODE128C:Sd.CODE128C,EAN13:Ms.EAN13,EAN8:Ms.EAN8,EAN5:Ms.EAN5,EAN2:Ms.EAN2,UPC:Ms.UPC,UPCE:Ms.UPCE,ITF14:$E.ITF14,ITF:$E.ITF,MSI:Wl.MSI,MSI10:Wl.MSI10,MSI11:Wl.MSI11,MSI1010:Wl.MSI1010,MSI1110:Wl.MSI1110,pharmacode:FH.pharmacode,codabar:$H.codabar,CODE93:qE.CODE93,CODE93FullASCII:qE.CODE93FullASCII,GenericBarcode:qH.GenericBarcode};var dl={};Object.defineProperty(dl,"__esModule",{value:!0});var HH=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};dl.default=function(t,e){return HH({},t,e)};var H_={};Object.defineProperty(H_,"__esModule",{value:!0});H_.default=GH;function GH(t){var e=[];function n(r){if(Array.isArray(r))for(var a=0;a<r.length;a++)n(r[a]);else r.text=r.text||"",r.data=r.data||"",e.push(r)}return n(t),e}var G_={};Object.defineProperty(G_,"__esModule",{value:!0});G_.default=YH;function YH(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Y_={},W_={},Cm={};Object.defineProperty(Cm,"__esModule",{value:!0});Cm.default=WH;function WH(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});var KH={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Rm.default=KH;Object.defineProperty(W_,"__esModule",{value:!0});var QH=Cm,XH=wD(QH),JH=Rm,HE=wD(JH);function wD(t){return t&&t.__esModule?t:{default:t}}function ZH(t){var e={};for(var n in HE.default)HE.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,XH.default)(e),e}W_.default=ZH;var K_={},Q_={},hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.getTotalWidthOfEncodings=hn.calculateEncodingAttributes=hn.getBarcodePadding=hn.getEncodingHeight=hn.getMaximumHeightOfEncodings=void 0;var eG=dl,tG=nG(eG);function nG(t){return t&&t.__esModule?t:{default:t}}function ED(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function TD(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center")return Math.floor((t-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(t-e)}return 0}function rG(t,e,n){for(var r=0;r<t.length;r++){var a=t[r],i=(0,tG.default)(e,a.options),s;i.displayValue?s=sG(a.text,i,n):s=0;var o=a.data.length*i.width;a.width=Math.ceil(Math.max(s,o)),a.height=ED(a,i),a.barcodePadding=TD(s,o,i)}}function aG(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}function iG(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e}function sG(t,e,n){var r;if(n)r=n;else if(typeof document<"u")r=document.createElement("canvas").getContext("2d");else return 0;r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var a=r.measureText(t);if(!a)return 0;var i=a.width;return i}hn.getMaximumHeightOfEncodings=iG;hn.getEncodingHeight=ED;hn.getBarcodePadding=TD;hn.calculateEncodingAttributes=rG;hn.getTotalWidthOfEncodings=aG;Object.defineProperty(Q_,"__esModule",{value:!0});var oG=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),lG=dl,cG=uG(lG),eg=hn;function uG(t){return t&&t.__esModule?t:{default:t}}function dG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var hG=function(){function t(e,n,r){dG(this,t),this.canvas=e,this.encodings=n,this.options=r}return oG(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var n=0;n<this.encodings.length;n++){var r=(0,cG.default)(this.options,this.encodings[n].options);this.drawCanvasBarcode(r,this.encodings[n]),this.drawCanvasText(r,this.encodings[n]),this.moveCanvasDrawing(this.encodings[n])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var n=this.canvas.getContext("2d");n.save(),(0,eg.calculateEncodingAttributes)(this.encodings,this.options,n);var r=(0,eg.getTotalWidthOfEncodings)(this.encodings),a=(0,eg.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=a,n.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(n.fillStyle=this.options.background,n.fillRect(0,0,this.canvas.width,this.canvas.height)),n.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(n,r){var a=this.canvas.getContext("2d"),i=r.data,s;n.textPosition=="top"?s=n.marginTop+n.fontSize+n.textMargin:s=n.marginTop,a.fillStyle=n.lineColor;for(var o=0;o<i.length;o++){var u=o*n.width+r.barcodePadding;i[o]==="1"?a.fillRect(u,s,n.width,n.height):i[o]&&a.fillRect(u,s,n.width,n.height*i[o])}}},{key:"drawCanvasText",value:function(n,r){var a=this.canvas.getContext("2d"),i=n.fontOptions+" "+n.fontSize+"px "+n.font;if(n.displayValue){var s,o;n.textPosition=="top"?o=n.marginTop+n.fontSize-n.textMargin:o=n.height+n.textMargin+n.marginTop+n.fontSize,a.font=i,n.textAlign=="left"||r.barcodePadding>0?(s=0,a.textAlign="left"):n.textAlign=="right"?(s=r.width-1,a.textAlign="right"):(s=r.width/2,a.textAlign="center"),a.fillText(r.text,s,o)}}},{key:"moveCanvasDrawing",value:function(n){var r=this.canvas.getContext("2d");r.translate(n.width,0)}},{key:"restoreCanvas",value:function(){var n=this.canvas.getContext("2d");n.restore()}}]),t}();Q_.default=hG;var X_={};Object.defineProperty(X_,"__esModule",{value:!0});var fG=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),mG=dl,pG=gG(mG),tg=hn;function gG(t){return t&&t.__esModule?t:{default:t}}function yG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Nd="http://www.w3.org/2000/svg",vG=function(){function t(e,n,r){yG(this,t),this.svg=e,this.encodings=n,this.options=r,this.document=r.xmlDocument||document}return fG(t,[{key:"render",value:function(){var n=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var a=this.encodings[r],i=(0,pG.default)(this.options,a.options),s=this.createGroup(n,i.marginTop,this.svg);this.setGroupOptions(s,i),this.drawSvgBarcode(s,i,a),this.drawSVGText(s,i,a),n+=a.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,tg.calculateEncodingAttributes)(this.encodings,this.options);var n=(0,tg.getTotalWidthOfEncodings)(this.encodings),r=(0,tg.getMaximumHeightOfEncodings)(this.encodings),a=n+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(a,r),this.options.background&&this.drawRect(0,0,a,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(n,r,a){var i=a.data,s;r.textPosition=="top"?s=r.fontSize+r.textMargin:s=0;for(var o=0,u=0,d=0;d<i.length;d++)u=d*r.width+a.barcodePadding,i[d]==="1"?o++:o>0&&(this.drawRect(u-r.width*o,s,r.width*o,r.height,n),o=0);o>0&&this.drawRect(u-r.width*(o-1),s,r.width*o,r.height,n)}},{key:"drawSVGText",value:function(n,r,a){var i=this.document.createElementNS(Nd,"text");if(r.displayValue){var s,o;i.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?o=r.fontSize-r.textMargin:o=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||a.barcodePadding>0?(s=0,i.setAttribute("text-anchor","start")):r.textAlign=="right"?(s=a.width-1,i.setAttribute("text-anchor","end")):(s=a.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",s),i.setAttribute("y",o),i.appendChild(this.document.createTextNode(a.text)),n.appendChild(i)}}},{key:"setSvgAttributes",value:function(n,r){var a=this.svg;a.setAttribute("width",n+"px"),a.setAttribute("height",r+"px"),a.setAttribute("x","0px"),a.setAttribute("y","0px"),a.setAttribute("viewBox","0 0 "+n+" "+r),a.setAttribute("xmlns",Nd),a.setAttribute("version","1.1"),a.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(n,r,a){var i=this.document.createElementNS(Nd,"g");return i.setAttribute("transform","translate("+n+", "+r+")"),a.appendChild(i),i}},{key:"setGroupOptions",value:function(n,r){n.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(n,r,a,i,s){var o=this.document.createElementNS(Nd,"rect");return o.setAttribute("x",n),o.setAttribute("y",r),o.setAttribute("width",a),o.setAttribute("height",i),s.appendChild(o),o}}]),t}();X_.default=vG;var J_={};Object.defineProperty(J_,"__esModule",{value:!0});var _G=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function bG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var xG=function(){function t(e,n,r){bG(this,t),this.object=e,this.encodings=n,this.options=r}return _G(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();J_.default=xG;Object.defineProperty(K_,"__esModule",{value:!0});var wG=Q_,EG=Z_(wG),TG=X_,SG=Z_(TG),NG=J_,AG=Z_(NG);function Z_(t){return t&&t.__esModule?t:{default:t}}K_.default={CanvasRenderer:EG.default,SVGRenderer:SG.default,ObjectRenderer:AG.default};var hl={};Object.defineProperty(hl,"__esModule",{value:!0});function e1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t1(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function n1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var CG=function(t){n1(e,t);function e(n,r){e1(this,e);var a=t1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidInputException",a.symbology=n,a.input=r,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return e}(Error),RG=function(t){n1(e,t);function e(){e1(this,e);var n=t1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),DG=function(t){n1(e,t);function e(){e1(this,e);var n=t1(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);hl.InvalidInputException=CG;hl.InvalidElementException=RG;hl.NoElementException=DG;Object.defineProperty(Y_,"__esModule",{value:!0});var IG=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OG=W_,Wy=SD(OG),jG=K_,oc=SD(jG),kG=hl;function SD(t){return t&&t.__esModule?t:{default:t}}function r1(t){if(typeof t=="string")return MG(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(r1(t[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return PG(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,Wy.default)(t),renderer:oc.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,Wy.default)(t),renderer:oc.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:oc.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":IG(t))==="object"&&!t.nodeName)return{element:t,renderer:oc.default.ObjectRenderer};throw new kG.InvalidElementException}}function MG(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var n=[],r=0;r<e.length;r++)n.push(r1(e[r]));return n}}function PG(t){var e=document.createElement("canvas");return{element:e,options:(0,Wy.default)(t),renderer:oc.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Y_.default=r1;var a1={};Object.defineProperty(a1,"__esModule",{value:!0});var LG=function(){function t(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function VG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var UG=function(){function t(e){VG(this,t),this.api=e}return LG(t,[{key:"handleCatch",value:function(n){if(n.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw n.message;else throw n;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(n){try{var r=n.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(a){return this.handleCatch(a),this.api}}}]),t}();a1.default=UG;var BG=A_,Wi=_i(BG),zG=dl,Ou=_i(zG),FG=H_,ND=_i(FG),$G=G_,GE=_i($G),qG=Y_,HG=_i(qG),GG=Cm,YG=_i(GG),WG=a1,KG=_i(WG),AD=hl,QG=Rm,CD=_i(QG);function _i(t){return t&&t.__esModule?t:{default:t}}var Gr=function(){},Dm=function(e,n,r){var a=new Gr;if(typeof e>"u")throw Error("No element to render on was provided.");return a._renderProperties=(0,HG.default)(e),a._encodings=[],a._options=CD.default,a._errorHandler=new KG.default(a),typeof n<"u"&&(r=r||{},r.format||(r.format=DD()),a.options(r)[r.format](n,r).render()),a};Dm.getModule=function(t){return Wi.default[t]};for(var YE in Wi.default)Wi.default.hasOwnProperty(YE)&&XG(Wi.default,YE);function XG(t,e){Gr.prototype[e]=Gr.prototype[e.toUpperCase()]=Gr.prototype[e.toLowerCase()]=function(n,r){var a=this;return a._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text>"u"?void 0:""+r.text;var i=(0,Ou.default)(a._options,r);i=(0,YG.default)(i);var s=t[e],o=RD(n,s,i);return a._encodings.push(o),a})}}function RD(t,e,n){t=""+t;var r=new e(t,n);if(!r.valid())throw new AD.InvalidInputException(r.constructor.name,t);var a=r.encode();a=(0,ND.default)(a);for(var i=0;i<a.length;i++)a[i].options=(0,Ou.default)(n,a[i].options);return a}function DD(){return Wi.default.CODE128?"CODE128":Object.keys(Wi.default)[0]}Gr.prototype.options=function(t){return this._options=(0,Ou.default)(this._options,t),this};Gr.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};Gr.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,Ou.default)(this._options,t.options);n.format=="auto"&&(n.format=DD()),this._errorHandler.wrapBarcodeCall(function(){var r=n.value,a=Wi.default[n.format.toUpperCase()],i=RD(r,a,n);Ky(t,i,n)})}}};Gr.prototype.render=function(){if(!this._renderProperties)throw new AD.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)Ky(this._renderProperties[t],this._encodings,this._options);else Ky(this._renderProperties,this._encodings,this._options);return this};Gr.prototype._defaults=CD.default;function Ky(t,e,n){e=(0,ND.default)(e);for(var r=0;r<e.length;r++)e[r].options=(0,Ou.default)(n,e[r].options),(0,GE.default)(e[r].options);(0,GE.default)(n);var a=t.renderer,i=new a(t.element,e,n);i.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=Dm);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),Dm(n,t,e)});var JG=Dm;function th(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?th=function(n){return typeof n}:th=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},th(t)}var $s=i1(R),ZG=i1(JG),Ye=i1(rD);function i1(t){return t&&t.__esModule?t:{default:t}}function eY(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nY(t,e,n){return e&&tY(t.prototype,e),t}function rY(t,e){return e&&(th(e)==="object"||typeof e=="function")?e:ID(t)}function Qy(t){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qy(t)}function ID(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xy(t,e)}function Xy(t,e){return Xy=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Xy(t,e)}var Jy,ng=$s.default.version.split(/[.-]/);ng[0]==="0"&&(ng[1]==="13"||ng[1]==="12")?Jy=function(e){return e.getDOMNode()}:Jy=function(e){return e};var s1=function(t){aY(e,t);function e(n){var r;return eY(this,e),r=rY(this,Qy(e).call(this,n)),r.renderElementRef=$s.default.createRef(),r.update=r.update.bind(ID(r)),r}return nY(e,[{key:"shouldComponentUpdate",value:function(r){var a=this;return Object.keys(e.propTypes).some(function(i){return a.props[i]!==r[i]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var r=Jy(this.renderElementRef.current);try{new ZG.default(r,this.props.value,Object.assign({text:this.props.text||this.props.value},this.props))}catch(a){window.console.error(a)}}},{key:"render",value:function(){var r=this.props,a=r.id,i=r.className;if(this.props.renderer==="svg")return $s.default.createElement("svg",{ref:this.renderElementRef,id:a,className:i});if(this.props.renderer==="canvas")return $s.default.createElement("canvas",{ref:this.renderElementRef,id:a,className:i});if(this.props.renderer==="img")return $s.default.createElement("img",{ref:this.renderElementRef,id:a,className:i})}}]),e}($s.default.Component);s1.propTypes={value:Ye.default.string.isRequired,text:Ye.default.string,renderer:Ye.default.string,format:Ye.default.string,width:Ye.default.number,height:Ye.default.number,displayValue:Ye.default.bool,fontOptions:Ye.default.string,font:Ye.default.string,textAlign:Ye.default.string,textPosition:Ye.default.string,textMargin:Ye.default.number,fontSize:Ye.default.number,background:Ye.default.string,lineColor:Ye.default.string,margin:Ye.default.number,marginTop:Ye.default.number,marginBottom:Ye.default.number,marginLeft:Ye.default.number,marginRight:Ye.default.number,id:Ye.default.string,className:Ye.default.string,ean128:Ye.default.bool};s1.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,className:"",ean128:!1};var iY=s1;const sY=sf(iY),oY=({onClose:t})=>{const[e,n]=R.useState({recipientName:"",senderName:"",amount:"",message:"",expiryDate:""}),[r,a]=R.useState(!1),[i,s]=R.useState(!1),[o,u]=R.useState(""),d=(p,y)=>{n(w=>({...w,[p]:y}))},h=()=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let y="GC";for(let w=0;w<10;w++)y+=p.charAt(Math.floor(Math.random()*p.length));return y},f=async p=>{if(p.preventDefault(),!e.recipientName||!e.senderName||!e.amount||!e.expiryDate){alert("Please fill in all required fields");return}a(!0);try{const y=h(),w={recipientName:e.recipientName,senderName:e.senderName,amount:parseFloat(e.amount),message:e.message||"Wishing you wonderful adventures!",expiryDate:fe.fromDate(new Date(e.expiryDate)),createdAt:fe.now(),redeemed:!1,barcodeId:y};await um(la(Et,"giftCards"),w),u(y),s(!0),setTimeout(()=>{t()},3e3)}catch(y){console.error("Error creating gift card:",y),alert("Failed to create gift card. Please try again."),a(!1)}};return i?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 text-center",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Yn,{className:"w-8 h-8 text-green-600"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Gift Card Created!"}),l.jsx("p",{className:"text-gray-600",children:"Your gift card has been generated successfully"})]}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-4",children:l.jsx(sY,{value:o,width:2,height:80,fontSize:14,background:"#F9FAFB"})}),l.jsx("p",{className:"text-sm text-gray-500",children:"Closing in a moment..."})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Yn,{className:"w-6 h-6",style:{color:P.primary.teal}}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Gift Card"})]}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(hs,{className:"w-6 h-6"})})]}),l.jsxs("form",{onSubmit:f,className:"p-6",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Do,{className:"w-4 h-4"}),"Recipient Name *"]}),l.jsx("input",{type:"text",value:e.recipientName,onChange:p=>d("recipientName",p.target.value),placeholder:"Who is this gift card for?",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Do,{className:"w-4 h-4"}),"Your Name (Sender) *"]}),l.jsx("input",{type:"text",value:e.senderName,onChange:p=>d("senderName",p.target.value),placeholder:"Your name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(mu,{className:"w-4 h-4"}),"Gift Card Amount *"]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),l.jsx("input",{type:"number",min:"1",step:"0.01",value:e.amount,onChange:p=>d("amount",p.target.value),placeholder:"100.00",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(wN,{className:"w-4 h-4"}),"Personal Message (Optional)"]}),l.jsx("textarea",{value:e.message,onChange:p=>d("message",p.target.value),placeholder:"Write a personalized message for the recipient...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent resize-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[l.jsx(Pa,{className:"w-4 h-4"}),"Expiry Date *"]}),l.jsx("input",{type:"date",value:e.expiryDate,onChange:p=>d("expiryDate",p.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",required:!0})]}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Note:"})," A unique barcode will be generated for this gift card. The recipient will receive a shareable link with a beautiful reveal animation."]})})]}),l.jsxs("div",{className:"flex gap-3 mt-8",children:[l.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:r,style:{backgroundColor:P.primary.teal},className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:r?l.jsxs(l.Fragment,{children:[l.jsx(oM,{className:"w-5 h-5 animate-spin"}),l.jsx("span",{children:"Creating..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Yn,{className:"w-5 h-5"}),l.jsx("span",{children:"Create Gift Card"})]})})]})]})]})})},lY=({giftCard:t,onClose:e,onUpdate:n})=>{const[r,a]=R.useState(!1),[i,s]=R.useState({amountToUse:"",tripName:"",tripDate:new Date().toISOString().split("T")[0],numberOfPeople:"1",notes:""}),o=t.remainingBalance!==void 0?t.remainingBalance:t.amount,u=async d=>{d.preventDefault(),a(!0);try{const h=parseFloat(i.amountToUse);if(h<=0||h>o){alert(`Invalid amount. Must be between $1 and $${o}`),a(!1);return}const f=o-h,p=f===0,y={date:fe.fromDate(new Date(i.tripDate)),tripName:i.tripName,numberOfPeople:parseInt(i.numberOfPeople),amountUsed:h,remainingAfter:f,notes:i.notes,usedAt:fe.now()},w=wr(Et,"giftCards",t.id);await cm(w,{remainingBalance:f,redeemed:p,redeemedAt:p?fe.now():t.redeemedAt,usageHistory:o9(y)}),n&&n(),e(),alert(`Gift card updated successfully! Remaining balance: $${f.toFixed(2)}`)}catch(h){console.error("Error updating gift card:",h),alert("Failed to update gift card. Please try again.")}finally{a(!1)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"p-6 text-white relative",style:{backgroundColor:P.primary.teal},children:[l.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:l.jsx(hs,{className:"w-5 h-5"})}),l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Use Gift Card"}),l.jsx("p",{className:"opacity-90",children:t.recipientName})]}),l.jsx("div",{className:"p-6 bg-gray-50 border-b",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Original Amount"}),l.jsxs("p",{className:"text-2xl font-bold",style:{color:P.primary.teal},children:["$",t.amount]})]}),l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Balance"}),l.jsxs("p",{className:"text-2xl font-bold",style:{color:P.primary.teal},children:["$",o.toFixed(2)]})]})]})}),l.jsxs("form",{onSubmit:u,className:"p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Use *"}),l.jsxs("div",{className:"relative",children:[l.jsx(mu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"number",value:i.amountToUse,onChange:d=>s({...i,amountToUse:d.target.value}),min:"0.01",max:o,step:"0.01",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",placeholder:"Enter amount...",required:!0})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: $",o.toFixed(2)]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Name *"}),l.jsxs("div",{className:"relative",children:[l.jsx(ny,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:i.tripName,onChange:d=>s({...i,tripName:d.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",placeholder:"e.g., Niagara Falls Tour",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trip Date *"}),l.jsxs("div",{className:"relative",children:[l.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"date",value:i.tripDate,onChange:d=>s({...i,tripDate:d.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of People *"}),l.jsxs("div",{className:"relative",children:[l.jsx(cv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"number",value:i.numberOfPeople,onChange:d=>s({...i,numberOfPeople:d.target.value}),min:"1",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),l.jsx("textarea",{value:i.notes,onChange:d=>s({...i,notes:d.target.value}),rows:"3",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent resize-vertical",placeholder:"Any additional notes..."})]}),i.amountToUse&&!isNaN(parseFloat(i.amountToUse))&&l.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsx("p",{className:"text-sm font-medium text-blue-900",children:"After this transaction:"}),l.jsxs("p",{className:"text-lg font-bold text-blue-700",children:["Remaining Balance: $",(o-parseFloat(i.amountToUse)).toFixed(2)]}),o-parseFloat(i.amountToUse)===0&&l.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"This will fully redeem the gift card."})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:r,className:"flex-1 px-6 py-3 text-white rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:P.primary.teal},children:r?"Processing...":"Use Gift Card"})]})]}),t.usageHistory&&t.usageHistory.length>0&&l.jsxs("div",{className:"p-6 border-t bg-gray-50",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Usage History"}),l.jsx("div",{className:"space-y-3",children:t.usageHistory.map((d,h)=>{var f,p;return l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-900",children:d.tripName}),l.jsxs("p",{className:"text-sm text-gray-600",children:[((p=(f=d.date)==null?void 0:f.toDate)==null?void 0:p.call(f).toLocaleDateString())||new Date(d.date).toLocaleDateString(),"  ",d.numberOfPeople," ",d.numberOfPeople===1?"person":"people"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"font-bold text-red-600",children:["-$",d.amountUsed.toFixed(2)]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Balance: $",d.remainingAfter.toFixed(2)]})]})]}),d.notes&&l.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:d.notes})]},h)})})]})]})})},cY=()=>{const{language:t}=sa(),e=ll[t],[n,r]=R.useState([]),[a,i]=R.useState(!1),[s,o]=R.useState(!1),[u,d]=R.useState(null),[h,f]=R.useState(!0),[p,y]=R.useState(null),[w,N]=R.useState(null),[A,_]=R.useState("all");R.useEffect(()=>{const v=om(la(Et,"giftCards"),r9("createdAt","desc")),b=$C(v,C=>{const O=C.docs.map(j=>({id:j.id,...j.data()}));r(O),f(!1)});return()=>b()},[]);const x=v=>{const b=`${window.location.origin}/PlanYourTripNow/gift/${v}`;navigator.clipboard.writeText(b),y(v),setTimeout(()=>y(null),2e3)},E=async v=>{if(confirm(e.deleteConfirmGiftCard)){N(v);try{await c_(wr(Et,"giftCards",v))}catch(b){console.error("Error deleting gift card:",b),alert(e.failedToDeleteGiftCard)}finally{N(null)}}},V=(()=>{const v=new Date;return A==="all"?n:n.filter(b=>{var Y,k;const C=((k=(Y=b.expiryDate)==null?void 0:Y.toDate)==null?void 0:k.call(Y))||new Date(b.expiryDate),j=(b.remainingBalance!==void 0?b.remainingBalance:b.amount)===0,D=b.usageHistory&&b.usageHistory.length>0,ie=C<v;return A==="redeemed"?j:A==="used"?D&&!j:A==="expired"?!j&&ie:A==="active"?!j&&!ie&&!D:A==="viewed"?b.viewed&&!D&&!j:!0})})(),q=v=>{var Y,k;const C=(v.remainingBalance!==void 0?v.remainingBalance:v.amount)===0,O=v.usageHistory&&v.usageHistory.length>0,ie=(((k=(Y=v.expiryDate)==null?void 0:Y.toDate)==null?void 0:k.call(Y))||new Date(v.expiryDate))<new Date;return C?{bg:"#D1FAE5",text:"#065F46",label:e.statusFullyUsed}:O?{bg:"#FEF3C7",text:"#92400E",label:e.statusPartiallyUsed}:ie?{bg:"#FEE2E2",text:"#991B1B",label:e.statusExpired}:v.viewed?{bg:"#E0E7FF",text:"#4338CA",label:e.statusViewed}:{bg:"#DBEAFE",text:"#1E40AF",label:e.statusActive}},S=v=>{d(v),o(!0)};return l.jsxs("div",{className:"min-h-screen bg-gray-100",children:[l.jsx(vm,{}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[l.jsx(Yn,{className:"w-8 h-8",style:{color:P.primary.teal}}),e.giftCards]}),l.jsx("p",{className:"text-gray-600 mt-1",children:e.giftCardsDesc})]}),l.jsxs("button",{onClick:()=>i(!0),style:{backgroundColor:P.primary.teal},className:"flex items-center gap-1.5 px-3 py-2 text-white text-sm rounded-lg hover:opacity-90 transition-opacity shadow-lg",children:[l.jsx(TN,{className:"w-4 h-4"}),l.jsx("span",{children:e.createGiftCard})]})]}),l.jsx("div",{className:"mb-6 flex gap-2 flex-wrap",children:["all","active","viewed","used","expired"].map(v=>{const b=`filter${v.charAt(0).toUpperCase()+v.slice(1)}`;return l.jsx("button",{onClick:()=>_(v),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${A===v?"text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,style:A===v?{backgroundColor:P.primary.teal}:{},children:e[b]},v)})}),h?l.jsx("div",{className:"text-center py-12",children:l.jsx("div",{className:"text-gray-500",children:e.loadingGiftCards})}):V.length===0?l.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[l.jsx(Yn,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),l.jsx("p",{className:"text-gray-500 text-lg mb-4",children:A==="all"?e.noGiftCardsYet:`${e[`filter${A.charAt(0).toUpperCase()+A.slice(1)}`]} ${e.noFilteredGiftCards}`}),l.jsx("button",{onClick:()=>i(!0),className:"text-blue-600 hover:text-blue-700 font-medium",children:e.createFirstGiftCard})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(v=>{var C,O,j,D,ie,Y;const b=q(v);return l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow border-2",style:{borderColor:P.primary.teal},children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900 flex-1",children:v.recipientName}),l.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:b.bg,color:b.text},children:b.label})]}),l.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:v.message}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(mu,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-gray-700",children:v.remainingBalance!==void 0&&v.remainingBalance!==v.amount?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-semibold",style:{color:P.primary.teal},children:["$",v.remainingBalance.toFixed(2)]}),l.jsxs("span",{className:"text-gray-500",children:[" / $",v.amount]}),l.jsxs("span",{className:"text-xs ml-1",children:["(",e.remaining,")"]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"font-semibold",children:["$",v.amount]})," ",e.value]})})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Pa,{className:"w-4 h-4 text-gray-400"}),l.jsxs("span",{className:"text-gray-700",children:[e.expires,": ",((O=(C=v.expiryDate)==null?void 0:C.toDate)==null?void 0:O.call(C).toLocaleDateString())||new Date(v.expiryDate).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx(Do,{className:"w-4 h-4 text-gray-400"}),l.jsxs("span",{className:"text-gray-700",children:[e.from,": ",v.senderName]})]})]}),v.remainingBalance===0&&l.jsx("div",{className:"mb-4 p-2 bg-green-50 rounded-lg",children:l.jsxs("p",{className:"text-xs text-green-700",children:[e.fullyUsedOn," ",v.usageHistory&&v.usageHistory.length>0&&v.usageHistory[v.usageHistory.length-1].usedAt?`${e.on} ${((D=(j=v.usageHistory[v.usageHistory.length-1].usedAt).toDate)==null?void 0:D.call(j).toLocaleDateString())||new Date(v.usageHistory[v.usageHistory.length-1].usedAt).toLocaleDateString()}`.trim():""]})}),v.usageHistory&&v.usageHistory.length>0&&v.remainingBalance!==0&&l.jsx("div",{className:"mb-4 p-2 bg-yellow-50 rounded-lg",children:l.jsxs("p",{className:"text-xs text-yellow-800 font-medium",children:[e.usedTimes," ",v.usageHistory.length," ",v.usageHistory.length>1?e.times:e.time]})}),v.viewed&&(!v.usageHistory||v.usageHistory.length===0)&&v.remainingBalance!==0&&l.jsx("div",{className:"mb-4 p-2 bg-indigo-50 rounded-lg",children:l.jsxs("p",{className:"text-xs text-indigo-700",children:[e.viewedOn," ",((Y=(ie=v.viewedAt)==null?void 0:ie.toDate)==null?void 0:Y.call(ie).toLocaleDateString())||new Date(v.viewedAt).toLocaleDateString()]})}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[(v.remainingBalance===void 0||v.remainingBalance>0)&&l.jsxs("button",{onClick:()=>S(v),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",style:{backgroundColor:P.primary.teal},children:[l.jsx(Rf,{className:"w-4 h-4"}),l.jsx("span",{children:e.use})]}),l.jsx("button",{onClick:()=>x(v.id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",style:{backgroundColor:p===v.id?P.success:P.primary.teal},children:p===v.id?l.jsxs(l.Fragment,{children:[l.jsx(Cf,{className:"w-4 h-4"}),l.jsx("span",{children:e.copied})]}):l.jsxs(l.Fragment,{children:[l.jsx(ov,{className:"w-4 h-4"}),l.jsx("span",{children:e.share})]})}),l.jsxs("a",{href:`/PlanYourTripNow/gift/${v.id}`,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:P.primary.black},className:"flex items-center justify-center gap-2 px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm",children:[l.jsx(Z4,{className:"w-4 h-4"}),l.jsx("span",{children:e.viewCard})]}),l.jsx("button",{onClick:()=>E(v.id),disabled:w===v.id,style:{backgroundColor:P.button.danger},className:"flex items-center justify-center px-3 py-2 text-white rounded-lg hover:opacity-90 transition-opacity text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:e.deleteGiftCard,children:l.jsx(Df,{className:"w-4 h-4"})})]})]},v.id)})})]}),a&&l.jsx(oY,{onClose:()=>i(!1)}),s&&u&&l.jsx(lY,{giftCard:u,onClose:()=>{o(!1),d(null)},onUpdate:()=>{}})]})},uY="/PlanYourTripNow/assets/giftcardimage-D1Kx7eDk.png",dY=()=>{var x,E;const{giftCardId:t}=lN(),[e,n]=R.useState(null),[r,a]=R.useState(!0),[i,s]=R.useState(null),[o,u]=R.useState(!1),[d,h]=R.useState(!1),[f,p]=R.useState("en"),w={en:{loadingGift:"Loading your gift...",oops:"Oops!",youGotGift:"You've Got a Gift!",clickToReveal:"Click the gift box to reveal your surprise",congratulations:"Congratulations!",receivedGiftCard:"You've received a gift card",dear:"Dear",from:"From",expires:"Expires",giftCardCode:"Gift Card Code",presentCode:"Present this code when booking your trip",expired:"This gift card has expired",revealed:"Gift card revealed! Contact us to redeem.",readyToUse:"Ready to use! Contact us to book your amazing trip.",contactInfo:"Contact: 647-302-6849 or visit www.ivritours.com"},ru:{loadingGift:"  ...",oops:"!",youGotGift:"   !",clickToReveal:"   ,   ",congratulations:"!",receivedGiftCard:"   ",dear:"",from:"",expires:" ",giftCardCode:"  ",presentCode:"      ",expired:"     ",revealed:"  !   ,  .",readyToUse:"  !   ,     .",contactInfo:": 647-302-6849   www.ivritours.com"}}[f];R.useEffect(()=>{(async()=>{try{const V=wr(Et,"giftCards",t),q=await FC(V);q.exists()?n({id:q.id,...q.data()}):s("Gift card not found")}catch(V){console.error("Error fetching gift card:",V),s("Failed to load gift card")}finally{a(!1)}})()},[t]);const N=async()=>{if(u(!0),h(!0),e&&!e.viewed)try{const I=wr(Et,"giftCards",t);await cm(I,{viewed:!0,viewedAt:fe.now()}),n(V=>({...V,viewed:!0,viewedAt:new Date}))}catch(I){console.error("Error marking gift card as viewed:",I)}setTimeout(()=>h(!1),5e3)};if(r)return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Yn,{className:"w-16 h-16 mx-auto mb-4 text-purple-600 animate-pulse"}),l.jsx("p",{className:"text-xl text-gray-700",children:w.loadingGift})]})});if(i)return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Yn,{className:"w-10 h-10 text-red-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:w.oops}),l.jsx("p",{className:"text-gray-600",children:i})]})});const A=((E=(x=e.expiryDate)==null?void 0:x.toDate)==null?void 0:E.call(x))||new Date(e.expiryDate),_=A<new Date;return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-4 right-4 z-50",children:l.jsxs("button",{onClick:()=>p(f==="en"?"ru":"en"),className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-lg hover:shadow-xl transition-all",style:{color:P.primary.teal},children:[l.jsx(xN,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:f==="en"?"RU":"EN"})]})}),d&&l.jsx("div",{className:"confetti-container",children:[...Array(50)].map((I,V)=>l.jsx("div",{className:"confetti",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,backgroundColor:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*5)]}},V))}),o?l.jsx("div",{className:"gift-card-reveal max-w-2xl w-full",children:l.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[l.jsxs("div",{className:"p-8 text-white text-center relative overflow-hidden",style:{backgroundColor:P.primary.teal},children:[l.jsx("div",{className:"absolute inset-0 opacity-10",children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white to-transparent"})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx(yM,{className:"w-16 h-16 mx-auto mb-4"}),l.jsx("h1",{className:"text-4xl font-bold mb-2",children:w.congratulations}),l.jsx("p",{className:"text-xl opacity-90",children:w.receivedGiftCard})]})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("p",{className:"text-gray-600 mb-2",children:w.dear}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:e.recipientName}),l.jsxs("div",{className:"inline-block px-8 py-4 rounded-2xl text-white mb-6",style:{backgroundColor:P.primary.teal},children:[l.jsx(mu,{className:"w-8 h-8 inline-block mb-1"}),l.jsx("span",{className:"text-5xl font-bold",children:e.amount})]})]}),e.message&&l.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 mb-8",children:[l.jsxs("p",{className:"text-gray-700 text-lg italic text-center leading-relaxed",children:['"',e.message,'"']}),l.jsxs("p",{className:"text-gray-600 text-right mt-4",children:["- ",e.senderName]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex items-center gap-3",children:[l.jsx(Do,{className:"w-5 h-5 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:w.from}),l.jsx("p",{className:"font-semibold text-gray-900",children:e.senderName})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 flex items-center gap-3",children:[l.jsx(Pa,{className:"w-5 h-5 text-gray-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500",children:w.expires}),l.jsx("p",{className:"font-semibold text-gray-900",children:A.toLocaleDateString()})]})]})]}),l.jsx("div",{className:"bg-white border-4 rounded-2xl p-4 mb-6",style:{borderColor:P.primary.teal},children:l.jsx("img",{src:uY,alt:"IVRI Tours - Best Tours in Canada",className:"w-full rounded-lg shadow-lg"})}),l.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 border-2 rounded-2xl p-6 text-center",style:{borderColor:P.primary.teal},children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:w.giftCardCode}),l.jsx("p",{className:"text-3xl font-bold tracking-wider mb-3",style:{color:P.primary.teal},children:e.barcodeId}),l.jsx("p",{className:"text-xs text-gray-600",children:w.presentCode})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("p",{className:"text-sm font-medium text-gray-700",children:w.contactInfo})}),_&&l.jsx("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-xl p-4 text-center",children:l.jsx("p",{className:"text-red-700 font-medium",children:w.expired})}),e.redeemed&&!_&&l.jsx("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-xl p-4 text-center",children:l.jsx("p",{className:"text-green-700 font-medium",children:w.revealed})}),!_&&!e.redeemed&&l.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4 text-center",children:l.jsx("p",{className:"text-blue-700 font-medium",children:w.readyToUse})})]})]})}):l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"gift-box-container mb-8",onClick:N,children:l.jsxs("div",{className:"gift-box",children:[l.jsx("div",{className:"gift-box-lid",children:l.jsx("div",{className:"gift-ribbon-horizontal"})}),l.jsx("div",{className:"gift-box-body",children:l.jsx("div",{className:"gift-ribbon-vertical"})})]})}),l.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4 flex items-center justify-center gap-3",children:[l.jsx(Ex,{className:"w-8 h-8 text-yellow-500"}),w.youGotGift,l.jsx(Ex,{className:"w-8 h-8 text-yellow-500"})]}),l.jsx("p",{className:"text-xl text-gray-700 mb-8",children:w.clickToReveal}),l.jsx("div",{className:"animate-bounce",children:l.jsx(Yn,{className:"w-12 h-12 mx-auto text-purple-600"})})]})]})},hY=()=>{const t=ds(),[e,n]=R.useState("en"),[r,a]=R.useState(1),[i,s]=R.useState(!1),[o,u]=R.useState({amount:"100",recipientName:"",recipientEmail:"",senderName:"",senderEmail:"",message:"",paymentMethod:"credit-card"}),h={en:{title:"Purchase Gift Card",subtitle:"Give the gift of amazing travel experiences",step1:"Gift Details",step2:"Payment",amount:"Gift Card Amount",recipientName:"Recipient's Name",recipientEmail:"Recipient's Email",senderName:"Your Name",senderEmail:"Your Email",message:"Personal Message (Optional)",messagePlaceholder:"Write a personal message for the recipient...",paymentMethod:"Payment Method",creditCard:"Credit / Debit Card",paypal:"PayPal",back:"Back",continue:"Continue",purchaseNow:"Purchase Gift Card",processing:"Processing...",customAmount:"Custom Amount",presetAmounts:"Preset Amounts",cardDetails:"Card Details",cardNumber:"Card Number",expiryDate:"Expiry Date",cvv:"CVV",billingAddress:"Billing Address",fullName:"Full Name on Card",country:"Country",zipCode:"ZIP / Postal Code",paypalInfo:"You will be redirected to PayPal to complete your purchase",securePayment:"Secure Payment Processing",terms:"By purchasing, you agree to our terms and conditions"},ru:{title:"  ",subtitle:"  ",step1:" ",step2:"",amount:"  ",recipientName:" ",recipientEmail:"Email ",senderName:" ",senderEmail:" Email",message:"  ()",messagePlaceholder:"    ...",paymentMethod:" ",creditCard:" /  ",paypal:"PayPal",back:"",continue:"",purchaseNow:"  ",processing:"...",customAmount:" ",presetAmounts:" ",cardDetails:" ",cardNumber:" ",expiryDate:" ",cvv:"CVV",billingAddress:" ",fullName:"   ",country:"",zipCode:" ",paypalInfo:"    PayPal   ",securePayment:"  ",terms:" ,     "}}[e],f=[50,100,150,200,300,500],p=w=>{w.preventDefault(),a(2)},y=async w=>{w.preventDefault(),s(!0);try{const N=`IVRI${Date.now()}${Math.random().toString(36).substr(2,9).toUpperCase()}`,A=new Date;A.setFullYear(A.getFullYear()+1);const _={amount:parseFloat(o.amount),recipientName:o.recipientName,recipientEmail:o.recipientEmail,senderName:o.senderName,senderEmail:o.senderEmail,message:o.message,barcodeId:N,expiryDate:fe.fromDate(A),redeemed:!1,createdAt:fe.now(),paymentMethod:o.paymentMethod},x=await um(la(Et,"giftCards"),_);alert(`Gift card created! Link: ${window.location.origin}/PlanYourTripNow/gift/${x.id}

In production, this would be emailed to the recipient.`),t(`/gift/${x.id}`)}catch(N){console.error("Error creating gift card:",N),alert("Failed to create gift card. Please try again.")}finally{s(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100",children:[l.jsx(vm,{showBackButton:!1,showLogout:!1}),l.jsx("div",{className:"absolute top-4 right-4 z-50",children:l.jsxs("button",{onClick:()=>n(e==="en"?"ru":"en"),className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-lg hover:shadow-xl transition-all",style:{color:P.primary.teal},children:[l.jsx(xN,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:e==="en"?"RU":"EN"})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("div",{className:"inline-block p-4 bg-white rounded-full shadow-lg mb-4",children:l.jsx(Yn,{className:"w-16 h-16",style:{color:P.primary.teal}})}),l.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:h.title}),l.jsx("p",{className:"text-xl text-gray-600",children:h.subtitle})]}),l.jsx("div",{className:"flex items-center justify-center mb-12",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:`flex items-center gap-2 px-6 py-3 rounded-lg ${r===1?"text-white":"bg-white text-gray-600"}`,style:r===1?{backgroundColor:P.primary.teal}:{},children:[l.jsx("span",{className:"font-bold",children:"1"}),l.jsx("span",{children:h.step1})]}),l.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded"}),l.jsxs("div",{className:`flex items-center gap-2 px-6 py-3 rounded-lg ${r===2?"text-white":"bg-white text-gray-600"}`,style:r===2?{backgroundColor:P.primary.teal}:{},children:[l.jsx("span",{className:"font-bold",children:"2"}),l.jsx("span",{children:h.step2})]})]})}),l.jsx("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:r===1?l.jsxs("form",{onSubmit:p,className:"p-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6",style:{color:P.primary.teal},children:h.step1}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:h.amount}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.presetAmounts}),l.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3 mb-4",children:f.map(w=>l.jsxs("button",{type:"button",onClick:()=>u({...o,amount:w.toString()}),className:`py-3 px-4 rounded-lg font-semibold transition-all ${o.amount===w.toString()?"text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,style:o.amount===w.toString()?{backgroundColor:P.primary.teal}:{},children:["$",w]},w))}),l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.customAmount}),l.jsxs("div",{className:"relative",children:[l.jsx(mu,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"number",value:o.amount,onChange:w=>u({...o,amount:w.target.value}),min:"10",step:"1",className:"w-full pl-12 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent text-lg font-semibold",placeholder:"Enter amount...",required:!0})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recipient Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.recipientName}),l.jsxs("div",{className:"relative",children:[l.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:o.recipientName,onChange:w=>u({...o,recipientName:w.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.recipientEmail}),l.jsxs("div",{className:"relative",children:[l.jsx(xx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"email",value:o.recipientEmail,onChange:w=>u({...o,recipientEmail:w.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.senderName}),l.jsxs("div",{className:"relative",children:[l.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",value:o.senderName,onChange:w=>u({...o,senderName:w.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.senderEmail}),l.jsxs("div",{className:"relative",children:[l.jsx(xx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"email",value:o.senderEmail,onChange:w=>u({...o,senderEmail:w.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.message}),l.jsxs("div",{className:"relative",children:[l.jsx(wN,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),l.jsx("textarea",{value:o.message,onChange:w=>u({...o,message:w.target.value}),rows:4,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent resize-none",placeholder:h.messagePlaceholder})]})]}),l.jsx("button",{type:"submit",className:"w-full py-4 text-white rounded-lg font-semibold text-lg hover:opacity-90 transition-opacity",style:{backgroundColor:P.primary.teal},children:h.continue})]}):l.jsxs("form",{onSubmit:y,className:"p-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6",style:{color:P.primary.teal},children:h.step2}),l.jsxs("div",{className:"mb-8",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:h.paymentMethod}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>u({...o,paymentMethod:"credit-card"}),className:`p-6 rounded-xl border-2 transition-all ${o.paymentMethod==="credit-card"?"border-teal-500 bg-teal-50":"border-gray-300 bg-white hover:border-gray-400"}`,children:[l.jsx(Rf,{className:"w-8 h-8 mx-auto mb-3",style:{color:P.primary.teal}}),l.jsx("p",{className:"font-semibold text-gray-900",children:h.creditCard})]}),l.jsxs("button",{type:"button",onClick:()=>u({...o,paymentMethod:"paypal"}),className:`p-6 rounded-xl border-2 transition-all ${o.paymentMethod==="paypal"?"border-teal-500 bg-teal-50":"border-gray-300 bg-white hover:border-gray-400"}`,children:[l.jsx("svg",{className:"w-8 h-8 mx-auto mb-3",viewBox:"0 0 24 24",fill:"#00457C",children:l.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944 3.24a.77.77 0 0 1 .758-.64h8.433c2.767 0 4.608.617 5.473 1.833.838 1.182.896 2.844.175 5.083-.841 2.622-2.354 4.327-4.502 5.073-1.015.352-2.27.545-3.735.575l-.813.01c-.672 0-.988.275-1.069.861l-.022.104-.675 4.28-.031.163a.37.37 0 0 1-.363.306zm7.723-10.07c.112-.726.184-1.204.216-1.434.165-1.194-.003-1.988-.495-2.361-.563-.426-1.549-.639-2.931-.639H8.858c-.341 0-.635.24-.692.565l-1.445 9.157h2.079c.672 0 .988-.275 1.069-.861l.022-.104.675-4.28.031-.163a.77.77 0 0 1 .758-.64h.477c1.971 0 3.444-.798 4.417-2.391.445-.728.729-1.545.85-2.449z"})}),l.jsx("p",{className:"font-semibold text-gray-900",children:h.paypal})]})]})]}),o.paymentMethod==="credit-card"?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Note:"})," This is a demo interface. In production, you would integrate with Stripe, Square, or another payment processor for secure credit card processing."]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.cardNumber}),l.jsx("input",{type:"text",placeholder:"1234 5678 9012 3456",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.expiryDate}),l.jsx("input",{type:"text",placeholder:"MM/YY",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.cvv}),l.jsx("input",{type:"text",placeholder:"123",maxLength:"4",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.fullName}),l.jsx("input",{type:"text",placeholder:"John Doe",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.country}),l.jsxs("select",{className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0,children:[l.jsx("option",{value:"CA",children:"Canada"}),l.jsx("option",{value:"US",children:"United States"}),l.jsx("option",{value:"RU",children:"Russia"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h.zipCode}),l.jsx("input",{type:"text",placeholder:"M5V 3A8",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00BCD4] focus:border-transparent",required:!0})]})]})]}):l.jsxs("div",{className:"bg-gray-50 border-2 border-gray-300 rounded-xl p-8 text-center",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",viewBox:"0 0 24 24",fill:"#00457C",children:l.jsx("path",{d:"M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944 3.24a.77.77 0 0 1 .758-.64h8.433c2.767 0 4.608.617 5.473 1.833.838 1.182.896 2.844.175 5.083-.841 2.622-2.354 4.327-4.502 5.073-1.015.352-2.27.545-3.735.575l-.813.01c-.672 0-.988.275-1.069.861l-.022.104-.675 4.28-.031.163a.37.37 0 0 1-.363.306zm7.723-10.07c.112-.726.184-1.204.216-1.434.165-1.194-.003-1.988-.495-2.361-.563-.426-1.549-.639-2.931-.639H8.858c-.341 0-.635.24-.692.565l-1.445 9.157h2.079c.672 0 .988-.275 1.069-.861l.022-.104.675-4.28.031-.163a.77.77 0 0 1 .758-.64h.477c1.971 0 3.444-.798 4.417-2.391.445-.728.729-1.545.85-2.449z"})}),l.jsx("p",{className:"text-lg text-gray-700",children:h.paypalInfo}),l.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:[l.jsx("strong",{children:"Note:"})," In production, this would integrate with PayPal's API"]})]}),l.jsxs("div",{className:"mt-8 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl p-6 border-2",style:{borderColor:P.primary.teal},children:[l.jsx("h3",{className:"font-bold text-lg mb-4",children:"Order Summary"}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-700",children:"Gift Card Amount:"}),l.jsxs("span",{className:"font-semibold",children:["$",o.amount]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-700",children:"To:"}),l.jsx("span",{className:"font-semibold",children:o.recipientName})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-700",children:"From:"}),l.jsx("span",{className:"font-semibold",children:o.senderName})]})]}),l.jsx("div",{className:"border-t-2 border-teal-200 pt-4 mt-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xl font-bold",children:"Total:"}),l.jsxs("span",{className:"text-3xl font-bold",style:{color:P.primary.teal},children:["$",o.amount]})]})})]}),l.jsxs("div",{className:"flex gap-4 mt-8",children:[l.jsx("button",{type:"button",onClick:()=>a(1),className:"flex-1 py-4 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold text-lg hover:bg-gray-50 transition-colors",children:h.back}),l.jsx("button",{type:"submit",disabled:i,className:"flex-1 py-4 text-white rounded-lg font-semibold text-lg hover:opacity-90 transition-opacity disabled:opacity-50",style:{backgroundColor:P.primary.teal},children:i?h.processing:h.purchaseNow})]}),l.jsxs("p",{className:"text-xs text-gray-500 text-center mt-6",children:[h.securePayment,"  ",h.terms]})]})})]})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fY(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(h){try{d(r.next(h))}catch(f){s(f)}}function u(h){try{d(r.throw(h))}catch(f){s(f)}}function d(h){h.done?i(h.value):a(h.value).then(o,u)}d((r=r.apply(t,[])).next())})}function mY(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],a=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var io=function(){return io=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},io.apply(this,arguments)},OD=function(t){return{loading:t==null,value:t}},pY=function(){return function(t,e){switch(e.type){case"error":return io(io({},t),{error:e.error,loading:!1,value:void 0});case"reset":return OD(e.defaultValue);case"value":return io(io({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},gY=function(t){var e=t?t():void 0,n=R.useReducer(pY(),OD(e)),r=n[0],a=n[1],i=R.useCallback(function(){var u=t?t():void 0;a({type:"reset",defaultValue:u})},[t]),s=R.useCallback(function(u){a({type:"error",error:u})},[]),o=R.useCallback(function(u){a({type:"value",value:u})},[]);return R.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:s,setValue:o,value:r.value}},[r.error,r.loading,i,s,o,r.value])},yY=function(t,e){var n=gY(function(){return t.currentUser}),r=n.error,a=n.loading,i=n.setError,s=n.setValue,o=n.value;return R.useEffect(function(){var u=uU(t,function(d){return fY(void 0,void 0,void 0,function(){var h;return mY(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(d)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),i(h),[3,4];case 4:return s(d),[2]}})})},i);return function(){u()}},[t]),[o,a,r]};const WE=({children:t})=>{const[e,n]=yY(S_);return n?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"text-lg",children:"Loading..."})}):e?t:l.jsx(Fk,{to:"/login"})};function vY(){return l.jsx(T4,{children:l.jsx(m4,{basename:"/PlanYourTripNow",children:l.jsxs(qk,{children:[l.jsx(ba,{path:"/",element:l.jsx(OM,{})}),l.jsx(ba,{path:"/admin",element:l.jsx(WE,{children:l.jsx(OB,{})})}),l.jsx(ba,{path:"/login",element:l.jsx(JB,{})}),l.jsx(ba,{path:"/register/:tripId",element:l.jsx(XB,{})}),l.jsx(ba,{path:"/gift/:giftCardId",element:l.jsx(dY,{})}),l.jsx(ba,{path:"/gift-card-purchase",element:l.jsx(hY,{})}),l.jsx(ba,{path:"/gift-cards",element:l.jsx(WE,{children:l.jsx(cY,{})})})]})})})}Gj.createRoot(document.getElementById("root")).render(l.jsx(R.StrictMode,{children:l.jsx(vY,{})}));
